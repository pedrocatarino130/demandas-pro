{"version":3,"file":"Rotina-B_eeB5OY.js","sources":["../../src/views/Rotina.js"],"sourcesContent":["/**\n * View Rotina\n * Gerencia tarefas de rotina com visual iOS\n */\n\nimport {\n    store\n} from '../store.js';\nimport {\n    TaskCard\n} from '../components/TaskCard.js';\nimport {\n    getOverdueTasks,\n    getPostponedTasks\n} from '../utils/taskFilters.js';\nimport {\n    formatTime,\n    formatDate,\n    toDate,\n    getTodayISO\n} from '../utils/dateUtils.js';\nimport {\n    toast\n} from '../components/Toast.js';\nimport {\n    setupSwipeGestures,\n    createCompleteTaskHandler,\n    createPostponeTaskHandler\n} from '../utils/swipe-gestures.js';\nimport {\n    confirmAction\n} from '../components/ConfirmModal.js';\n\nclass RotinaView {\n    constructor() {\n        this.unsubscribe = null;\n        this.currentFilter = 'all'; // 'all', 'today', 'overdue', 'completed', 'postponed'\n        this.searchQuery = '';\n        this.sortBy = 'time'; // 'time', 'priority', 'title'\n        this.sortOrder = 'asc'; // 'asc', 'desc'\n        this.priorityFilter = 'all'; // 'all', 'urgente', 'alta', 'media', 'baixa'\n        \n        // Event listeners handlers (para cleanup)\n        this.eventHandlers = {\n            filterClick: null,\n            checkboxChange: null,\n            actionClick: null,\n            searchInput: null,\n            sortChange: null,\n            priorityFilterChange: null\n        };\n    }\n\n    render() {\n        const state = store.getState();\n        const tarefas = state.tarefasRotina || [];\n\n        // Filtrar tarefas baseado no filtro atual\n        let filteredTasks = this.filterTasks(tarefas);\n        \n        // Aplicar busca\n        if (this.searchQuery) {\n            filteredTasks = this.searchTasks(filteredTasks);\n        }\n        \n        // Aplicar filtro de prioridade\n        if (this.priorityFilter !== 'all') {\n            filteredTasks = filteredTasks.filter(t => \n                (t.prioridade || 'media').toLowerCase() === this.priorityFilter.toLowerCase()\n            );\n        }\n        \n        // Ordenar tarefas\n        filteredTasks = this.sortTasks(filteredTasks);\n\n        // Separar tarefas por categoria\n        let pendingTasks = filteredTasks.filter(t => !t.completed);\n        const completedTasks = filteredTasks.filter(t => t.completed);\n        \n        // Separar tarefas adiadas (apenas se n√£o estiver no filtro espec√≠fico)\n        let postponedTasks = [];\n        if (this.currentFilter === 'postponed') {\n            // Se estiver no filtro de adiadas, mostrar apenas essas\n            postponedTasks = filteredTasks;\n            pendingTasks = [];\n        } else {\n            // Caso contr√°rio, separar as adiadas das pendentes normais\n            postponedTasks = getPostponedTasks(pendingTasks);\n            // Remover tarefas adiadas das pendentes para n√£o duplicar\n            const postponedIds = new Set(postponedTasks.map(t => t.id || t.contador));\n            pendingTasks = pendingTasks.filter(t => !postponedIds.has(t.id || t.contador));\n        }\n\n        return `\n      <div class=\"rotina-view\">\n        <div class=\"rotina-header\">\n          <h1 class=\"rotina-title\">üìÖ Minha Rotina</h1>\n          <div class=\"rotina-header-controls\">\n            <button class=\"btn btn-primary\" id=\"btnAddRotina\" title=\"Adicionar nova tarefa de rotina\">‚ûï Nova Tarefa</button>\n          </div>\n          \n          <div class=\"rotina-search-sort\">\n            <div class=\"rotina-search\">\n              <input \n                type=\"text\" \n                id=\"rotina-search-input\" \n                class=\"rotina-search-input\" \n                placeholder=\"üîç Buscar tarefas...\"\n                value=\"${this.escapeHtml(this.searchQuery)}\"\n              />\n            </div>\n            <div class=\"rotina-sort-controls\">\n              <select id=\"rotina-sort-by\" class=\"rotina-sort-select\">\n                <option value=\"time\" ${this.sortBy === 'time' ? 'selected' : ''}>Data/Hora</option>\n                <option value=\"priority\" ${this.sortBy === 'priority' ? 'selected' : ''}>Prioridade</option>\n                <option value=\"title\" ${this.sortBy === 'title' ? 'selected' : ''}>T√≠tulo</option>\n              </select>\n              <button \n                id=\"rotina-sort-order\" \n                class=\"rotina-sort-btn\" \n                title=\"Alternar ordem\"\n                data-order=\"${this.sortOrder}\"\n              >\n                ${this.sortOrder === 'asc' ? '‚Üë' : '‚Üì'}\n              </button>\n            </div>\n          </div>\n          \n          <div class=\"rotina-filters\">\n            <button class=\"filter-btn ${this.currentFilter === 'all' ? 'active' : ''}\" \n                    data-filter=\"all\">Todas</button>\n            <button class=\"filter-btn ${this.currentFilter === 'today' ? 'active' : ''}\" \n                    data-filter=\"today\">Hoje</button>\n            <button class=\"filter-btn ${this.currentFilter === 'overdue' ? 'active' : ''}\" \n                    data-filter=\"overdue\">Atrasadas</button>\n            <button class=\"filter-btn ${this.currentFilter === 'completed' ? 'active' : ''}\" \n                    data-filter=\"completed\">Conclu√≠das</button>\n            <button class=\"filter-btn ${this.currentFilter === 'postponed' ? 'active' : ''}\" \n                    data-filter=\"postponed\">üìÖ Adiadas</button>\n            <select id=\"rotina-priority-filter\" class=\"filter-select\">\n              <option value=\"all\" ${this.priorityFilter === 'all' ? 'selected' : ''}>Todas Prioridades</option>\n              <option value=\"urgente\" ${this.priorityFilter === 'urgente' ? 'selected' : ''}>Urgente</option>\n              <option value=\"alta\" ${this.priorityFilter === 'alta' ? 'selected' : ''}>Alta</option>\n              <option value=\"media\" ${this.priorityFilter === 'media' ? 'selected' : ''}>M√©dia</option>\n              <option value=\"baixa\" ${this.priorityFilter === 'baixa' ? 'selected' : ''}>Baixa</option>\n            </select>\n          </div>\n        </div>\n\n        ${postponedTasks.length > 0 ? this.renderTasksSection('üìÖ Adiadas', postponedTasks, false, true) : ''}\n        ${pendingTasks.length > 0 ? this.renderTasksSection('Pendentes', pendingTasks, false) : ''}\n        ${completedTasks.length > 0 ? this.renderTasksSection('Conclu√≠das', completedTasks, true) : ''}\n        \n        ${filteredTasks.length === 0 ? this.renderEmptyState() : ''}\n      </div>\n    `;\n    }\n\n    filterTasks(tasks) {\n        switch (this.currentFilter) {\n            case 'today':\n                return this.getTodayTasks(tasks);\n            case 'overdue':\n                return getOverdueTasks(tasks);\n            case 'completed':\n                return tasks.filter(t => t.completed);\n            case 'postponed':\n                return getPostponedTasks(tasks);\n            default:\n                return tasks;\n        }\n    }\n\n    searchTasks(tasks) {\n        if (!this.searchQuery) return tasks;\n        const query = this.searchQuery.toLowerCase();\n        return tasks.filter(task => {\n            const title = (task.titulo || task.nome || '').toLowerCase();\n            const description = (task.descricao || '').toLowerCase();\n            return title.includes(query) || description.includes(query);\n        });\n    }\n\n    sortTasks(tasks) {\n        const sorted = [...tasks];\n        const order = this.sortOrder === 'asc' ? 1 : -1;\n\n        sorted.sort((a, b) => {\n            switch (this.sortBy) {\n                case 'time':\n                    const timeA = toDate(a.time);\n                    const timeB = toDate(b.time);\n                    if (!timeA && !timeB) return 0;\n                    if (!timeA) return 1;\n                    if (!timeB) return -1;\n                    return (timeA - timeB) * order;\n\n                case 'priority':\n                    const priorityOrder = { urgente: 4, alta: 3, media: 2, baixa: 1 };\n                    const priorityA = priorityOrder[(a.prioridade || 'media').toLowerCase()] || 0;\n                    const priorityB = priorityOrder[(b.prioridade || 'media').toLowerCase()] || 0;\n                    return (priorityB - priorityA) * order;\n\n                case 'title':\n                    const titleA = (a.titulo || a.nome || '').toLowerCase();\n                    const titleB = (b.titulo || b.nome || '').toLowerCase();\n                    return titleA.localeCompare(titleB) * order;\n\n                default:\n                    return 0;\n            }\n        });\n\n        return sorted;\n    }\n\n    getTodayTasks(tasks) {\n        const today = getTodayISO();\n        return tasks.filter(task => {\n            if (!task.time) return false;\n            const taskDate = toDate(task.time);\n            if (!taskDate) return false;\n            const taskDateISO = taskDate.toISOString().split('T')[0];\n            return taskDateISO === today;\n        });\n    }\n\n    renderTasksSection(title, tasks, isCompleted, isPostponed = false) {\n        const overdueTasks = getOverdueTasks(tasks);\n\n        return `\n      <section class=\"rotina-section ${isPostponed ? 'rotina-section-postponed' : ''}\">\n        <div class=\"rotina-section-header\">\n          <h2 class=\"rotina-section-title\">${title}</h2>\n          <span class=\"rotina-section-count\">${tasks.length}</span>\n          ${isPostponed ? \n            `<span class=\"rotina-section-badge badge badge-info\" title=\"Tarefas adiadas para mais de 2 horas no futuro\">‚è∞ Adiadas</span>` : ''}\n          ${overdueTasks.length > 0 && !isCompleted && !isPostponed ? \n            `<span class=\"rotina-section-badge badge badge-danger\">${overdueTasks.length} atrasadas</span>` : ''}\n        </div>\n        <div class=\"rotina-tasks-list ${isCompleted ? 'rotina-tasks-completed' : ''} ${isPostponed ? 'rotina-tasks-postponed' : ''}\">\n          ${tasks.map(task => {\n            const taskCard = new TaskCard(task, {\n              showCheckbox: true,\n              showModule: false,\n              showPriority: true,\n              showDuration: true,\n              showActions: true,\n              isCurrent: false,\n              isOverdue: overdueTasks.some(t => (t.id || t.contador) === (task.id || task.contador)),\n              isPostponed: isPostponed\n            });\n            const cardHtml = taskCard.render().outerHTML;\n            const isRecurring = task.recurrence && task.recurrence.enabled;\n            return `<div class=\"rotina-task-item ${isPostponed ? 'rotina-task-postponed' : ''}\" data-task-id=\"${task.id || task.contador}\" ${isRecurring ? 'data-recurring=\"true\"' : ''}>${cardHtml}</div>`;\n          }).join('')}\n        </div>\n      </section>\n    `;\n    }\n\n    renderEmptyState() {\n        const messages = {\n            all: 'Nenhuma tarefa de rotina cadastrada',\n            today: 'Nenhuma tarefa para hoje',\n            overdue: 'Nenhuma tarefa atrasada! üéâ',\n            completed: 'Nenhuma tarefa conclu√≠da ainda',\n            postponed: 'Nenhuma tarefa adiada'\n        };\n        \n        return `\n      <div class=\"rotina-empty-state\">\n        <p class=\"rotina-empty-text\">${messages[this.currentFilter] || messages.all}</p>\n      </div>\n    `;\n    }\n\n    mount() {\n        // Escutar mudan√ßas no store\n        this.unsubscribe = store.subscribe(() => {\n            this.update();\n        });\n\n        // Event listeners\n        this.setupEventListeners();\n        \n        // Aplicar swipe gestures\n        this.setupSwipeGestures();\n    }\n\n    setupEventListeners() {\n        // Limpar listeners anteriores se existirem\n        this.cleanupEventListeners();\n\n        // Filtros - usar event delegation\n        this.eventHandlers.filterClick = (e) => {\n            const filterBtn = e.target.closest('.filter-btn');\n            if (filterBtn) {\n                const filter = filterBtn.getAttribute('data-filter');\n                this.currentFilter = filter;\n                this.update();\n            }\n        };\n        document.addEventListener('click', this.eventHandlers.filterClick);\n\n        // Bot√£o adicionar tarefa\n        const btnAdd = document.getElementById('btnAddRotina');\n        if (btnAdd) {\n            btnAdd.addEventListener('click', () => {\n                this.handleTaskAdd();\n            });\n        }\n\n        // Busca\n        const searchInput = document.getElementById('rotina-search-input');\n        if (searchInput) {\n            this.eventHandlers.searchInput = () => {\n                this.searchQuery = searchInput.value;\n                this.update();\n            };\n            searchInput.addEventListener('input', this.eventHandlers.searchInput);\n        }\n\n        // Ordena√ß√£o\n        const sortBy = document.getElementById('rotina-sort-by');\n        if (sortBy) {\n            this.eventHandlers.sortChange = () => {\n                this.sortBy = sortBy.value;\n                this.update();\n            };\n            sortBy.addEventListener('change', this.eventHandlers.sortChange);\n        }\n\n        const sortOrder = document.getElementById('rotina-sort-order');\n        if (sortOrder) {\n            sortOrder.addEventListener('click', () => {\n                this.sortOrder = this.sortOrder === 'asc' ? 'desc' : 'asc';\n                this.update();\n            });\n        }\n\n        // Filtro de prioridade\n        const priorityFilter = document.getElementById('rotina-priority-filter');\n        if (priorityFilter) {\n            this.eventHandlers.priorityFilterChange = () => {\n                this.priorityFilter = priorityFilter.value;\n                this.update();\n            };\n            priorityFilter.addEventListener('change', this.eventHandlers.priorityFilterChange);\n        }\n\n        // Checkboxes de conclus√£o - usar event delegation\n        this.eventHandlers.checkboxChange = (e) => {\n            if (e.target.classList.contains('task-checkbox') || e.target.classList.contains('ios-checkbox-input')) {\n                const taskId = e.target.getAttribute('data-task-id');\n                if (taskId) {\n                    this.handleTaskComplete(taskId, e.target.checked);\n                }\n            }\n        };\n        document.addEventListener('change', this.eventHandlers.checkboxChange);\n\n        // Bot√µes de a√ß√£o nos cards (editar/excluir) - usar event delegation\n        this.eventHandlers.actionClick = (e) => {\n            const actionBtn = e.target.closest('[data-action]');\n            if (!actionBtn) return;\n\n            const action = actionBtn.getAttribute('data-action');\n            const taskId = actionBtn.getAttribute('data-task-id');\n\n            if (action === 'edit' && taskId) {\n                this.handleTaskEdit(taskId);\n            } else if (action === 'delete' && taskId) {\n                this.handleTaskDelete(taskId);\n            }\n        };\n        document.addEventListener('click', this.eventHandlers.actionClick);\n    }\n\n    cleanupEventListeners() {\n        // Remover listeners anteriores\n        if (this.eventHandlers.filterClick) {\n            document.removeEventListener('click', this.eventHandlers.filterClick);\n        }\n        if (this.eventHandlers.checkboxChange) {\n            document.removeEventListener('change', this.eventHandlers.checkboxChange);\n        }\n        if (this.eventHandlers.actionClick) {\n            document.removeEventListener('click', this.eventHandlers.actionClick);\n        }\n        if (this.eventHandlers.searchInput) {\n            const searchInput = document.getElementById('rotina-search-input');\n            if (searchInput) {\n                searchInput.removeEventListener('input', this.eventHandlers.searchInput);\n            }\n        }\n        if (this.eventHandlers.sortChange) {\n            const sortBy = document.getElementById('rotina-sort-by');\n            if (sortBy) {\n                sortBy.removeEventListener('change', this.eventHandlers.sortChange);\n            }\n        }\n        if (this.eventHandlers.priorityFilterChange) {\n            const priorityFilter = document.getElementById('rotina-priority-filter');\n            if (priorityFilter) {\n                priorityFilter.removeEventListener('change', this.eventHandlers.priorityFilterChange);\n            }\n        }\n    }\n\n    setupSwipeGestures() {\n        // Aplicar swipe gestures nos cards\n        setTimeout(() => {\n            const taskItems = document.querySelectorAll('.rotina-task-item .task-card');\n            taskItems.forEach((card) => {\n                const taskId = card.closest('.rotina-task-item')?.getAttribute('data-task-id');\n                if (taskId) {\n                    setupSwipeGestures(card, {\n                        onSwipeLeft: createCompleteTaskHandler(taskId, (id) => {\n                            this.handleTaskComplete(id, true);\n                        }),\n                        onSwipeRight: createPostponeTaskHandler(taskId, (id, days) => {\n                            this.handlePostpone(id, days);\n                        })\n                    });\n                }\n            });\n        }, 100);\n    }\n\n    handleTaskComplete(taskId, completed) {\n        const state = store.getState();\n        const task = state.tarefasRotina.find(t => (t.id || t.contador) == taskId);\n        \n        if (!task) return;\n\n        const taskTitle = task.titulo || task.nome || 'Tarefa';\n\n        // Atualizar estado\n        store.updateItem('tarefasRotina', (t) => (t.id || t.contador) == taskId, {\n            completed,\n            completedAt: completed ? new Date().toISOString() : null,\n        });\n\n        // Se for tarefa recorrente e foi completada, criar pr√≥xima ocorr√™ncia\n        if (completed && task.recurrence) {\n            this.handleRecurringTask(task);\n        }\n\n        // Mostrar toast com op√ß√£o de desfazer\n        if (completed) {\n            toast.success(`\"${taskTitle}\" conclu√≠da!`, {\n                duration: 5000,\n                action: () => {\n                    // Desfazer\n                    store.updateItem('tarefasRotina', (t) => (t.id || t.contador) == taskId, {\n                        completed: false,\n                        completedAt: null,\n                    });\n                    toast.info('A√ß√£o desfeita');\n                },\n                actionLabel: 'Desfazer',\n            });\n        }\n    }\n\n    handleRecurringTask(task) {\n        if (!task.recurrence || !task.recurrence.enabled) return;\n\n        const state = store.getState();\n        const newId = (state.contadorRotina || 0) + 1;\n        const currentTime = task.time ? toDate(task.time) : new Date();\n        let nextTime = new Date(currentTime);\n\n        switch (task.recurrence.type) {\n            case 'daily':\n                nextTime.setDate(nextTime.getDate() + 1);\n                break;\n            case 'weekly':\n                nextTime.setDate(nextTime.getDate() + 7);\n                break;\n            case 'monthly':\n                nextTime.setMonth(nextTime.getMonth() + 1);\n                break;\n            case 'custom':\n                nextTime.setDate(nextTime.getDate() + (task.recurrence.interval || 1));\n                break;\n            default:\n                return;\n        }\n\n        const nextTask = {\n            ...task,\n            id: newId,\n            contador: newId,\n            time: nextTime.toISOString(),\n            completed: false,\n            completedAt: null,\n            createdAt: new Date().toISOString(),\n            updatedAt: new Date().toISOString()\n        };\n\n        // Remover campos que n√£o devem ser copiados\n        delete nextTask.completedAt;\n\n        store.addItem('tarefasRotina', nextTask);\n        store.setState({ contadorRotina: newId });\n    }\n\n    handlePostpone(taskId, days) {\n        const state = store.getState();\n        const task = state.tarefasRotina.find(t => (t.id || t.contador) == taskId);\n        \n        if (task && task.time) {\n            const taskDate = toDate(task.time);\n            if (taskDate) {\n                taskDate.setDate(taskDate.getDate() + days);\n                const newTime = taskDate.toISOString();\n                store.updateItem('tarefasRotina', (t) => (t.id || t.contador) == taskId, {\n                    time: newTime\n                });\n                toast.info(`Tarefa adiada ${days} dia${days > 1 ? 's' : ''}`);\n            }\n        }\n    }\n\n    handleTaskAdd() {\n        const state = store.getState();\n        const newId = (state.contadorRotina || 0) + 1;\n        \n        // Criar nova tarefa com valores padr√£o\n        const now = new Date();\n        const defaultTime = new Date(now.getFullYear(), now.getMonth(), now.getDate(), now.getHours() + 1, 0, 0);\n        \n        const newTask = {\n            id: newId,\n            contador: newId,\n            titulo: 'Nova Tarefa de Rotina',\n            descricao: '',\n            time: defaultTime.toISOString(),\n            prioridade: 'media',\n            duracao: null,\n            completed: false,\n            modulo: 'rotina',\n            recurrence: {\n                enabled: false,\n                type: 'daily',\n                interval: 1\n            },\n            createdAt: new Date().toISOString(),\n            updatedAt: new Date().toISOString()\n        };\n\n        // Abrir modal para editar a nova tarefa\n        this.openTaskModal(newTask, (taskData) => {\n            const finalTask = {\n                ...newTask,\n                ...taskData\n            };\n            store.addItem('tarefasRotina', finalTask);\n            store.setState({ contadorRotina: newId });\n            \n            toast.success('Tarefa de rotina criada com sucesso');\n            this.update();\n        });\n    }\n\n    handleTaskEdit(taskId) {\n        const state = store.getState();\n        const task = state.tarefasRotina.find(t => (t.id || t.contador) == taskId);\n\n        if (!task) {\n            toast.error('Tarefa n√£o encontrada');\n            return;\n        }\n\n        this.openTaskModal(task, (taskData) => {\n            store.updateItem('tarefasRotina', (t) => (t.id || t.contador) == taskId, {\n                ...taskData,\n                updatedAt: new Date().toISOString()\n            });\n            toast.success('Tarefa atualizada com sucesso');\n            this.update();\n        });\n    }\n\n    async handleTaskDelete(taskId) {\n        const state = store.getState();\n        const task = state.tarefasRotina.find(t => (t.id || t.contador) == taskId);\n\n        if (!task) {\n            toast.error('Tarefa n√£o encontrada');\n            return;\n        }\n\n        const taskTitle = task.titulo || task.nome || 'Tarefa';\n        const confirmed = await confirmAction(`Tem certeza que deseja excluir \"${taskTitle}\"?`);\n        \n        if (confirmed) {\n            store.removeItem('tarefasRotina', (t) => (t.id || t.contador) == taskId);\n            toast.success('Tarefa exclu√≠da com sucesso');\n            this.update();\n        }\n    }\n\n    openTaskModal(task, onSave) {\n        // Criar modal\n        const modal = document.createElement('div');\n        modal.className = 'rotina-task-modal';\n\n        const taskTime = task.time ? toDate(task.time) : new Date();\n        const dateValue = taskTime ? taskTime.toISOString().split('T')[0] : '';\n        const hourValue = taskTime ? String(taskTime.getHours()).padStart(2, '0') : '';\n        const minuteValue = taskTime ? String(taskTime.getMinutes()).padStart(2, '0') : '';\n        \n        const recurrence = task.recurrence || { enabled: false, type: 'daily', interval: 1 };\n\n        modal.innerHTML = `\n      <div class=\"rotina-task-modal-content\">\n        <h2 class=\"rotina-task-modal-title\">${task.id ? 'Editar' : 'Nova'} Tarefa de Rotina</h2>\n        <div class=\"rotina-task-form-group\">\n          <label class=\"rotina-task-form-label\">T√≠tulo *</label>\n          <input type=\"text\" id=\"rotina-titulo\" class=\"rotina-task-form-input\" value=\"${this.escapeHtml(task.titulo || task.nome || '')}\" required>\n        </div>\n        <div class=\"rotina-task-form-group\">\n          <label class=\"rotina-task-form-label\">Descri√ß√£o</label>\n          <textarea id=\"rotina-descricao\" rows=\"4\" class=\"rotina-task-form-textarea\">${this.escapeHtml(task.descricao || '')}</textarea>\n        </div>\n        <div class=\"rotina-task-form-group\">\n          <label class=\"rotina-task-form-label\">Data</label>\n          <input type=\"date\" id=\"rotina-date\" class=\"rotina-task-form-input\" value=\"${dateValue}\">\n        </div>\n        <div class=\"rotina-task-form-group\">\n          <label class=\"rotina-task-form-label\">Hora</label>\n          <div class=\"rotina-task-time-group\">\n            <input type=\"number\" id=\"rotina-hour\" class=\"rotina-task-form-input rotina-task-time-input\" value=\"${hourValue}\" min=\"0\" max=\"23\" placeholder=\"HH\">\n            <span class=\"rotina-task-time-separator\">:</span>\n            <input type=\"number\" id=\"rotina-minute\" class=\"rotina-task-form-input rotina-task-time-input\" value=\"${minuteValue}\" min=\"0\" max=\"59\" placeholder=\"MM\">\n          </div>\n        </div>\n        <div class=\"rotina-task-form-group\">\n          <label class=\"rotina-task-form-label\">Prioridade</label>\n          <select id=\"rotina-prioridade\" class=\"rotina-task-form-select\">\n            <option value=\"baixa\" ${task.prioridade === 'baixa' ? 'selected' : ''}>Baixa</option>\n            <option value=\"media\" ${task.prioridade === 'media' || !task.prioridade ? 'selected' : ''}>M√©dia</option>\n            <option value=\"alta\" ${task.prioridade === 'alta' ? 'selected' : ''}>Alta</option>\n            <option value=\"urgente\" ${task.prioridade === 'urgente' ? 'selected' : ''}>Urgente</option>\n          </select>\n        </div>\n        <div class=\"rotina-task-form-group\">\n          <label class=\"rotina-task-form-label\">Dura√ß√£o (minutos)</label>\n          <input type=\"number\" id=\"rotina-duracao\" class=\"rotina-task-form-input\" value=\"${task.duracao || ''}\" min=\"0\" placeholder=\"Ex: 30\">\n        </div>\n        <div class=\"rotina-task-form-group\">\n          <label class=\"rotina-task-form-label\">\n            <input type=\"checkbox\" id=\"rotina-recurrence-enabled\" ${recurrence.enabled ? 'checked' : ''}>\n            Repetir tarefa\n          </label>\n        </div>\n        <div id=\"rotina-recurrence-options\" style=\"display: ${recurrence.enabled ? 'block' : 'none'};\">\n          <div class=\"rotina-task-form-group\">\n            <label class=\"rotina-task-form-label\">Tipo de repeti√ß√£o</label>\n            <select id=\"rotina-recurrence-type\" class=\"rotina-task-form-select\">\n              <option value=\"daily\" ${recurrence.type === 'daily' ? 'selected' : ''}>Di√°ria</option>\n              <option value=\"weekly\" ${recurrence.type === 'weekly' ? 'selected' : ''}>Semanal</option>\n              <option value=\"monthly\" ${recurrence.type === 'monthly' ? 'selected' : ''}>Mensal</option>\n              <option value=\"custom\" ${recurrence.type === 'custom' ? 'selected' : ''}>Personalizada</option>\n            </select>\n          </div>\n          <div class=\"rotina-task-form-group\" id=\"rotina-recurrence-interval-group\" style=\"display: ${recurrence.type === 'custom' ? 'block' : 'none'};\">\n            <label class=\"rotina-task-form-label\">Intervalo (dias)</label>\n            <input type=\"number\" id=\"rotina-recurrence-interval\" class=\"rotina-task-form-input\" value=\"${recurrence.interval || 1}\" min=\"1\" placeholder=\"Ex: 3\">\n          </div>\n        </div>\n        <div class=\"rotina-task-modal-footer\">\n          <button id=\"rotina-cancel\" class=\"rotina-task-btn rotina-task-btn-cancel\">Cancelar</button>\n          <button id=\"rotina-save\" class=\"rotina-task-btn rotina-task-btn-save\">Salvar</button>\n        </div>\n      </div>\n    `;\n\n        document.body.appendChild(modal);\n\n        // Toggle de repeti√ß√£o\n        const recurrenceEnabled = modal.querySelector('#rotina-recurrence-enabled');\n        const recurrenceOptions = modal.querySelector('#rotina-recurrence-options');\n        const recurrenceType = modal.querySelector('#rotina-recurrence-type');\n        const intervalGroup = modal.querySelector('#rotina-recurrence-interval-group');\n\n        if (recurrenceEnabled) {\n            recurrenceEnabled.addEventListener('change', () => {\n                if (recurrenceOptions) {\n                    recurrenceOptions.style.display = recurrenceEnabled.checked ? 'block' : 'none';\n                }\n            });\n        }\n\n        if (recurrenceType) {\n            recurrenceType.addEventListener('change', () => {\n                if (intervalGroup) {\n                    intervalGroup.style.display = recurrenceType.value === 'custom' ? 'block' : 'none';\n                }\n            });\n        }\n\n        const close = () => {\n            if (document.body.contains(modal)) {\n                document.body.removeChild(modal);\n            }\n        };\n\n        modal.querySelector('#rotina-cancel').addEventListener('click', close);\n        modal.addEventListener('click', (e) => {\n            if (e.target === modal) close();\n        });\n\n        // Fechar com ESC\n        const escHandler = (e) => {\n            if (e.key === 'Escape') {\n                close();\n                document.removeEventListener('keydown', escHandler);\n            }\n        };\n        document.addEventListener('keydown', escHandler);\n\n        modal.querySelector('#rotina-save').addEventListener('click', () => {\n            const titulo = modal.querySelector('#rotina-titulo').value.trim();\n            if (!titulo) {\n                toast.error('O t√≠tulo √© obrigat√≥rio');\n                return;\n            }\n\n            const date = modal.querySelector('#rotina-date').value;\n            const hour = parseInt(modal.querySelector('#rotina-hour').value) || 0;\n            const minute = parseInt(modal.querySelector('#rotina-minute').value) || 0;\n\n            let time = null;\n            if (date) {\n                const dateObj = new Date(date);\n                dateObj.setHours(hour, minute, 0, 0);\n                time = dateObj.toISOString();\n            }\n\n            const recurrenceEnabled = modal.querySelector('#rotina-recurrence-enabled').checked;\n            const recurrenceType = modal.querySelector('#rotina-recurrence-type').value;\n            const recurrenceInterval = parseInt(modal.querySelector('#rotina-recurrence-interval')?.value) || 1;\n\n            const taskData = {\n                titulo: titulo,\n                descricao: modal.querySelector('#rotina-descricao').value.trim(),\n                time: time,\n                prioridade: modal.querySelector('#rotina-prioridade').value,\n                duracao: modal.querySelector('#rotina-duracao').value ? parseInt(modal.querySelector('#rotina-duracao').value) : null,\n                modulo: 'rotina',\n                recurrence: {\n                    enabled: recurrenceEnabled,\n                    type: recurrenceType,\n                    interval: recurrenceType === 'custom' ? recurrenceInterval : 1\n                }\n            };\n\n            onSave(taskData);\n            close();\n        });\n\n        // Focar no t√≠tulo\n        setTimeout(() => modal.querySelector('#rotina-titulo').focus(), 100);\n    }\n\n    escapeHtml(text) {\n        const div = document.createElement('div');\n        div.textContent = text;\n        return div.innerHTML;\n    }\n\n    update() {\n        const container = document.getElementById('app');\n        if (container) {\n            container.innerHTML = this.render();\n            this.setupEventListeners();\n            this.setupSwipeGestures();\n        }\n    }\n\n    destroy() {\n        this.cleanupEventListeners();\n        if (this.unsubscribe) {\n            this.unsubscribe();\n        }\n    }\n}\n\n// Exportar fun√ß√£o de renderiza√ß√£o para o router\nexport default function renderRotina() {\n    const view = new RotinaView();\n    \n    return {\n        render: () => view.render(),\n        mount: () => {\n            setTimeout(() => {\n                view.mount();\n            }, 0);\n            return view;\n        },\n    };\n}\n"],"names":["RotinaView","tarefas","store","filteredTasks","t","pendingTasks","completedTasks","postponedTasks","getPostponedTasks","postponedIds","tasks","getOverdueTasks","query","task","title","description","sorted","order","b","timeA","toDate","timeB","priorityOrder","priorityA","titleA","titleB","today","getTodayISO","taskDate","isCompleted","isPostponed","overdueTasks","cardHtml","TaskCard","isRecurring","messages","e","filterBtn","filter","btnAdd","searchInput","sortBy","sortOrder","priorityFilter","taskId","actionBtn","action","card","_a","setupSwipeGestures","createCompleteTaskHandler","id","createPostponeTaskHandler","days","completed","taskTitle","toast","newId","currentTime","nextTime","nextTask","newTime","now","defaultTime","newTask","taskData","finalTask","confirmAction","onSave","modal","taskTime","dateValue","hourValue","minuteValue","recurrence","recurrenceEnabled","recurrenceOptions","recurrenceType","intervalGroup","close","escHandler","titulo","date","hour","minute","time","dateObj","recurrenceInterval","text","div","container","renderRotina","view"],"mappings":"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"}