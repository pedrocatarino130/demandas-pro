{"version":3,"file":"QuickAddParser-RLhah0gW.js","sources":["../../src/components/estudos/QuickAddParser.js"],"sourcesContent":["/**\n * TASK-012: Parser de Comandos Natural Language\n * \n * Interpreta texto natural para cria√ß√£o r√°pida de t√≥picos de estudo\n * Formato: \"Python @udemy #urgente :2h !alta\"\n * \n * Padr√µes suportados:\n * - @√°rea: Define ou referencia √°rea de estudo\n * - #tag: Adiciona tags (m√∫ltiplas permitidas)\n * - :tempo: Define dura√ß√£o estimada (ex: :2h, :30m, :1d)\n * - !prioridade: Define prioridade (alta, m√©dia, baixa, urgente)\n */\n\nclass QuickAddParser {\n    constructor() {\n        this.patterns = {\n            area: /@(\\w+)/g,\n            tags: /#(\\w+)/g,\n            time: /:(\\d+[dhm])/g,\n            priority: /!(\\w+)/g\n        };\n\n        // Mapeamento de tags para prioridade autom√°tica\n        this.tagPriorityMap = {\n            'urgente': 'Alta',\n            'urgent': 'Alta',\n            'importante': 'Alta',\n            'important': 'Alta',\n            'alta': 'Alta',\n            'high': 'Alta',\n            'm√©dia': 'M√©dia',\n            'media': 'M√©dia',\n            'medium': 'M√©dia',\n            'baixa': 'Baixa',\n            'low': 'Baixa'\n        };\n    }\n\n    /**\n     * Parse do texto de entrada\n     * @param {string} input - Texto do usu√°rio\n     * @returns {Object} Objeto estruturado com os dados extra√≠dos\n     */\n    parse(input) {\n        if (!input || typeof input !== 'string') {\n            return this._createEmptyResult();\n        }\n\n        const trimmed = input.trim();\n        if (!trimmed) {\n            return this._createEmptyResult();\n        }\n\n        // Extrair padr√µes\n        const area = this._extractArea(trimmed);\n        const tags = this._extractTags(trimmed);\n        const time = this._extractTime(trimmed);\n        const priority = this._extractPriority(trimmed, tags);\n\n        // Remover padr√µes do t√≠tulo\n        const title = this._extractTitle(trimmed);\n\n        return {\n            titulo: title,\n            area: area,\n            tags: tags,\n            tempoEstimado: time,\n            prioridade: priority,\n            raw: trimmed,\n            isValid: title.length > 0\n        };\n    }\n\n    /**\n     * Extrai √°rea do texto (@√°rea)\n     */\n    _extractArea(text) {\n        const matches = [...text.matchAll(this.patterns.area)];\n        if (matches.length > 0) {\n            return matches[0][1];\n        }\n        return null;\n    }\n\n    /**\n     * Extrai tags do texto (#tag)\n     */\n    _extractTags(text) {\n        const matches = [...text.matchAll(this.patterns.tags)];\n        return matches.map(m => m[1].toLowerCase());\n    }\n\n    /**\n     * Extrai tempo estimado do texto (:2h, :30m, :1d)\n     */\n    _extractTime(text) {\n        const matches = [...text.matchAll(this.patterns.time)];\n        if (matches.length > 0) {\n            const timeStr = matches[0][1];\n            const value = parseInt(timeStr);\n            const unit = timeStr.slice(-1);\n\n            // Converter para minutos\n            let minutes = 0;\n            switch (unit) {\n                case 'h':\n                    minutes = value * 60;\n                    break;\n                case 'm':\n                    minutes = value;\n                    break;\n                case 'd':\n                    minutes = value * 24 * 60;\n                    break;\n            }\n\n            return {\n                raw: timeStr,\n                minutes: minutes,\n                display: this._formatTime(minutes)\n            };\n        }\n        return null;\n    }\n\n    /**\n     * Extrai prioridade do texto (!alta) ou infere de tags\n     */\n    _extractPriority(text, tags) {\n        // Primeiro, tenta extrair do padr√£o !prioridade\n        const matches = [...text.matchAll(this.patterns.priority)];\n        if (matches.length > 0) {\n            const priorityStr = matches[0][1].toLowerCase();\n            return this._normalizePriority(priorityStr);\n        }\n\n        // Se n√£o encontrou, tenta inferir das tags\n        for (const tag of tags) {\n            if (this.tagPriorityMap[tag]) {\n                return this.tagPriorityMap[tag];\n            }\n        }\n\n        return 'M√©dia'; // Default\n    }\n\n    /**\n     * Normaliza string de prioridade para formato padr√£o\n     */\n    _normalizePriority(priority) {\n        const normalized = priority.toLowerCase();\n        const map = {\n            'alta': 'Alta',\n            'high': 'Alta',\n            'urgente': 'Alta',\n            'urgent': 'Alta',\n            'm√©dia': 'M√©dia',\n            'media': 'M√©dia',\n            'medium': 'M√©dia',\n            'baixa': 'Baixa',\n            'low': 'Baixa'\n        };\n        return map[normalized] || 'M√©dia';\n    }\n\n    /**\n     * Remove padr√µes do texto para obter o t√≠tulo limpo\n     */\n    _extractTitle(text) {\n        let title = text;\n\n        // Remove todos os padr√µes\n        title = title.replace(this.patterns.area, '');\n        title = title.replace(this.patterns.tags, '');\n        title = title.replace(this.patterns.time, '');\n        title = title.replace(this.patterns.priority, '');\n\n        // Limpa espa√ßos extras\n        title = title.trim().replace(/\\s+/g, ' ');\n\n        return title;\n    }\n\n    /**\n     * Formata minutos para exibi√ß√£o\n     */\n    _formatTime(minutes) {\n        if (minutes < 60) {\n            return `${minutes}min`;\n        } else if (minutes < 1440) {\n            const hours = Math.floor(minutes / 60);\n            const mins = minutes % 60;\n            return mins > 0 ? `${hours}h ${mins}min` : `${hours}h`;\n        } else {\n            const days = Math.floor(minutes / 1440);\n            const hours = Math.floor((minutes % 1440) / 60);\n            return hours > 0 ? `${days}d ${hours}h` : `${days}d`;\n        }\n    }\n\n    /**\n     * Cria resultado vazio\n     */\n    _createEmptyResult() {\n        return {\n            titulo: '',\n            area: null,\n            tags: [],\n            tempoEstimado: null,\n            prioridade: 'M√©dia',\n            raw: '',\n            isValid: false\n        };\n    }\n\n    /**\n     * Valida se uma √°rea existe ou deve ser criada\n     * @param {string} areaName - Nome da √°rea\n     * @param {Array} existingAreas - Lista de √°reas existentes\n     * @returns {Object} { exists: boolean, area: Object|null }\n     */\n    validateArea(areaName, existingAreas) {\n        if (!areaName) {\n            return {\n                exists: false,\n                area: null\n            };\n        }\n\n        const normalized = areaName.toLowerCase();\n        const found = existingAreas.find(a =>\n            a.nome.toLowerCase() === normalized\n        );\n\n        return {\n            exists: !!found,\n            area: found || null,\n            shouldCreate: !found\n        };\n    }\n\n    /**\n     * Gera preview do que ser√° criado\n     * @param {Object} parsed - Resultado do parse\n     * @returns {string} Preview formatado\n     */\n    generatePreview(parsed) {\n        if (!parsed.isValid) {\n            return '‚ö†Ô∏è T√≠tulo inv√°lido';\n        }\n\n        const parts = [];\n        parts.push(`üìù **${parsed.titulo}**`);\n\n        if (parsed.area) {\n            parts.push(`üìö √Årea: ${parsed.area}`);\n        }\n\n        if (parsed.tags.length > 0) {\n            parts.push(`üè∑Ô∏è Tags: ${parsed.tags.map(t => `#${t}`).join(', ')}`);\n        }\n\n        if (parsed.tempoEstimado) {\n            parts.push(`‚è±Ô∏è Tempo: ${parsed.tempoEstimado.display}`);\n        }\n\n        parts.push(`üéØ Prioridade: ${parsed.prioridade}`);\n\n        return parts.join('\\n');\n    }\n}\n\n// Export ES6\nexport { QuickAddParser };\nexport default QuickAddParser;\n\n// Export para uso global (compatibilidade)\nif (typeof module !== 'undefined' && module.exports) {\n    module.exports = QuickAddParser;\n}\n"],"names":["QuickAddParser","input","trimmed","area","tags","time","priority","title","text","matches","m","timeStr","value","unit","minutes","priorityStr","tag","normalized","hours","mins","days","areaName","existingAreas","found","a","parsed","parts","t"],"mappings":"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"}