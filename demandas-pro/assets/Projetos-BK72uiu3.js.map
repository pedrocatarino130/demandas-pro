{"version":3,"file":"Projetos-BK72uiu3.js","sources":["../../src/utils/kanban-3-colunas.js","../../src/views/Projetos.js"],"sourcesContent":["/**\n * TASK-020: Refatorar Kanban para 3 Colunas\n * \n * Descri√ß√£o: Simplificar board removendo colunas n√£o usadas\n * Estimativa: M (6h)\n * Depend√™ncias: TASK-003 (Sistema de Estado Global)\n * \n * Crit√©rios de Aceita√ß√£o:\n * - Migrar dados: Revis√£o ‚Üí Fazendo, Bloqueado ‚Üí tag\n * - 3 colunas: A Fazer | Fazendo | Feito\n * - Cards minimalistas\n * - Filtros por respons√°vel\n * - Arquivar cards > 30 dias em Feito\n */\n\n/**\n * Configura√ß√£o das colunas do Kanban simplificado\n */\nexport const KANBAN_COLUMNS = {\n    TODO: {\n        id: 'todo',\n        title: 'A Fazer',\n        color: '#3b82f6'\n    },\n    DOING: {\n        id: 'doing',\n        title: 'Fazendo',\n        color: '#f59e0b'\n    },\n    DONE: {\n        id: 'done',\n        title: 'Feito',\n        color: '#10b981'\n    }\n};\n\n/**\n * Mapeamento de status antigos para novos\n */\nexport const STATUS_MIGRATION = {\n    'Revis√£o': 'doing',\n    'Bloqueado': 'todo', // Ser√° marcado com tag #bloqueado\n    'A Fazer': 'todo',\n    'Fazendo': 'doing',\n    'Feito': 'done',\n    'Conclu√≠do': 'done'\n};\n\n/**\n * Cria um board Kanban com 3 colunas\n * @param {Object} config - Configura√ß√£o do board\n * @param {HTMLElement} config.container - Container onde criar o board\n * @param {Array} config.tasks - Lista de tarefas\n * @param {Function} config.onTaskMove - Callback ao mover tarefa\n * @param {Function} config.onTaskClick - Callback ao clicar na tarefa\n */\nexport function createKanban3Columns(config) {\n    const {\n        container,\n        tasks = [],\n        onTaskMove,\n        onTaskClick\n    } = config;\n\n    // Limpar container\n    container.innerHTML = '';\n    container.className = 'kanban-3columns';\n\n    // Criar estrutura\n    container.innerHTML = `\n        <div class=\"kanban-header\">\n            <h2>üìã Projetos</h2>\n            <div class=\"kanban-header-controls\">\n                <button class=\"btn btn-primary\" id=\"btnAddTask\" title=\"Adicionar nova tarefa\">‚ûï Nova Tarefa</button>\n                <div class=\"kanban-search-wrapper\">\n                    <input \n                        type=\"text\" \n                        id=\"kanban-search\" \n                        class=\"kanban-search\" \n                        placeholder=\"üîç Buscar tarefas...\"\n                    />\n                </div>\n                <div class=\"kanban-filters\">\n                    <select id=\"filterResponsavel\" class=\"kanban-filter\">\n                        <option value=\"\">Todos os respons√°veis</option>\n                    </select>\n                    <button class=\"btn-icon\" id=\"btnViewToggle\" title=\"Alternar visualiza√ß√£o\">\n                        <span id=\"viewToggleIcon\">üìã</span>\n                    </button>\n                    <button class=\"btn-icon\" id=\"btnArquivar\" title=\"Arquivar conclu√≠dos > 30 dias\">üóÑÔ∏è Arquivar</button>\n                </div>\n            </div>\n        </div>\n        <div class=\"kanban-view-container\">\n            <div class=\"kanban-columns\" id=\"kanban-columns-view\">\n                <div class=\"kanban-column\" data-column=\"${KANBAN_COLUMNS.TODO.id}\">\n                    <div class=\"kanban-column-header\">\n                        <h3>${KANBAN_COLUMNS.TODO.title}</h3>\n                        <span class=\"kanban-count\" id=\"count-todo\">0</span>\n                    </div>\n                    <div class=\"kanban-column-body\" id=\"column-todo\"></div>\n                </div>\n                <div class=\"kanban-column\" data-column=\"${KANBAN_COLUMNS.DOING.id}\">\n                    <div class=\"kanban-column-header\">\n                        <h3>${KANBAN_COLUMNS.DOING.title}</h3>\n                        <span class=\"kanban-count\" id=\"count-doing\">0</span>\n                    </div>\n                    <div class=\"kanban-column-body\" id=\"column-doing\"></div>\n                </div>\n                <div class=\"kanban-column\" data-column=\"${KANBAN_COLUMNS.DONE.id}\">\n                    <div class=\"kanban-column-header\">\n                        <h3>${KANBAN_COLUMNS.DONE.title}</h3>\n                        <span class=\"kanban-count\" id=\"count-done\">0</span>\n                    </div>\n                    <div class=\"kanban-column-body\" id=\"column-done\"></div>\n                </div>\n            </div>\n            <div class=\"kanban-list-view\" id=\"kanban-list-view\" style=\"display: none;\"></div>\n        </div>\n    `;\n\n    // Estado interno para busca e visualiza√ß√£o\n    let currentSearchTerm = '';\n    let currentViewMode = 'kanban'; // 'kanban' ou 'list'\n    let allTasks = tasks;\n\n    // Renderizar tarefas\n    const renderAll = () => {\n        const filteredTasks = filterTasks(allTasks, currentSearchTerm);\n        renderTasks(filteredTasks, container, currentViewMode);\n        setupCardEventListeners(container, onTaskClick);\n        // Setup drag and drop sempre, mas s√≥ funciona no modo kanban\n        setupDragAndDrop(container, onTaskMove);\n    };\n\n    // Setup busca\n    setupSearch(container, (searchTerm) => {\n        currentSearchTerm = searchTerm;\n        renderAll();\n    });\n\n    // Setup toggle de visualiza√ß√£o\n    setupViewToggle(container, (newMode) => {\n        currentViewMode = newMode;\n        renderAll();\n    });\n\n    // Setup filtros\n    setupFilters(container, allTasks, (filteredTasks) => {\n        allTasks = filteredTasks;\n        renderAll();\n    });\n\n    // Setup arquivar\n    setupArquivar(container, tasks);\n\n    // Renderizar inicial\n    renderAll();\n\n    // Expor fun√ß√£o para atualizar tarefas externamente\n    container.updateTasks = (newTasks) => {\n        allTasks = newTasks;\n        renderAll();\n    };\n}\n\n/**\n * Renderiza tarefas no board ou lista\n * @param {Array} tasks - Lista de tarefas\n * @param {HTMLElement} container - Container do board\n * @param {string} viewMode - Modo de visualiza√ß√£o: 'kanban' ou 'list'\n */\nfunction renderTasks(tasks, container, viewMode = 'kanban') {\n    if (viewMode === 'list') {\n        renderListView(tasks, container);\n    } else {\n        renderKanbanView(tasks, container);\n    }\n}\n\n/**\n * Renderiza tarefas no modo Kanban\n */\nfunction renderKanbanView(tasks, container) {\n    const columnsView = container.querySelector('#kanban-columns-view');\n    const listView = container.querySelector('#kanban-list-view');\n\n    if (columnsView) columnsView.style.display = 'grid';\n    if (listView) listView.style.display = 'none';\n\n    // Limpar colunas\n    Object.values(KANBAN_COLUMNS).forEach(column => {\n        const columnBody = container.querySelector(`#column-${column.id}`);\n        if (columnBody) columnBody.innerHTML = '';\n    });\n\n    // Agrupar por coluna\n    const tasksByColumn = {\n        todo: [],\n        doing: [],\n        done: []\n    };\n\n    tasks.forEach(task => {\n        const column = task.status || 'todo';\n        if (tasksByColumn[column]) {\n            tasksByColumn[column].push(task);\n        }\n    });\n\n    // Renderizar em cada coluna\n    Object.entries(tasksByColumn).forEach(([columnId, columnTasks]) => {\n        const columnBody = container.querySelector(`#column-${columnId}`);\n        const countEl = container.querySelector(`#count-${columnId}`);\n\n        if (columnBody) {\n            columnTasks.forEach(task => {\n                const card = createTaskCard(task);\n                columnBody.appendChild(card);\n            });\n        }\n\n        if (countEl) {\n            countEl.textContent = columnTasks.length;\n        }\n    });\n}\n\n/**\n * Renderiza tarefas no modo Lista\n */\nfunction renderListView(tasks, container) {\n    const columnsView = container.querySelector('#kanban-columns-view');\n    const listView = container.querySelector('#kanban-list-view');\n\n    if (columnsView) columnsView.style.display = 'none';\n    if (listView) {\n        listView.style.display = 'block';\n        listView.innerHTML = '';\n\n        if (tasks.length === 0) {\n            listView.innerHTML = '<div class=\"kanban-empty-state\">Nenhuma tarefa encontrada</div>';\n            return;\n        }\n\n        // Agrupar por status\n        const tasksByStatus = {\n            todo: tasks.filter(t => (t.status || 'todo') === 'todo'),\n            doing: tasks.filter(t => (t.status || 'todo') === 'doing'),\n            done: tasks.filter(t => (t.status || 'todo') === 'done')\n        };\n\n        Object.entries(KANBAN_COLUMNS).forEach(([key, column]) => {\n            const statusTasks = tasksByStatus[column.id];\n            if (statusTasks.length > 0) {\n                const section = document.createElement('div');\n                section.className = 'kanban-list-section';\n                section.innerHTML = `\n                    <h3 class=\"kanban-list-section-title\">${column.title} (${statusTasks.length})</h3>\n                `;\n\n                const tasksContainer = document.createElement('div');\n                tasksContainer.className = 'kanban-list-tasks';\n\n                statusTasks.forEach(task => {\n                    const card = createTaskCard(task);\n                    card.classList.add('kanban-card-list');\n                    tasksContainer.appendChild(card);\n                });\n\n                section.appendChild(tasksContainer);\n                listView.appendChild(section);\n            }\n        });\n    }\n}\n\n/**\n * Filtra tarefas baseado no termo de busca\n */\nfunction filterTasks(tasks, searchTerm) {\n    if (!searchTerm || searchTerm.trim() === '') {\n        return tasks;\n    }\n\n    const term = searchTerm.toLowerCase().trim();\n    return tasks.filter(task => {\n        const titulo = (task.titulo || task.nome || '').toLowerCase();\n        const descricao = (task.descricao || '').toLowerCase();\n        const responsavel = (task.responsavel || '').toLowerCase();\n        const tags = (task.tags || []).join(' ').toLowerCase();\n\n        return titulo.includes(term) ||\n            descricao.includes(term) ||\n            responsavel.includes(term) ||\n            tags.includes(term);\n    });\n}\n\n/**\n * Configura busca\n */\nfunction setupSearch(container, onSearch) {\n    const searchInput = container.querySelector('#kanban-search');\n    if (!searchInput) return;\n\n    let searchTimeout;\n    searchInput.addEventListener('input', (e) => {\n        clearTimeout(searchTimeout);\n        searchTimeout = setTimeout(() => {\n            if (onSearch) onSearch(e.target.value);\n        }, 300); // Debounce de 300ms\n    });\n}\n\n/**\n * Configura toggle de visualiza√ß√£o\n */\nfunction setupViewToggle(container, onToggle) {\n    const toggleBtn = container.querySelector('#btnViewToggle');\n    const toggleIcon = container.querySelector('#viewToggleIcon');\n    if (!toggleBtn) return;\n\n    let currentMode = 'kanban';\n\n    toggleBtn.addEventListener('click', () => {\n        currentMode = currentMode === 'kanban' ? 'list' : 'kanban';\n        toggleIcon.textContent = currentMode === 'kanban' ? 'üìã' : 'üìù';\n        toggleBtn.title = currentMode === 'kanban' ? 'Ver como lista' : 'Ver como kanban';\n        if (onToggle) onToggle(currentMode);\n    });\n}\n\n/**\n * Configura event listeners dos cards\n */\nfunction setupCardEventListeners(container, onTaskClick) {\n    if (!onTaskClick) return;\n\n    container.querySelectorAll('.kanban-card').forEach(card => {\n        // Remover listeners anteriores\n        const newCard = card.cloneNode(true);\n        card.parentNode.replaceChild(newCard, card);\n\n        // Click no card (exceto bot√µes de a√ß√£o)\n        newCard.addEventListener('click', (e) => {\n            if (!e.target.closest('.kanban-card-actions') &&\n                !e.target.closest('.btn-icon-small')) {\n                onTaskClick(newCard.dataset.taskId);\n            }\n        });\n\n        // Click no bot√£o de editar\n        const editBtn = newCard.querySelector('[data-action=\"edit\"]');\n        if (editBtn) {\n            editBtn.addEventListener('click', (e) => {\n                e.stopPropagation();\n                onTaskClick(editBtn.dataset.taskId);\n            });\n        }\n    });\n}\n\n/**\n * Cria um card de tarefa melhorado com mais informa√ß√µes\n * @param {Object} task - Dados da tarefa\n */\nfunction createTaskCard(task) {\n    const card = document.createElement('div');\n    card.className = 'kanban-card';\n    card.draggable = true;\n    card.dataset.taskId = task.id || task.contador;\n    card.dataset.column = task.status || 'todo';\n\n    const tags = task.tags || [];\n    const bloqueado = tags.includes('bloqueado');\n    const prioridade = (task.prioridade || 'media').toLowerCase();\n\n    // Formata√ß√£o de datas\n    const formatDate = (dateStr) => {\n        if (!dateStr) return '';\n        try {\n            const date = new Date(dateStr);\n            const day = String(date.getDate()).padStart(2, '0');\n            const month = String(date.getMonth() + 1).padStart(2, '0');\n            return `${day}/${month}`;\n        } catch {\n            return '';\n        }\n    };\n\n    const createdAt = formatDate(task.createdAt || task.dataCriacao);\n    const completedAt = task.status === 'done' ? formatDate(task.dataConclusao || task.updatedAt) : '';\n\n    // Descri√ß√£o truncada (m√°x 100 caracteres)\n    const descricao = task.descricao || '';\n    const descricaoTruncada = descricao.length > 100 ?\n        descricao.substring(0, 100) + '...' :\n        descricao;\n\n    // Renderizar tags (exceto bloqueado que j√° tem badge especial)\n    const outrasTags = tags.filter(tag => tag !== 'bloqueado' && tag);\n\n    // Mapeamento de prioridade para classes e labels\n    const priorityMap = {\n        'urgente': {\n            label: 'Urgente',\n            class: 'priority-urgent'\n        },\n        'alta': {\n            label: 'Alta',\n            class: 'priority-high'\n        },\n        'media': {\n            label: 'M√©dia',\n            class: 'priority-medium'\n        },\n        'm√©dia': {\n            label: 'M√©dia',\n            class: 'priority-medium'\n        },\n        'baixa': {\n            label: 'Baixa',\n            class: 'priority-low'\n        }\n    };\n    const priorityInfo = priorityMap[prioridade] || priorityMap['media'];\n\n    card.innerHTML = `\n        <div class=\"kanban-card-header\">\n            <div class=\"kanban-card-title-wrapper\">\n                <h4 class=\"kanban-card-title\">${escapeHtml(task.titulo || task.nome || 'Sem t√≠tulo')}</h4>\n                ${bloqueado ? '<span class=\"kanban-tag tag-bloqueado\">üö´ Bloqueado</span>' : ''}\n            </div>\n            <div class=\"kanban-card-actions\">\n                <button class=\"btn-icon-small\" data-action=\"edit\" data-task-id=\"${task.id || task.contador}\" title=\"Editar\">‚úèÔ∏è</button>\n                <button class=\"btn-icon-small\" data-action=\"delete\" data-task-id=\"${task.id || task.contador}\" title=\"Excluir\">üóëÔ∏è</button>\n            </div>\n        </div>\n        ${descricaoTruncada ? `<p class=\"kanban-card-description\">${escapeHtml(descricaoTruncada)}</p>` : ''}\n        <div class=\"kanban-card-meta\">\n            ${task.responsavel ? `<span class=\"kanban-card-meta-item kanban-card-responsavel\">üë§ ${escapeHtml(task.responsavel)}</span>` : ''}\n            ${prioridade ? `<span class=\"kanban-card-prioridade ${priorityInfo.class}\">${priorityInfo.label}</span>` : ''}\n        </div>\n        ${outrasTags.length > 0 ? `\n            <div class=\"kanban-card-tags\">\n                ${outrasTags.map(tag => `<span class=\"kanban-tag\">${escapeHtml(tag)}</span>`).join('')}\n            </div>\n        ` : ''}\n        <div class=\"kanban-card-footer\">\n            ${createdAt ? `<span class=\"kanban-card-date\">üìÖ Criado: ${createdAt}</span>` : ''}\n            ${completedAt ? `<span class=\"kanban-card-date kanban-card-date-completed\">‚úÖ Conclu√≠do: ${completedAt}</span>` : ''}\n        </div>\n    `;\n\n    return card;\n}\n\n/**\n * Escapa HTML para prevenir XSS\n */\nfunction escapeHtml(text) {\n    const div = document.createElement('div');\n    div.textContent = text;\n    return div.innerHTML;\n}\n\n/**\n * Configura drag and drop\n */\nfunction setupDragAndDrop(container, onTaskMove) {\n    const cards = container.querySelectorAll('.kanban-card');\n    const columns = container.querySelectorAll('.kanban-column-body');\n\n    cards.forEach(card => {\n        card.addEventListener('dragstart', (e) => {\n            e.dataTransfer.setData('text/plain', card.dataset.taskId);\n            card.classList.add('dragging');\n        });\n\n        card.addEventListener('dragend', () => {\n            card.classList.remove('dragging');\n        });\n    });\n\n    columns.forEach(column => {\n        column.addEventListener('dragover', (e) => {\n            e.preventDefault();\n            column.classList.add('drag-over');\n        });\n\n        column.addEventListener('dragleave', () => {\n            column.classList.remove('drag-over');\n        });\n\n        column.addEventListener('drop', (e) => {\n            e.preventDefault();\n            column.classList.remove('drag-over');\n\n            const taskId = e.dataTransfer.getData('text/plain');\n            const newColumn = column.closest('.kanban-column').dataset.column;\n\n            if (onTaskMove) {\n                onTaskMove(taskId, newColumn);\n            }\n        });\n    });\n}\n\n/**\n * Configura filtros\n */\nfunction setupFilters(container, allTasks, onFilterChange) {\n    const filterSelect = container.querySelector('#filterResponsavel');\n    if (!filterSelect) return;\n\n    // Limpar op√ß√µes existentes (exceto \"Todos\")\n    const allOption = filterSelect.querySelector('option[value=\"\"]');\n    filterSelect.innerHTML = '';\n    if (allOption) {\n        filterSelect.appendChild(allOption);\n    }\n\n    const responsaveis = [...new Set(allTasks.map(t => t.responsavel).filter(Boolean))].sort();\n\n    responsaveis.forEach(resp => {\n        const option = document.createElement('option');\n        option.value = resp;\n        option.textContent = resp;\n        filterSelect.appendChild(option);\n    });\n\n    // Remover listeners anteriores\n    const newSelect = filterSelect.cloneNode(true);\n    filterSelect.parentNode.replaceChild(newSelect, filterSelect);\n\n    newSelect.addEventListener('change', (e) => {\n        const responsavel = e.target.value;\n        const filtered = responsavel ?\n            allTasks.filter(t => t.responsavel === responsavel) :\n            allTasks;\n        if (onFilterChange) onFilterChange(filtered);\n    });\n}\n\n/**\n * Configura fun√ß√£o de arquivar\n */\nfunction setupArquivar(container, tasks) {\n    const btnArquivar = container.querySelector('#btnArquivar');\n\n    btnArquivar.addEventListener('click', () => {\n        const thirtyDaysAgo = new Date();\n        thirtyDaysAgo.setDate(thirtyDaysAgo.getDate() - 30);\n\n        const tasksToArchive = tasks.filter(task => {\n            if (task.status !== 'done') return false;\n            const completedDate = new Date(task.dataConclusao || task.updatedAt);\n            return completedDate < thirtyDaysAgo;\n        });\n\n        if (tasksToArchive.length > 0) {\n            const confirmed = confirm(`Arquivar ${tasksToArchive.length} tarefas conclu√≠das h√° mais de 30 dias?`);\n            if (confirmed) {\n                // TODO: Implementar arquivamento\n                console.log('Arquivando:', tasksToArchive);\n            }\n        } else {\n            alert('Nenhuma tarefa para arquivar.');\n        }\n    });\n}\n\n/**\n * Migra dados do formato antigo para o novo\n * @param {Array} oldTasks - Tarefas no formato antigo\n */\nexport function migrateKanbanData(oldTasks) {\n    return oldTasks.map(task => {\n        const newTask = {\n            ...task\n        };\n\n        // Migrar status\n        if (STATUS_MIGRATION[task.status]) {\n            newTask.status = STATUS_MIGRATION[task.status];\n        }\n\n        // Se estava bloqueado, adicionar tag\n        if (task.status === 'Bloqueado' && !newTask.tags) {\n            newTask.tags = ['bloqueado'];\n        }\n\n        return newTask;\n    });\n}","/**\n * View Projetos\n * Gerencia projetos com Kanban 3 colunas\n */\n\nimport {\n    store\n} from '../store.js';\nimport {\n    createKanban3Columns,\n    migrateKanbanData,\n    KANBAN_COLUMNS\n} from '../utils/kanban-3-colunas.js';\nimport {\n    toast\n} from '../components/Toast.js';\nimport {\n    taskEditModal\n} from '../components/TaskEditModal.js';\nimport {\n    confirmAction\n} from '../components/ConfirmModal.js';\n\nclass ProjetosView {\n    constructor() {\n        this.unsubscribe = null;\n        this.kanbanInstance = null;\n    }\n\n    render() {\n        return `\n      <div class=\"projetos-view\">\n        <div id=\"projetos-kanban-container\"></div>\n      </div>\n    `;\n    }\n\n    mount() {\n        const container = document.getElementById('projetos-kanban-container');\n        if (!container) return;\n\n        // Escutar mudan√ßas no store\n        this.unsubscribe = store.subscribe(() => {\n            this.update();\n        });\n\n        // Carregar tarefas e renderizar\n        this.update();\n    }\n\n    update() {\n        const state = store.getState();\n        let tasks = state.tarefas || [];\n\n        // Migrar dados se necess√°rio\n        tasks = migrateKanbanData(tasks);\n\n        // Filtrar tarefas arquivadas\n        tasks = tasks.filter(t => !t.arquivado);\n\n        // Arquivar tarefas > 30 dias em \"Feito\" automaticamente ao renderizar\n        this.archiveOldTasks(tasks);\n\n        // Renderizar kanban\n        const container = document.getElementById('projetos-kanban-container');\n        if (container) {\n            createKanban3Columns({\n                container,\n                tasks,\n                onTaskMove: (taskId, newColumn) => {\n                    this.handleTaskMove(taskId, newColumn);\n                },\n                onTaskClick: (taskId) => {\n                    this.handleTaskEdit(taskId);\n                }\n            });\n\n            // Configurar arquivamento ap√≥s renderizar\n            this.setupArquivar(container, tasks);\n            \n            // Configurar bot√£o de adicionar\n            this.setupAddButton(container);\n            \n            // Configurar bot√µes de a√ß√£o nos cards\n            this.setupCardActions(container);\n        }\n    }\n\n    handleTaskMove(taskId, newColumn) {\n        const state = store.getState();\n        const task = state.tarefas.find(t => (t.id || t.contador) == taskId);\n\n        if (!task) return;\n\n        // Atualizar status\n        store.updateItem('tarefas', (t) => (t.id || t.contador) == taskId, {\n            status: newColumn,\n            updatedAt: new Date().toISOString(),\n            dataConclusao: newColumn === 'done' ? new Date().toISOString() : task.dataConclusao\n        });\n\n        toast.success(`Tarefa movida para \"${KANBAN_COLUMNS[newColumn.toUpperCase()]?.title || newColumn}\"`);\n    }\n\n    handleTaskEdit(taskId) {\n        const state = store.getState();\n        const task = state.tarefas.find(t => (t.id || t.contador) == taskId);\n\n        if (!task) {\n            toast.error('Tarefa n√£o encontrada');\n            return;\n        }\n\n        taskEditModal.open(task, (originalTask, updates) => {\n            // Atualizar tarefa no store\n            store.updateItem('tarefas', (t) => (t.id || t.contador) == (originalTask.id || originalTask.contador), updates);\n            \n            toast.success('Tarefa atualizada com sucesso');\n            \n            // Atualizar visualiza√ß√£o\n            this.update();\n        });\n    }\n\n    handleTaskAdd() {\n        const state = store.getState();\n        const newId = (state.contador || 0) + 1;\n        \n        const newTask = {\n            id: newId,\n            contador: newId,\n            titulo: 'Nova Tarefa',\n            descricao: '',\n            status: 'todo',\n            prioridade: 'media',\n            tags: [],\n            responsavel: '',\n            createdAt: new Date().toISOString(),\n            updatedAt: new Date().toISOString()\n        };\n\n        // Abrir modal para editar a nova tarefa\n        taskEditModal.open(newTask, (originalTask, updates) => {\n            // Adicionar tarefa ao store\n            const finalTask = {\n                ...newTask,\n                ...updates\n            };\n            store.addItem('tarefas', finalTask);\n            store.setState({ contador: newId });\n            \n            toast.success('Tarefa criada com sucesso');\n            \n            // Atualizar visualiza√ß√£o\n            this.update();\n        });\n    }\n\n    async handleTaskDelete(taskId) {\n        const state = store.getState();\n        const task = state.tarefas.find(t => (t.id || t.contador) == taskId);\n\n        if (!task) {\n            toast.error('Tarefa n√£o encontrada');\n            return;\n        }\n\n        const taskTitle = task.titulo || task.nome || 'Tarefa';\n        const confirmed = await confirmAction(`Tem certeza que deseja excluir \"${taskTitle}\"?`);\n        \n        if (confirmed) {\n            store.removeItem('tarefas', (t) => (t.id || t.contador) == taskId);\n            toast.success('Tarefa exclu√≠da com sucesso');\n            this.update();\n        }\n    }\n\n    setupAddButton(container) {\n        const btnAdd = container.querySelector('#btnAddTask');\n        if (btnAdd) {\n            // Remover listeners anteriores\n            const newBtn = btnAdd.cloneNode(true);\n            btnAdd.parentNode.replaceChild(newBtn, btnAdd);\n            \n            newBtn.addEventListener('click', () => {\n                this.handleTaskAdd();\n            });\n        }\n    }\n\n    setupCardActions(container) {\n        // Event delegation para bot√µes de a√ß√£o nos cards\n        container.addEventListener('click', (e) => {\n            const actionBtn = e.target.closest('[data-action]');\n            if (!actionBtn) return;\n\n            const action = actionBtn.getAttribute('data-action');\n            const taskId = actionBtn.getAttribute('data-task-id');\n\n            if (action === 'edit' && taskId) {\n                this.handleTaskEdit(taskId);\n            } else if (action === 'delete' && taskId) {\n                this.handleTaskDelete(taskId);\n            }\n        });\n    }\n\n\n    setupArquivar(container, tasks) {\n        const btnArquivar = container.querySelector('#btnArquivar');\n        if (!btnArquivar) return;\n\n        // Remover listeners anteriores\n        const newBtn = btnArquivar.cloneNode(true);\n        btnArquivar.parentNode.replaceChild(newBtn, btnArquivar);\n\n        newBtn.addEventListener('click', () => {\n            this.archiveOldTasks(tasks, true);\n        });\n    }\n\n    archiveOldTasks(tasks, showConfirmation = false) {\n        const thirtyDaysAgo = new Date();\n        thirtyDaysAgo.setDate(thirtyDaysAgo.getDate() - 30);\n\n        const tasksToArchive = tasks.filter(task => {\n            if (task.status !== 'done') return false;\n            const completedDate = task.dataConclusao || task.updatedAt || task.createdAt;\n            if (!completedDate) return false;\n\n            const date = new Date(completedDate);\n            return date < thirtyDaysAgo;\n        });\n\n        if (tasksToArchive.length === 0) {\n            if (showConfirmation) {\n                toast.info('Nenhuma tarefa para arquivar');\n            }\n            return;\n        }\n\n        const performArchive = () => {\n            tasksToArchive.forEach(task => {\n                store.updateItem('tarefas', (t) => (t.id || t.contador) == (task.id || task.contador), {\n                    arquivado: true,\n                    arquivadoEm: new Date().toISOString()\n                });\n            });\n\n            toast.success(`${tasksToArchive.length} tarefa(s) arquivada(s)`);\n            this.update();\n        };\n\n        if (showConfirmation) {\n            confirmAction(`Arquivar ${tasksToArchive.length} tarefas conclu√≠das h√° mais de 30 dias?`).then((confirmed) => {\n                if (confirmed) {\n                    performArchive();\n                }\n            });\n        } else {\n            // Arquivo silencioso na renderiza√ß√£o inicial\n            performArchive();\n        }\n    }\n\n    destroy() {\n        if (this.unsubscribe) {\n            this.unsubscribe();\n        }\n    }\n}\n\n/**\n * Fun√ß√£o de renderiza√ß√£o para o router\n */\nfunction renderProjetos() {\n    const view = new ProjetosView();\n\n    return {\n        render: () => view.render(),\n        mount: () => {\n            setTimeout(() => {\n                view.mount();\n            }, 0);\n            return view;\n        },\n    };\n}\n\nexport default renderProjetos;"],"names":["KANBAN_COLUMNS","STATUS_MIGRATION","createKanban3Columns","config","container","tasks","onTaskMove","onTaskClick","currentSearchTerm","currentViewMode","allTasks","renderAll","filteredTasks","filterTasks","renderTasks","setupCardEventListeners","setupDragAndDrop","setupSearch","searchTerm","setupViewToggle","newMode","setupFilters","setupArquivar","newTasks","viewMode","renderListView","renderKanbanView","columnsView","listView","column","columnBody","tasksByColumn","task","columnId","columnTasks","countEl","card","createTaskCard","tasksByStatus","t","key","statusTasks","section","tasksContainer","term","titulo","descricao","responsavel","tags","onSearch","searchInput","searchTimeout","e","onToggle","toggleBtn","toggleIcon","currentMode","newCard","editBtn","bloqueado","prioridade","formatDate","dateStr","date","day","month","createdAt","completedAt","descricaoTruncada","outrasTags","tag","priorityMap","priorityInfo","escapeHtml","text","div","cards","columns","taskId","newColumn","onFilterChange","filterSelect","allOption","resp","option","newSelect","filtered","thirtyDaysAgo","tasksToArchive","migrateKanbanData","oldTasks","newTask","ProjetosView","store","toast","_a","taskEditModal","originalTask","updates","newId","finalTask","taskTitle","confirmAction","btnAdd","newBtn","actionBtn","action","btnArquivar","showConfirmation","completedDate","performArchive","confirmed","renderProjetos","view"],"mappings":"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"}