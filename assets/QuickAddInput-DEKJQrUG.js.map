{"version":3,"file":"QuickAddInput-DEKJQrUG.js","sources":["../../src/components/estudos/QuickAddInput.js"],"sourcesContent":["/**\n * TASK-013: Input Universal com Autocomplete\n * \n * Campo de entrada inteligente com sugest√µes de √°reas e tags\n * Suporta shortcuts (Ctrl+N) e hist√≥rico de comandos\n */\n\nimport {\n    firebaseCache\n} from '../../services/firebase-cache.js';\n\nclass QuickAddInput {\n    constructor(options = {}) {\n        this.container = options.container || document.body;\n        this.onSubmit = options.onSubmit || (() => {});\n        this.parser = options.parser || new QuickAddParser();\n        this.areas = options.areas || [];\n        this.tags = options.tags || [];\n        this.history = []; // Inicializar vazio, carregar assincronamente\n\n        this.currentSuggestionIndex = -1;\n        this.suggestions = [];\n\n        this._createInput();\n        this._attachEvents();\n\n        // Carregar hist√≥rico assincronamente\n        this._loadHistory().then(history => {\n            this.history = history;\n        }).catch(err => {\n            console.warn('Erro ao carregar hist√≥rico:', err);\n        });\n    }\n\n    /**\n     * Cria o elemento de input\n     */\n    _createInput() {\n        this.wrapper = document.createElement('div');\n        this.wrapper.className = 'quick-add-wrapper';\n        this.wrapper.innerHTML = `\n            <div class=\"quick-add-container\">\n                <input \n                    type=\"text\" \n                    class=\"quick-add-input\" \n                    id=\"quickAddInput\"\n                    placeholder=\"Digite para criar... Ex: Python @udemy #urgente :2h !alta\"\n                    autocomplete=\"off\"\n                />\n                <div class=\"quick-add-suggestions\" id=\"quickAddSuggestions\"></div>\n                <div class=\"quick-add-preview\" id=\"quickAddPreview\"></div>\n            </div>\n        `;\n\n        this.container.appendChild(this.wrapper);\n        this.input = this.wrapper.querySelector('#quickAddInput');\n        this.suggestionsEl = this.wrapper.querySelector('#quickAddSuggestions');\n        this.previewEl = this.wrapper.querySelector('#quickAddPreview');\n    }\n\n    /**\n     * Anexa event listeners\n     */\n    _attachEvents() {\n        // Input events\n        this.input.addEventListener('input', (e) => this._handleInput(e));\n        this.input.addEventListener('keydown', (e) => this._handleKeyDown(e));\n        this.input.addEventListener('focus', () => this._handleFocus());\n        this.input.addEventListener('blur', () => {\n            // Delay para permitir click em sugest√µes\n            setTimeout(() => this._hideSuggestions(), 200);\n        });\n\n        // Shortcut global Ctrl+N\n        this.shortcutHandler = (e) => {\n            if ((e.ctrlKey || e.metaKey) && e.key === 'n') {\n                e.preventDefault();\n                this.focus();\n            }\n        };\n        document.addEventListener('keydown', this.shortcutHandler);\n\n        // Click fora para fechar\n        this.clickHandler = (e) => {\n            if (!this.wrapper.contains(e.target)) {\n                this._hideSuggestions();\n            }\n        };\n        document.addEventListener('click', this.clickHandler);\n    }\n\n    /**\n     * Handler de input\n     */\n    _handleInput(e) {\n        const value = e.target.value;\n\n        if (!value) {\n            this._hideSuggestions();\n            this._hidePreview();\n            return;\n        }\n\n        // Parse do input\n        const parsed = this.parser.parse(value);\n\n        // Mostrar preview\n        this._showPreview(parsed);\n\n        // Mostrar sugest√µes baseadas no cursor\n        this._updateSuggestions(value);\n    }\n\n    /**\n     * Handler de teclas\n     */\n    _handleKeyDown(e) {\n        // Enter: submit\n        if (e.key === 'Enter' && !e.shiftKey) {\n            e.preventDefault();\n            this._submit();\n            return;\n        }\n\n        // Escape: limpar\n        if (e.key === 'Escape') {\n            this.clear();\n            this._hideSuggestions();\n            return;\n        }\n\n        // Arrow keys: navegar sugest√µes\n        if (e.key === 'ArrowDown') {\n            e.preventDefault();\n            this._navigateSuggestions(1);\n            return;\n        }\n\n        if (e.key === 'ArrowUp') {\n            e.preventDefault();\n            this._navigateSuggestions(-1);\n            return;\n        }\n\n        // Tab: completar sugest√£o\n        if (e.key === 'Tab' && this.currentSuggestionIndex >= 0) {\n            e.preventDefault();\n            this._selectSuggestion(this.currentSuggestionIndex);\n            return;\n        }\n    }\n\n    /**\n     * Handler de focus\n     */\n    _handleFocus() {\n        const value = this.input.value;\n        if (value) {\n            this._updateSuggestions(value);\n        }\n    }\n\n    /**\n     * Atualiza sugest√µes baseado no input\n     */\n    _updateSuggestions(value) {\n        const cursorPos = this.input.selectionStart;\n        const textBeforeCursor = value.substring(0, cursorPos);\n\n        // Detectar contexto (@ para √°reas, # para tags)\n        if (textBeforeCursor.endsWith('@')) {\n            this.suggestions = this._getAreaSuggestions('');\n            this._showSuggestions();\n            return;\n        }\n\n        const areaMatch = textBeforeCursor.match(/@(\\w*)$/);\n        if (areaMatch) {\n            const areaPrefix = areaMatch[1].toLowerCase();\n            this.suggestions = this._getAreaSuggestions(areaPrefix);\n            this._showSuggestions();\n            return;\n        }\n\n        if (textBeforeCursor.endsWith('#')) {\n            this.suggestions = this._getTagSuggestions('');\n            this._showSuggestions();\n            return;\n        }\n\n        const tagMatch = textBeforeCursor.match(/#(\\w*)$/);\n        if (tagMatch) {\n            const tagPrefix = tagMatch[1].toLowerCase();\n            this.suggestions = this._getTagSuggestions(tagPrefix);\n            this._showSuggestions();\n            return;\n        }\n\n        // Sugest√µes de hist√≥rico\n        if (value.length > 0) {\n            this.suggestions = this._getHistorySuggestions(value);\n            if (this.suggestions.length > 0) {\n                this._showSuggestions();\n                return;\n            }\n        }\n\n        this._hideSuggestions();\n    }\n\n    /**\n     * Obt√©m sugest√µes de √°reas\n     */\n    _getAreaSuggestions(prefix) {\n        const filtered = this.areas\n            .filter(area =>\n                area.nome.toLowerCase().startsWith(prefix) &&\n                area.status === 'ativo'\n            )\n            .slice(0, 5)\n            .map(area => ({\n                type: 'area',\n                value: `@${area.nome}`,\n                display: `üìö ${area.nome}`,\n                data: area\n            }));\n\n        // Adicionar op√ß√£o de criar nova √°rea\n        if (prefix && !this.areas.some(a => a.nome.toLowerCase() === prefix)) {\n            filtered.push({\n                type: 'new-area',\n                value: `@${prefix}`,\n                display: `‚ûï Criar √°rea \"${prefix}\"`,\n                data: {\n                    nome: prefix\n                }\n            });\n        }\n\n        return filtered;\n    }\n\n    /**\n     * Obt√©m sugest√µes de tags\n     */\n    _getTagSuggestions(prefix) {\n        // Tags existentes de t√≥picos\n        const existingTags = [...new Set(this.tags)]\n            .filter(tag => tag.toLowerCase().startsWith(prefix))\n            .slice(0, 5)\n            .map(tag => ({\n                type: 'tag',\n                value: `#${tag}`,\n                display: `üè∑Ô∏è ${tag}`,\n                data: tag\n            }));\n\n        // Tags comuns\n        const commonTags = ['urgente', 'importante', 'revis√£o', 'pr√°tica', 'teoria'];\n        const common = commonTags\n            .filter(tag =>\n                tag.toLowerCase().startsWith(prefix) &&\n                !this.tags.some(t => t.toLowerCase() === tag.toLowerCase())\n            )\n            .slice(0, 3)\n            .map(tag => ({\n                type: 'tag',\n                value: `#${tag}`,\n                display: `üè∑Ô∏è ${tag}`,\n                data: tag\n            }));\n\n        return [...existingTags, ...common];\n    }\n\n    /**\n     * Obt√©m sugest√µes do hist√≥rico\n     */\n    _getHistorySuggestions(prefix) {\n        return this.history\n            .filter(item => item.toLowerCase().includes(prefix.toLowerCase()))\n            .slice(0, 3)\n            .map(item => ({\n                type: 'history',\n                value: item,\n                display: `üïê ${item}`,\n                data: item\n            }));\n    }\n\n    /**\n     * Mostra sugest√µes\n     */\n    _showSuggestions() {\n        if (this.suggestions.length === 0) {\n            this._hideSuggestions();\n            return;\n        }\n\n        this.suggestionsEl.innerHTML = this.suggestions\n            .map((sug, index) => `\n                <div \n                    class=\"quick-add-suggestion ${index === this.currentSuggestionIndex ? 'active' : ''}\"\n                    data-index=\"${index}\"\n                >\n                    ${sug.display}\n                </div>\n            `)\n            .join('');\n\n        // Anexar eventos de click\n        this.suggestionsEl.querySelectorAll('.quick-add-suggestion').forEach((item, index) => {\n            item.addEventListener('click', () => this._selectSuggestion(index));\n        });\n\n        this.suggestionsEl.style.display = 'block';\n        this.currentSuggestionIndex = -1;\n    }\n\n    /**\n     * Esconde sugest√µes\n     */\n    _hideSuggestions() {\n        this.suggestionsEl.style.display = 'none';\n        this.currentSuggestionIndex = -1;\n    }\n\n    /**\n     * Navega entre sugest√µes\n     */\n    _navigateSuggestions(direction) {\n        if (this.suggestions.length === 0) return;\n\n        this.currentSuggestionIndex += direction;\n\n        if (this.currentSuggestionIndex < 0) {\n            this.currentSuggestionIndex = this.suggestions.length - 1;\n        } else if (this.currentSuggestionIndex >= this.suggestions.length) {\n            this.currentSuggestionIndex = 0;\n        }\n\n        // Atualizar visual\n        const items = this.suggestionsEl.querySelectorAll('.quick-add-suggestion');\n        items.forEach((item, index) => {\n            item.classList.toggle('active', index === this.currentSuggestionIndex);\n        });\n\n        // Scroll para item ativo\n        const activeItem = items[this.currentSuggestionIndex];\n        if (activeItem) {\n            activeItem.scrollIntoView({\n                block: 'nearest'\n            });\n        }\n    }\n\n    /**\n     * Seleciona uma sugest√£o\n     */\n    _selectSuggestion(index) {\n        if (index < 0 || index >= this.suggestions.length) return;\n\n        const suggestion = this.suggestions[index];\n        const currentValue = this.input.value;\n        const cursorPos = this.input.selectionStart;\n\n        // Encontrar onde inserir\n        const textBefore = currentValue.substring(0, cursorPos);\n        let insertPos = cursorPos;\n\n        if (textBefore.endsWith('@') || textBefore.match(/@\\w*$/)) {\n            const match = textBefore.match(/@\\w*$/);\n            if (match) {\n                insertPos = cursorPos - match[0].length;\n            }\n        } else if (textBefore.endsWith('#') || textBefore.match(/#\\w*$/)) {\n            const match = textBefore.match(/#\\w*$/);\n            if (match) {\n                insertPos = cursorPos - match[0].length;\n            }\n        }\n\n        // Inserir sugest√£o\n        const newValue =\n            currentValue.substring(0, insertPos) +\n            suggestion.value + ' ' +\n            currentValue.substring(cursorPos);\n\n        this.input.value = newValue;\n        this.input.focus();\n        this.input.setSelectionRange(\n            insertPos + suggestion.value.length + 1,\n            insertPos + suggestion.value.length + 1\n        );\n\n        this._hideSuggestions();\n        this._handleInput({\n            target: this.input\n        });\n    }\n\n    /**\n     * Mostra preview\n     */\n    _showPreview(parsed) {\n        if (!parsed.isValid) {\n            this._hidePreview();\n            return;\n        }\n\n        const preview = this.parser.generatePreview(parsed);\n        this.previewEl.innerHTML = preview;\n        this.previewEl.style.display = 'block';\n    }\n\n    /**\n     * Esconde preview\n     */\n    _hidePreview() {\n        this.previewEl.style.display = 'none';\n    }\n\n    /**\n     * Submete o formul√°rio\n     */\n    _submit() {\n        const value = this.input.value.trim();\n        if (!value) return;\n\n        const parsed = this.parser.parse(value);\n\n        if (!parsed.isValid) {\n            this._showError('T√≠tulo inv√°lido');\n            return;\n        }\n\n        // Salvar no hist√≥rico\n        this._saveToHistory(value);\n\n        // Limpar input\n        this.clear();\n\n        // Callback\n        this.onSubmit(parsed);\n    }\n\n    /**\n     * Salva no hist√≥rico\n     */\n    async _saveToHistory(value) {\n        // Remove se j√° existe\n        this.history = this.history.filter(h => h !== value);\n\n        // Adiciona no in√≠cio\n        this.history.unshift(value);\n\n        // Limita a 10 itens\n        this.history = this.history.slice(0, 10);\n\n        // Salva no Firebase Cache\n        try {\n            await firebaseCache.set('quickAddHistory', this.history);\n        } catch (e) {\n            console.warn('N√£o foi poss√≠vel salvar hist√≥rico', e);\n        }\n    }\n\n    /**\n     * Carrega hist√≥rico\n     */\n    async _loadHistory() {\n        try {\n            // Tentar carregar do cache\n            let history = await firebaseCache.get('quickAddHistory');\n\n            // Fallback para localStorage (migra√ß√£o)\n            if (!history) {\n                try {\n                    const stored = localStorage.getItem('quickAddHistory');\n                    if (stored) {\n                        history = JSON.parse(stored);\n                        // Migrar para cache\n                        await firebaseCache.set('quickAddHistory', history);\n                    }\n                } catch (e) {\n                    // Ignorar erros\n                }\n            }\n\n            return history || [];\n        } catch (e) {\n            // Tentar fallback s√≠ncrono do localStorage\n            try {\n                const stored = localStorage.getItem('quickAddHistory');\n                return stored ? JSON.parse(stored) : [];\n            } catch (e2) {\n                return [];\n            }\n        }\n    }\n\n    /**\n     * Mostra erro\n     */\n    _showError(message) {\n        // Implementar toast ou feedback visual\n        console.warn(message);\n    }\n\n    /**\n     * Limpa o input\n     */\n    clear() {\n        this.input.value = '';\n        this._hideSuggestions();\n        this._hidePreview();\n    }\n\n    /**\n     * Foca no input\n     */\n    focus() {\n        this.input.focus();\n    }\n\n    /**\n     * Atualiza √°reas e tags\n     */\n    updateData(areas, tags) {\n        this.areas = areas || [];\n        this.tags = tags || [];\n    }\n\n    /**\n     * Destr√≥i o componente\n     */\n    destroy() {\n        if (this.shortcutHandler) {\n            document.removeEventListener('keydown', this.shortcutHandler);\n        }\n        if (this.clickHandler) {\n            document.removeEventListener('click', this.clickHandler);\n        }\n        if (this.wrapper && this.wrapper.parentNode) {\n            this.wrapper.parentNode.removeChild(this.wrapper);\n        }\n    }\n}\n\n// Export ES6\nexport {\n    QuickAddInput\n};\nexport default QuickAddInput;\n\n// Export para uso global (compatibilidade)\nif (typeof module !== 'undefined' && module.exports) {\n    module.exports = QuickAddInput;\n}"],"names":["QuickAddInput","options","history","err","e","value","parsed","cursorPos","textBeforeCursor","areaMatch","areaPrefix","tagMatch","tagPrefix","prefix","filtered","area","a","existingTags","tag","common","t","item","sug","index","direction","items","activeItem","suggestion","currentValue","textBefore","insertPos","match","newValue","preview","h","firebaseCache","stored","message","areas","tags"],"mappings":"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"}