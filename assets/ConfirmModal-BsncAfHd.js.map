{"version":3,"file":"ConfirmModal-BsncAfHd.js","sources":["../../src/components/ConfirmModal.js"],"sourcesContent":["/**\n * Modal de Confirmação Customizado\n * Substitui o confirm() nativo do navegador por um modal mais confiável\n */\n\nexport class ConfirmModal {\n    constructor() {\n        this.modal = null;\n        this.resolve = null;\n        this.init();\n    }\n\n    init() {\n        // Criar modal se não existir\n        if (document.getElementById('confirm-modal')) {\n            this.modal = document.getElementById('confirm-modal');\n        } else {\n            this.modal = document.createElement('div');\n            this.modal.id = 'confirm-modal';\n            this.modal.className = 'confirm-modal';\n            this.modal.style.display = 'none';\n            document.body.appendChild(this.modal);\n        }\n\n        this.render();\n        this.setupEventListeners();\n    }\n\n    render() {\n        // Só renderizar se o conteúdo não existir\n        if (!this.modal.querySelector('.confirm-modal-content')) {\n            this.modal.innerHTML = `\n                <div class=\"confirm-modal-overlay\"></div>\n                <div class=\"confirm-modal-content\">\n                    <div class=\"confirm-modal-header\">\n                        <h3 class=\"confirm-modal-title\">Confirmar ação</h3>\n                    </div>\n                    <div class=\"confirm-modal-body\">\n                        <p class=\"confirm-modal-message\" id=\"confirm-message\"></p>\n                    </div>\n                    <div class=\"confirm-modal-footer\">\n                        <button class=\"btn btn-secondary\" id=\"confirm-cancel\">Cancelar</button>\n                        <button class=\"btn btn-primary\" id=\"confirm-ok\">OK</button>\n                    </div>\n                </div>\n            `;\n        }\n    }\n\n    setupEventListeners() {\n        // Remover listeners anteriores se existirem\n        if (this._clickHandler) {\n            this.modal.removeEventListener('click', this._clickHandler);\n        }\n        if (this._keyDownHandler) {\n            document.removeEventListener('keydown', this._keyDownHandler);\n        }\n\n        const close = (result) => {\n            this.modal.style.display = 'none';\n            if (this.resolve) {\n                this.resolve(result);\n                this.resolve = null;\n            }\n        };\n\n        // Usar event delegation no modal\n        this._clickHandler = (e) => {\n            const target = e.target;\n\n            // Clicar no overlay\n            if (target.classList.contains('confirm-modal-overlay')) {\n                close(false);\n                return;\n            }\n\n            // Clicar no botão Cancelar\n            if (target.id === 'confirm-cancel' || target.closest('#confirm-cancel')) {\n                e.preventDefault();\n                e.stopPropagation();\n                close(false);\n                return;\n            }\n\n            // Clicar no botão OK\n            if (target.id === 'confirm-ok' || target.closest('#confirm-ok')) {\n                e.preventDefault();\n                e.stopPropagation();\n                close(true);\n                return;\n            }\n        };\n\n        this.modal.addEventListener('click', this._clickHandler);\n\n        // Fechar com ESC\n        this._keyDownHandler = (e) => {\n            if (e.key === 'Escape' && this.modal.style.display !== 'none') {\n                close(false);\n            }\n        };\n        document.addEventListener('keydown', this._keyDownHandler);\n    }\n\n    /**\n     * Mostra o modal de confirmação\n     * @param {string} message - Mensagem a ser exibida\n     * @returns {Promise<boolean>} - Promise que resolve com true se confirmado, false se cancelado\n     */\n    show(message) {\n        const messageEl = this.modal.querySelector('#confirm-message');\n        if (messageEl) {\n            messageEl.textContent = message;\n        }\n\n        this.modal.style.display = 'flex';\n\n        return new Promise((resolve) => {\n            this.resolve = resolve;\n        });\n    }\n}\n\n// Singleton\nexport const confirmModal = new ConfirmModal();\n\n/**\n * Função helper para usar como substituição do confirm()\n * @param {string} message - Mensagem de confirmação\n * @returns {Promise<boolean>}\n */\nexport async function confirmAction(message) {\n    return await confirmModal.show(message);\n}"],"names":["ConfirmModal","close","result","target","message","messageEl","resolve","confirmModal","confirmAction"],"mappings":"AAKO,MAAMA,CAAa,CACtB,aAAc,CACV,KAAK,MAAQ,KACb,KAAK,QAAU,KACf,KAAK,KAAI,CACb,CAEA,MAAO,CAEC,SAAS,eAAe,eAAe,EACvC,KAAK,MAAQ,SAAS,eAAe,eAAe,GAEpD,KAAK,MAAQ,SAAS,cAAc,KAAK,EACzC,KAAK,MAAM,GAAK,gBAChB,KAAK,MAAM,UAAY,gBACvB,KAAK,MAAM,MAAM,QAAU,OAC3B,SAAS,KAAK,YAAY,KAAK,KAAK,GAGxC,KAAK,OAAM,EACX,KAAK,oBAAmB,CAC5B,CAEA,QAAS,CAEA,KAAK,MAAM,cAAc,wBAAwB,IAClD,KAAK,MAAM,UAAY;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,cAgB/B,CAEA,qBAAsB,CAEd,KAAK,eACL,KAAK,MAAM,oBAAoB,QAAS,KAAK,aAAa,EAE1D,KAAK,iBACL,SAAS,oBAAoB,UAAW,KAAK,eAAe,EAGhE,MAAMC,EAASC,GAAW,CACtB,KAAK,MAAM,MAAM,QAAU,OACvB,KAAK,UACL,KAAK,QAAQA,CAAM,EACnB,KAAK,QAAU,KAEvB,EAGA,KAAK,cAAiB,GAAM,CACxB,MAAMC,EAAS,EAAE,OAGjB,GAAIA,EAAO,UAAU,SAAS,uBAAuB,EAAG,CACpDF,EAAM,EAAK,EACX,MACJ,CAGA,GAAIE,EAAO,KAAO,kBAAoBA,EAAO,QAAQ,iBAAiB,EAAG,CACrE,EAAE,eAAc,EAChB,EAAE,gBAAe,EACjBF,EAAM,EAAK,EACX,MACJ,CAGA,GAAIE,EAAO,KAAO,cAAgBA,EAAO,QAAQ,aAAa,EAAG,CAC7D,EAAE,eAAc,EAChB,EAAE,gBAAe,EACjBF,EAAM,EAAI,EACV,MACJ,CACJ,EAEA,KAAK,MAAM,iBAAiB,QAAS,KAAK,aAAa,EAGvD,KAAK,gBAAmB,GAAM,CACtB,EAAE,MAAQ,UAAY,KAAK,MAAM,MAAM,UAAY,QACnDA,EAAM,EAAK,CAEnB,EACA,SAAS,iBAAiB,UAAW,KAAK,eAAe,CAC7D,CAOA,KAAKG,EAAS,CACV,MAAMC,EAAY,KAAK,MAAM,cAAc,kBAAkB,EAC7D,OAAIA,IACAA,EAAU,YAAcD,GAG5B,KAAK,MAAM,MAAM,QAAU,OAEpB,IAAI,QAASE,GAAY,CAC5B,KAAK,QAAUA,CACnB,CAAC,CACL,CACJ,CAGY,MAACC,EAAe,IAAIP,EAOzB,eAAeQ,EAAcJ,EAAS,CACzC,OAAO,MAAMG,EAAa,KAAKH,CAAO,CAC1C"}