{"version":3,"file":"Home-CXNE3pWg.js","sources":["../../src/utils/homeHelpers.js","../../src/views/Home.js"],"sourcesContent":["/**\n * Utilit√°rios para a view Home\n * Fun√ß√µes auxiliares para performance, valida√ß√£o e l√≥gica de neg√≥cio\n */\n\n/**\n * Debounce - adia a execu√ß√£o de uma fun√ß√£o\n * @param {Function} func - Fun√ß√£o a ser executada\n * @param {number} wait - Tempo de espera em ms\n * @returns {Function} Fun√ß√£o com debounce\n */\nexport function debounce(func, wait) {\n    let timeout;\n    return function executedFunction(...args) {\n        const later = () => {\n            clearTimeout(timeout);\n            func(...args);\n        };\n        clearTimeout(timeout);\n        timeout = setTimeout(later, wait);\n    };\n}\n\n/**\n * Throttle - limita a execu√ß√£o de uma fun√ß√£o\n * @param {Function} func - Fun√ß√£o a ser executada\n * @param {number} limit - Intervalo m√≠nimo em ms\n * @returns {Function} Fun√ß√£o com throttle\n */\nexport function throttle(func, limit) {\n    let inThrottle;\n    return function executedFunction(...args) {\n        if (!inThrottle) {\n            func.apply(this, args);\n            inThrottle = true;\n            setTimeout(() => inThrottle = false, limit);\n        }\n    };\n}\n\n/**\n * Memoiza√ß√£o simples baseada em argumentos\n * @param {Function} fn - Fun√ß√£o a ser memoizada\n * @returns {Function} Fun√ß√£o memoizada\n */\nexport function memoize(fn) {\n    const cache = new Map();\n    return function memoizedFunction(...args) {\n        const key = JSON.stringify(args);\n        if (cache.has(key)) {\n            return cache.get(key);\n        }\n        const result = fn.apply(this, args);\n        cache.set(key, result);\n        return result;\n    };\n}\n\n/**\n * Valida dados do store\n * @param {*} data - Dados a validar\n * @param {string} type - Tipo esperado ('array', 'object', 'number')\n * @returns {boolean} True se v√°lido\n */\nexport function validateStoreData(data, type = 'array') {\n    if (type === 'array') {\n        return Array.isArray(data);\n    }\n    if (type === 'object') {\n        return data !== null && typeof data === 'object' && !Array.isArray(data);\n    }\n    if (type === 'number') {\n        return typeof data === 'number' && !isNaN(data);\n    }\n    return data != null;\n}\n\n/**\n * Sanitiza string para prevenir XSS\n * @param {string} str - String a sanitizar\n * @returns {string} String sanitizada\n */\nexport function escapeHtml(str) {\n    if (typeof str !== 'string') return '';\n    const div = document.createElement('div');\n    div.textContent = str;\n    return div.innerHTML;\n}\n\n/**\n * Compara dois arrays de tarefas para detectar mudan√ßas\n * @param {Array} oldTasks - Array antigo\n * @param {Array} newTasks - Array novo\n * @returns {Object} Objeto com informa√ß√µes sobre mudan√ßas\n */\nexport function compareTaskArrays(oldTasks, newTasks) {\n    if (!Array.isArray(oldTasks) || !Array.isArray(newTasks)) {\n        return { changed: true, added: [], removed: [], modified: [] };\n    }\n\n    const oldIds = new Set(oldTasks.map(t => String(t?.id || t?.contador || '')));\n    const newIds = new Set(newTasks.map(t => String(t?.id || t?.contador || '')));\n\n    const added = newTasks.filter(t => {\n        const id = String(t?.id || t?.contador || '');\n        return !oldIds.has(id);\n    });\n\n    const removed = oldTasks.filter(t => {\n        const id = String(t?.id || t?.contador || '');\n        return !newIds.has(id);\n    });\n\n    const modified = newTasks.filter(newTask => {\n        const id = String(newTask?.id || newTask?.contador || '');\n        if (!oldIds.has(id)) return false;\n        const oldTask = oldTasks.find(t => String(t?.id || t?.contador || '') === id);\n        return oldTask && JSON.stringify(oldTask) !== JSON.stringify(newTask);\n    });\n\n    return {\n        changed: added.length > 0 || removed.length > 0 || modified.length > 0,\n        added,\n        removed,\n        modified\n    };\n}\n\n/**\n * Gera um hash simples de um objeto\n * @param {*} obj - Objeto a hashear\n * @returns {string} Hash do objeto\n */\nexport function hashObject(obj) {\n    return JSON.stringify(obj);\n}\n\n","/**\n * View Home - Dashboard Principal\n * Timeline \"AGORA\" e se√ß√µes do dashboard\n * \n * @module HomeView\n */\n\nimport {\n    store\n} from '../store.js';\nimport {\n    getUpcomingTasks,\n    getOverdueTasks,\n    getTasksCompletedToday,\n    getTotalTasksToday,\n    getCompletedTasks,\n    getPostponedTasks\n} from '../utils/taskFilters.js';\nimport {\n    TaskCard\n} from '../components/TaskCard.js';\nimport {\n    formatTime,\n    toDate,\n    getTodayISO\n} from '../utils/dateUtils.js';\nimport {\n    toast\n} from '../components/Toast.js';\nimport {\n    setupSwipeGestures,\n    createCompleteTaskHandler,\n    createPostponeTaskHandler\n} from '../utils/swipe-gestures.js';\nimport {\n    taskEditModal\n} from '../components/TaskEditModal.js';\nimport {\n    confirmAction\n} from '../components/ConfirmModal.js';\nimport {\n    debounce,\n    throttle,\n    memoize,\n    validateStoreData,\n    escapeHtml,\n    compareTaskArrays\n} from '../utils/homeHelpers.js';\n\n// Constantes\nconst UPDATE_INTERVAL = 60000; // 1 minuto em milissegundos\nconst COLLAPSE_THRESHOLD = 5; // N√∫mero de tarefas antes de colapsar\nconst ANIMATION_DELAY = 100; // Delay para anima√ß√µes em milissegundos\nconst DEFAULT_TASK_DELAY_HOURS = 1; // Horas padr√£o para nova tarefa\nconst UPCOMING_TASKS_HOURS = 2; // Horas para buscar tarefas pr√≥ximas\nconst DEBOUNCE_DELAY = 300; // Delay para debounce em ms\nconst THROTTLE_DELAY = 1000; // Delay para throttle em ms\n\n/**\n * Classe principal da view Home\n * Gerencia o dashboard com timeline, tarefas atrasadas e m√©tricas\n */\nclass HomeView {\n    /**\n     * Construtor da classe HomeView\n     */\n    constructor() {\n        this.updateInterval = null;\n        this.unsubscribe = null;\n        this.eventListeners = [];\n        this.swipeGestureCleanups = [];\n        this.isLoading = false;\n        this.lastRenderData = null;\n        this.currentFilter = {\n            search: '',\n            priority: 'all',\n            module: 'all',\n            sortBy: 'time' // time, priority, module, createdAt\n        };\n        this.swipeGestureMap = new Map(); // Mapa para reutilizar gestures\n\n        // Memoizar fun√ß√µes de filtro\n        this.memoizedGetUpcomingTasks = memoize((tasks, hours) => {\n            return getUpcomingTasks(tasks, hours);\n        });\n        this.memoizedGetOverdueTasks = memoize((tasks) => {\n            return getOverdueTasks(tasks);\n        });\n    }\n\n    // ============================================================================\n    // M√âTODOS P√öBLICOS PRINCIPAIS\n    // ============================================================================\n\n    /**\n     * Renderiza o HTML principal da view\n     * @returns {string} HTML da view\n     */\n    render() {\n        try {\n            // Mostrar loading state se necess√°rio\n            if (this.isLoading && !this.lastRenderData) {\n                return this.renderLoadingState();\n            }\n\n            const state = store.getState();\n\n            // Validar dados do store\n            if (!validateStoreData(state.tarefasHome, 'array')) {\n                console.warn('Dados inv√°lidos do store, usando array vazio');\n                return this.renderErrorState('Erro ao carregar dados');\n            }\n\n            const homeTasks = state.tarefasHome || [];\n\n            // Aplicar filtros\n            const filteredTasks = this.applyFilters(homeTasks);\n            const upcomingTasks = this.memoizedGetUpcomingTasks(\n                this.filterUpcomingTasks(filteredTasks),\n                UPCOMING_TASKS_HOURS\n            );\n            const overdueTasks = this.memoizedGetOverdueTasks(\n                this.filterOverdueTasks(filteredTasks)\n            );\n            const completedTasks = getCompletedTasks(filteredTasks);\n            const postponedTasks = getPostponedTasks(filteredTasks);\n            const completedToday = getTasksCompletedToday(homeTasks);\n            const totalToday = getTotalTasksToday(homeTasks);\n\n            // Aplicar ordena√ß√£o\n            const sortedUpcomingTasks = this.sortTasks(upcomingTasks, this.currentFilter.sortBy);\n\n            // Identificar tarefa atual (pr√≥xima a acontecer)\n            const now = new Date();\n            const currentTask = sortedUpcomingTasks.find((task) => {\n                const taskTime = toDate(task.time);\n                return taskTime && taskTime <= now;\n            });\n\n            // Salvar dados para renderiza√ß√£o incremental\n            const renderData = {\n                upcomingTasks: sortedUpcomingTasks,\n                overdueTasks,\n                completedTasks,\n                postponedTasks,\n                completedToday: completedToday.length,\n                totalToday,\n                streak: state.streak || 0,\n                currentTask\n            };\n            this.lastRenderData = renderData;\n\n            return `\n                <div class=\"home-view\" role=\"main\" aria-label=\"Dashboard principal\">\n                    ${this.renderFiltersSection()}\n                    ${this.renderUpcomingSection(sortedUpcomingTasks, currentTask)}\n                    ${this.renderOverdueSection(overdueTasks)}\n                    ${this.renderMetricsSection(completedToday.length, totalToday, state.streak || 0)}\n                    ${this.renderCompletedSection(completedTasks)}\n                    ${this.renderPostponedSection(postponedTasks)}\n                </div>\n            `;\n        } catch (error) {\n            return this.handleRenderError(error);\n        }\n    }\n\n    /**\n     * Inicializa a view e configura listeners\n     */\n    mount() {\n        try {\n            this.isLoading = true;\n\n            // Atualizar a cada 1 minuto com throttle\n            this.updateInterval = setInterval(() => {\n                this.throttledUpdate();\n            }, UPDATE_INTERVAL);\n\n            // Escutar mudan√ßas no store com debounce\n            this.unsubscribe = store.subscribe(() => {\n                this.debouncedUpdate();\n            });\n\n            // Configurar event listeners\n            this.setupEventListeners();\n\n            this.isLoading = false;\n        } catch (error) {\n            this.handleError('Erro ao montar HomeView', error);\n        }\n    }\n\n    /**\n     * Atualiza a visualiza√ß√£o com renderiza√ß√£o incremental\n     */\n    update() {\n        try {\n            const container = document.getElementById('app');\n            if (!container) {\n                return;\n            }\n\n            const state = store.getState();\n            if (!validateStoreData(state.tarefasHome, 'array')) {\n                return;\n            }\n\n            const homeTasks = state.tarefasHome || [];\n            const filteredTasks = this.applyFilters(homeTasks);\n            const upcomingTasks = this.memoizedGetUpcomingTasks(\n                this.filterUpcomingTasks(filteredTasks),\n                UPCOMING_TASKS_HOURS\n            );\n            const overdueTasks = this.memoizedGetOverdueTasks(\n                this.filterOverdueTasks(filteredTasks)\n            );\n            const completedTasks = getCompletedTasks(filteredTasks);\n            const postponedTasks = getPostponedTasks(filteredTasks);\n            const completedToday = getTasksCompletedToday(homeTasks);\n            const totalToday = getTotalTasksToday(homeTasks);\n            const sortedUpcomingTasks = this.sortTasks(upcomingTasks, this.currentFilter.sortBy);\n\n            const now = new Date();\n            const currentTask = sortedUpcomingTasks.find((task) => {\n                const taskTime = toDate(task.time);\n                return taskTime && taskTime <= now;\n            });\n\n            const newRenderData = {\n                upcomingTasks: sortedUpcomingTasks,\n                overdueTasks,\n                completedTasks,\n                postponedTasks,\n                completedToday: completedToday.length,\n                totalToday,\n                streak: state.streak || 0,\n                currentTask\n            };\n\n            // Renderiza√ß√£o incremental\n            if (this.lastRenderData) {\n                this.updateIncremental(newRenderData);\n            } else {\n                container.innerHTML = this.render();\n                this.setupEventListeners();\n            }\n\n            this.lastRenderData = newRenderData;\n        } catch (error) {\n            this.handleError('Erro ao atualizar view', error);\n        }\n    }\n\n    /**\n     * Atualiza√ß√£o incremental do DOM\n     * @param {Object} newData - Novos dados de renderiza√ß√£o\n     * @private\n     */\n    updateIncremental(newData) {\n        const oldData = this.lastRenderData;\n        if (!oldData) {\n            document.getElementById('app').innerHTML = this.render();\n            this.setupEventListeners();\n            return;\n        }\n\n        // Atualizar timeline incrementalmente\n        const timelineChanges = compareTaskArrays(oldData.upcomingTasks, newData.upcomingTasks);\n        if (timelineChanges.changed) {\n            this.updateTimelineSection(newData.upcomingTasks, newData.currentTask);\n        }\n\n        // Atualizar se√ß√£o de atrasadas\n        const overdueChanges = compareTaskArrays(oldData.overdueTasks, newData.overdueTasks);\n        if (overdueChanges.changed) {\n            this.updateOverdueSection(newData.overdueTasks);\n        }\n\n        // Atualizar m√©tricas\n        if (oldData.completedToday !== newData.completedToday ||\n            oldData.totalToday !== newData.totalToday ||\n            oldData.streak !== newData.streak) {\n            this.updateMetricsSection(newData.completedToday, newData.totalToday, newData.streak);\n        }\n\n        // Atualizar se√ß√£o de conclu√≠das\n        const completedChanges = compareTaskArrays(oldData.completedTasks || [], newData.completedTasks || []);\n        if (completedChanges.changed) {\n            this.updateCompletedSection(newData.completedTasks || []);\n        }\n\n        // Atualizar se√ß√£o de adiadas\n        const postponedChanges = compareTaskArrays(oldData.postponedTasks || [], newData.postponedTasks || []);\n        if (postponedChanges.changed) {\n            this.updatePostponedSection(newData.postponedTasks || []);\n        }\n    }\n\n    /**\n     * Atualiza apenas a se√ß√£o de timeline\n     * @param {Array} tasks - Lista de tarefas\n     * @param {Object} currentTask - Tarefa atual\n     * @private\n     */\n    updateTimelineSection(tasks, currentTask) {\n        const timelineContainer = document.getElementById('home-timeline');\n        if (!timelineContainer) return;\n\n        if (tasks.length > 0) {\n            timelineContainer.innerHTML = this.renderTimeline(tasks, currentTask);\n        } else {\n            timelineContainer.innerHTML = this.renderEmptyState('Nenhuma tarefa nas pr√≥ximas 2 horas', true);\n        }\n        this.setupSwipeGestures();\n    }\n\n    /**\n     * Atualiza apenas a se√ß√£o de atrasadas\n     * @param {Array} tasks - Lista de tarefas atrasadas\n     * @private\n     */\n    updateOverdueSection(tasks) {\n        const section = document.getElementById('home-section-overdue');\n        if (!section) {\n            // Se√ß√£o n√£o existe, renderizar tudo\n            const container = document.getElementById('app');\n            if (container) {\n                container.innerHTML = this.render();\n                this.setupEventListeners();\n            }\n            return;\n        }\n\n        if (tasks.length === 0) {\n            section.remove();\n            return;\n        }\n\n        const shouldCollapse = tasks.length > COLLAPSE_THRESHOLD;\n        const displayTasks = shouldCollapse ? tasks.slice(0, COLLAPSE_THRESHOLD) : tasks;\n        const list = document.getElementById('home-overdue-list');\n\n        if (list) {\n            const overdueItems = displayTasks\n                .filter(task => task != null)\n                .map(task => {\n                    const taskCard = new TaskCard(task, {\n                        showCheckbox: true,\n                        showModule: true,\n                        showPriority: true,\n                        showDuration: false,\n                        isCurrent: false,\n                        isOverdue: true,\n                        showActions: true,\n                    });\n                    const taskId = this.getTaskId(task);\n                    return `<div class=\"overdue-item\" data-task-id=\"${taskId}\" role=\"listitem\">${taskCard.render().outerHTML}</div>`;\n                })\n                .join('');\n\n            list.innerHTML = overdueItems;\n\n            // Atualizar badge\n            const badge = section.querySelector('.home-section-badge');\n            if (badge) {\n                badge.textContent = tasks.length;\n            }\n\n            // Atualizar bot√£o \"Ver todas\"\n            const existingBtn = document.getElementById('btn-show-all-overdue');\n            if (shouldCollapse && !existingBtn) {\n                const showAllButton = document.createElement('button');\n                showAllButton.className = 'btn btn-secondary mt-md';\n                showAllButton.id = 'btn-show-all-overdue';\n                showAllButton.textContent = `Ver todas (${tasks.length})`;\n                showAllButton.setAttribute('aria-label', `Ver todas as ${tasks.length} tarefas atrasadas`);\n                showAllButton.addEventListener('click', () => this.showAllOverdue());\n                this.registerEventListener('click', () => this.showAllOverdue(), showAllButton);\n                section.appendChild(showAllButton);\n            } else if (!shouldCollapse && existingBtn) {\n                existingBtn.remove();\n            }\n        }\n\n        this.setupSwipeGestures();\n    }\n\n    /**\n     * Atualiza apenas a se√ß√£o de m√©tricas\n     * @param {number} completed - Tarefas conclu√≠das\n     * @param {number} total - Total de tarefas\n     * @param {number} streak - Dias de streak\n     * @private\n     */\n    updateMetricsSection(completed, total, streak) {\n        const section = document.getElementById('home-section-metrics');\n        if (!section) return;\n\n        const percentage = total > 0 ? Math.round((completed / total) * 100) : 0;\n\n        const completedValue = section.querySelector('.home-metrics-item:first-child .home-metrics-value');\n        if (completedValue) {\n            completedValue.textContent = `${completed}/${total}`;\n        }\n\n        const streakValue = section.querySelector('.home-metrics-item:last-child .home-metrics-value');\n        if (streakValue) {\n            streakValue.textContent = `üî• ${streak} dias`;\n        }\n\n        const progressBar = section.querySelector('.home-metrics-progress-bar');\n        const progressText = section.querySelector('.home-metrics-progress-text');\n        if (progressBar) {\n            progressBar.style.width = `${percentage}%`;\n            progressBar.setAttribute('aria-valuenow', percentage);\n            progressBar.setAttribute('aria-label', `${percentage}% das tarefas conclu√≠das`);\n        }\n        if (progressText) {\n            progressText.textContent = `${percentage}%`;\n        }\n    }\n\n    /**\n     * Atualiza apenas a se√ß√£o de tarefas conclu√≠das\n     * @param {Array} tasks - Lista de tarefas conclu√≠das\n     * @private\n     */\n    updateCompletedSection(tasks) {\n        const section = document.getElementById('home-section-completed');\n        if (!section) {\n            // Se√ß√£o n√£o existe, renderizar tudo\n            const container = document.getElementById('app');\n            if (container) {\n                container.innerHTML = this.render();\n                this.setupEventListeners();\n            }\n            return;\n        }\n\n        if (tasks.length === 0) {\n            section.remove();\n            return;\n        }\n\n        const shouldCollapse = tasks.length > COLLAPSE_THRESHOLD;\n        const displayTasks = shouldCollapse ? tasks.slice(0, COLLAPSE_THRESHOLD) : tasks;\n        const list = document.getElementById('home-completed-list');\n\n        if (list) {\n            const completedItems = displayTasks\n                .filter(task => task != null)\n                .map(task => {\n                    const taskCard = new TaskCard(task, {\n                        showCheckbox: true,\n                        showModule: true,\n                        showPriority: true,\n                        showDuration: false,\n                        isCurrent: false,\n                        isOverdue: false,\n                        showActions: true,\n                        isCompleted: true,\n                    });\n                    const taskId = this.getTaskId(task);\n                    return `<div class=\"completed-item\" data-task-id=\"${taskId}\" role=\"listitem\" tabindex=\"0\" aria-label=\"Tarefa conclu√≠da: ${escapeHtml(task.titulo || task.nome || 'Sem t√≠tulo')}\">${taskCard.render().outerHTML}</div>`;\n                })\n                .join('');\n\n            list.innerHTML = completedItems;\n\n            // Atualizar badge\n            const badge = section.querySelector('.home-section-badge');\n            if (badge) {\n                badge.textContent = tasks.length;\n            }\n\n            // Atualizar bot√£o \"Ver todas\"\n            const existingBtn = document.getElementById('btn-show-all-completed');\n            if (shouldCollapse && !existingBtn) {\n                const showAllButton = document.createElement('button');\n                showAllButton.className = 'btn btn-secondary mt-md';\n                showAllButton.id = 'btn-show-all-completed';\n                showAllButton.textContent = `Ver todas (${tasks.length})`;\n                showAllButton.setAttribute('aria-label', `Ver todas as ${tasks.length} tarefas conclu√≠das`);\n                showAllButton.addEventListener('click', () => this.showAllCompleted());\n                this.registerEventListener('click', () => this.showAllCompleted(), showAllButton);\n                section.appendChild(showAllButton);\n            } else if (!shouldCollapse && existingBtn) {\n                existingBtn.remove();\n            }\n        }\n\n        this.setupSwipeGestures();\n    }\n\n    /**\n     * Atualiza apenas a se√ß√£o de tarefas adiadas\n     * @param {Array} tasks - Lista de tarefas adiadas\n     * @private\n     */\n    updatePostponedSection(tasks) {\n        const section = document.getElementById('home-section-postponed');\n        if (!section) {\n            // Se√ß√£o n√£o existe, renderizar tudo\n            const container = document.getElementById('app');\n            if (container) {\n                container.innerHTML = this.render();\n                this.setupEventListeners();\n            }\n            return;\n        }\n\n        if (tasks.length === 0) {\n            section.remove();\n            return;\n        }\n\n        const shouldCollapse = tasks.length > COLLAPSE_THRESHOLD;\n        const displayTasks = shouldCollapse ? tasks.slice(0, COLLAPSE_THRESHOLD) : tasks;\n        const list = document.getElementById('home-postponed-list');\n\n        if (list) {\n            const postponedItems = displayTasks\n                .filter(task => task != null)\n                .map(task => {\n                    const taskCard = new TaskCard(task, {\n                        showCheckbox: true,\n                        showModule: true,\n                        showPriority: true,\n                        showDuration: true,\n                        isCurrent: false,\n                        isOverdue: false,\n                        showActions: true,\n                    });\n                    const taskId = this.getTaskId(task);\n                    return `<div class=\"postponed-item\" data-task-id=\"${taskId}\" role=\"listitem\" tabindex=\"0\" aria-label=\"Tarefa adiada: ${escapeHtml(task.titulo || task.nome || 'Sem t√≠tulo')}\">${taskCard.render().outerHTML}</div>`;\n                })\n                .join('');\n\n            list.innerHTML = postponedItems;\n\n            // Atualizar badge\n            const badge = section.querySelector('.home-section-badge');\n            if (badge) {\n                badge.textContent = tasks.length;\n            }\n\n            // Atualizar bot√£o \"Ver todas\"\n            const existingBtn = document.getElementById('btn-show-all-postponed');\n            if (shouldCollapse && !existingBtn) {\n                const showAllButton = document.createElement('button');\n                showAllButton.className = 'btn btn-secondary mt-md';\n                showAllButton.id = 'btn-show-all-postponed';\n                showAllButton.textContent = `Ver todas (${tasks.length})`;\n                showAllButton.setAttribute('aria-label', `Ver todas as ${tasks.length} tarefas adiadas`);\n                showAllButton.addEventListener('click', () => this.showAllPostponed());\n                this.registerEventListener('click', () => this.showAllPostponed(), showAllButton);\n                section.appendChild(showAllButton);\n            } else if (!shouldCollapse && existingBtn) {\n                existingBtn.remove();\n            }\n        }\n\n        this.setupSwipeGestures();\n    }\n\n    /**\n     * Limpa recursos e remove listeners\n     */\n    destroy() {\n        try {\n            // Limpar interval\n            if (this.updateInterval) {\n                clearInterval(this.updateInterval);\n                this.updateInterval = null;\n            }\n\n            // Limpar subscription\n            if (this.unsubscribe) {\n                this.unsubscribe();\n                this.unsubscribe = null;\n            }\n\n            // Limpar event listeners\n            this.cleanupEventListeners();\n\n            // Limpar swipe gestures\n            this.cleanupSwipeGestures();\n\n            // Limpar memoiza√ß√£o\n            this.lastRenderData = null;\n            this.swipeGestureMap.clear();\n        } catch (error) {\n            this.handleError('Erro ao destruir HomeView', error);\n        }\n    }\n\n    // ============================================================================\n    // M√âTODOS DE RENDERIZA√á√ÉO\n    // ============================================================================\n\n    /**\n     * Renderiza estado de loading\n     * @returns {string} HTML do loading\n     * @private\n     */\n    renderLoadingState() {\n        return `\n            <div class=\"home-view\" role=\"main\" aria-label=\"Carregando dashboard\">\n                <div class=\"home-loading\" role=\"status\" aria-live=\"polite\" aria-label=\"Carregando\">\n                    <div class=\"home-skeleton\">\n                        <div class=\"home-skeleton-header\"></div>\n                        <div class=\"home-skeleton-item\"></div>\n                        <div class=\"home-skeleton-item\"></div>\n                        <div class=\"home-skeleton-item\"></div>\n                    </div>\n                </div>\n            </div>\n        `;\n    }\n\n    /**\n     * Renderiza estado de erro\n     * @param {string} message - Mensagem de erro\n     * @returns {string} HTML do erro\n     * @private\n     */\n    renderErrorState(message) {\n        return `\n            <div class=\"home-view\" role=\"main\">\n                <div class=\"home-error-state\" role=\"alert\">\n                    <p class=\"home-error-message\">${escapeHtml(message)}</p>\n                    <button class=\"btn btn-primary\" id=\"btn-retry-home\" aria-label=\"Tentar novamente\">\n                        Tentar novamente\n                    </button>\n                </div>\n            </div>\n        `;\n    }\n\n    /**\n     * Renderiza se√ß√£o de filtros e busca\n     * @returns {string} HTML dos filtros\n     * @private\n     */\n    renderFiltersSection() {\n        return `\n            <section class=\"home-filters\" role=\"search\" aria-label=\"Filtros e busca de tarefas\">\n                <div class=\"home-filters-row\">\n                    <div class=\"home-search-wrapper\">\n                        <input \n                            type=\"search\" \n                            id=\"home-search-input\" \n                            class=\"home-search-input\" \n                            placeholder=\"Buscar tarefas...\"\n                            aria-label=\"Buscar tarefas\"\n                            value=\"${escapeHtml(this.currentFilter.search)}\"\n                        />\n                        <span class=\"home-search-icon\" aria-hidden=\"true\">üîç</span>\n                    </div>\n                    <div class=\"home-filters-group\">\n                        <label for=\"home-filter-priority\" class=\"home-filter-label\">Prioridade:</label>\n                        <select \n                            id=\"home-filter-priority\" \n                            class=\"home-filter-select\"\n                            aria-label=\"Filtrar por prioridade\"\n                        >\n                            <option value=\"all\" ${this.currentFilter.priority === 'all' ? 'selected' : ''}>Todas</option>\n                            <option value=\"urgente\" ${this.currentFilter.priority === 'urgente' ? 'selected' : ''}>Urgente</option>\n                            <option value=\"alta\" ${this.currentFilter.priority === 'alta' ? 'selected' : ''}>Alta</option>\n                            <option value=\"media\" ${this.currentFilter.priority === 'media' ? 'selected' : ''}>M√©dia</option>\n                            <option value=\"baixa\" ${this.currentFilter.priority === 'baixa' ? 'selected' : ''}>Baixa</option>\n                        </select>\n                    </div>\n                    <div class=\"home-filters-group\">\n                        <label for=\"home-filter-sort\" class=\"home-filter-label\">Ordenar:</label>\n                        <select \n                            id=\"home-filter-sort\" \n                            class=\"home-filter-select\"\n                            aria-label=\"Ordenar tarefas\"\n                        >\n                            <option value=\"time\" ${this.currentFilter.sortBy === 'time' ? 'selected' : ''}>Por hor√°rio</option>\n                            <option value=\"priority\" ${this.currentFilter.sortBy === 'priority' ? 'selected' : ''}>Por prioridade</option>\n                            <option value=\"module\" ${this.currentFilter.sortBy === 'module' ? 'selected' : ''}>Por m√≥dulo</option>\n                            <option value=\"createdAt\" ${this.currentFilter.sortBy === 'createdAt' ? 'selected' : ''}>Por data de cria√ß√£o</option>\n                        </select>\n                    </div>\n                </div>\n            </section>\n        `;\n    }\n\n    /**\n     * Renderiza a se√ß√£o de tarefas pr√≥ximas\n     * @param {Array} upcomingTasks - Lista de tarefas pr√≥ximas\n     * @param {Object} currentTask - Tarefa atual em execu√ß√£o\n     * @returns {string} HTML da se√ß√£o\n     * @private\n     */\n    renderUpcomingSection(upcomingTasks, currentTask) {\n        return `\n            <section class=\"home-section home-section-now\" aria-labelledby=\"upcoming-tasks-title\">\n                <div class=\"home-section-header\">\n                    <h2 id=\"upcoming-tasks-title\" class=\"home-section-title\">‚è∞ Pr√≥ximas 2 horas</h2>\n                    <div style=\"display: flex; align-items: center; gap: var(--spacing-md);\">\n                        <span class=\"home-section-badge\" aria-label=\"${upcomingTasks.length} tarefas nas pr√≥ximas 2 horas\">${upcomingTasks.length}</span>\n                        <button \n                            class=\"btn btn-primary btn-icon\" \n                            id=\"btn-add-task-home\" \n                            title=\"Adicionar tarefa\"\n                            aria-label=\"Adicionar nova tarefa\"\n                        >\n                            <span aria-hidden=\"true\">‚ûï</span>\n                            <span class=\"btn-text\">Nova Tarefa</span>\n                        </button>\n                    </div>\n                </div>\n                <div class=\"home-timeline\" id=\"home-timeline\" role=\"list\" aria-label=\"Lista de tarefas pr√≥ximas\">\n                    ${upcomingTasks.length > 0 \n                        ? this.renderTimeline(upcomingTasks, currentTask) \n                        : this.renderEmptyState('Nenhuma tarefa nas pr√≥ximas 2 horas', true)\n                    }\n                </div>\n            </section>\n        `;\n    }\n\n    /**\n     * Renderiza a timeline de tarefas\n     * @param {Array} tasks - Lista de tarefas\n     * @param {Object} currentTask - Tarefa atual\n     * @returns {string} HTML da timeline\n     * @private\n     */\n    renderTimeline(tasks, currentTask) {\n        if (!Array.isArray(tasks)) {\n            return this.renderEmptyState('Erro ao carregar tarefas');\n        }\n\n        const timelineItems = tasks\n            .filter(task => task != null)\n            .map(task => {\n                const taskCard = new TaskCard(task, {\n                    showCheckbox: true,\n                    showModule: true,\n                    showPriority: true,\n                    showDuration: true,\n                    isCurrent: currentTask && this.getTaskId(currentTask) === this.getTaskId(task),\n                    isOverdue: false,\n                    showActions: true,\n                });\n                const taskId = this.getTaskId(task);\n                return `<div class=\"timeline-item\" data-task-id=\"${taskId}\" role=\"listitem\" tabindex=\"0\" aria-label=\"Tarefa: ${escapeHtml(task.titulo || task.nome || 'Sem t√≠tulo')}\">${taskCard.render().outerHTML}</div>`;\n            })\n            .join('');\n\n        return `<div class=\"timeline-list\">${timelineItems}</div>`;\n    }\n\n    /**\n     * Renderiza a se√ß√£o de tarefas atrasadas\n     * @param {Array} overdueTasks - Lista de tarefas atrasadas\n     * @returns {string} HTML da se√ß√£o\n     * @private\n     */\n    renderOverdueSection(overdueTasks) {\n        if (!Array.isArray(overdueTasks) || overdueTasks.length === 0) {\n            return '';\n        }\n\n        const shouldCollapse = overdueTasks.length > COLLAPSE_THRESHOLD;\n        const displayTasks = shouldCollapse ?\n            overdueTasks.slice(0, COLLAPSE_THRESHOLD) :\n            overdueTasks;\n\n        const overdueItems = displayTasks\n            .filter(task => task != null)\n            .map(task => {\n                const taskCard = new TaskCard(task, {\n                    showCheckbox: true,\n                    showModule: true,\n                    showPriority: true,\n                    showDuration: false,\n                    isCurrent: false,\n                    isOverdue: true,\n                    showActions: true,\n                });\n                const taskId = this.getTaskId(task);\n                return `<div class=\"overdue-item\" data-task-id=\"${taskId}\" role=\"listitem\" tabindex=\"0\" aria-label=\"Tarefa atrasada: ${escapeHtml(task.titulo || task.nome || 'Sem t√≠tulo')}\">${taskCard.render().outerHTML}</div>`;\n            })\n            .join('');\n\n        const showAllButton = shouldCollapse ?\n            `<button class=\"btn btn-secondary mt-md\" id=\"btn-show-all-overdue\" aria-label=\"Ver todas as ${overdueTasks.length} tarefas atrasadas\">Ver todas (${overdueTasks.length})</button>` :\n            '';\n\n        return `\n            <section class=\"home-section home-section-overdue\" id=\"home-section-overdue\" aria-labelledby=\"overdue-tasks-title\">\n                <div class=\"home-section-header\">\n                    <h2 id=\"overdue-tasks-title\" class=\"home-section-title\">‚ö†Ô∏è Atrasadas</h2>\n                    <span class=\"home-section-badge badge badge-danger\" aria-label=\"${overdueTasks.length} tarefas atrasadas\">${overdueTasks.length}</span>\n                </div>\n                <div class=\"home-overdue-list\" id=\"home-overdue-list\" role=\"list\" aria-label=\"Lista de tarefas atrasadas\">\n                    ${overdueItems}\n                </div>\n                ${showAllButton}\n            </section>\n        `;\n    }\n\n    /**\n     * Renderiza a se√ß√£o de m√©tricas do dashboard\n     * @param {number} completed - N√∫mero de tarefas conclu√≠das\n     * @param {number} total - Total de tarefas do dia\n     * @param {number} streak - Dias de streak\n     * @returns {string} HTML das m√©tricas\n     * @private\n     */\n    renderMetricsSection(completed, total, streak) {\n        const percentage = total > 0 ? Math.round((completed / total) * 100) : 0;\n\n        return `\n            <section class=\"home-section home-section-metrics\" id=\"home-section-metrics\" aria-labelledby=\"metrics-title\">\n                <h2 id=\"metrics-title\" class=\"sr-only\">M√©tricas do dia</h2>\n                <div class=\"home-metrics\" role=\"region\" aria-label=\"Estat√≠sticas do dia\">\n                    <div class=\"home-metrics-item\">\n                        <div class=\"home-metrics-label\">Conclu√≠das hoje</div>\n                        <div class=\"home-metrics-value\" aria-label=\"${completed} de ${total} tarefas conclu√≠das\">${completed}/${total}</div>\n                    </div>\n                    <div class=\"home-metrics-item\">\n                        <div class=\"home-metrics-label\">Streak</div>\n                        <div class=\"home-metrics-value\" aria-label=\"${streak} dias consecutivos\">üî• ${streak} dias</div>\n                    </div>\n                    <div class=\"home-metrics-progress\" role=\"progressbar\" aria-valuenow=\"${percentage}\" aria-valuemin=\"0\" aria-valuemax=\"100\" aria-label=\"Progresso: ${percentage}% das tarefas conclu√≠das\">\n                        <div class=\"home-metrics-progress-bar\" style=\"width: ${percentage}%\"></div>\n                        <span class=\"home-metrics-progress-text\">${percentage}%</span>\n                    </div>\n                </div>\n            </section>\n        `;\n    }\n\n    /**\n     * Renderiza a se√ß√£o de tarefas conclu√≠das\n     * @param {Array} completedTasks - Lista de tarefas conclu√≠das\n     * @returns {string} HTML da se√ß√£o\n     * @private\n     */\n    renderCompletedSection(completedTasks) {\n        if (!Array.isArray(completedTasks) || completedTasks.length === 0) {\n            return '';\n        }\n\n        const shouldCollapse = completedTasks.length > COLLAPSE_THRESHOLD;\n        const displayTasks = shouldCollapse ?\n            completedTasks.slice(0, COLLAPSE_THRESHOLD) :\n            completedTasks;\n\n        const completedItems = displayTasks\n            .filter(task => task != null)\n            .map(task => {\n                const taskCard = new TaskCard(task, {\n                    showCheckbox: true,\n                    showModule: true,\n                    showPriority: true,\n                    showDuration: false,\n                    isCurrent: false,\n                    isOverdue: false,\n                    showActions: true,\n                    isCompleted: true,\n                });\n                const taskId = this.getTaskId(task);\n                return `<div class=\"completed-item\" data-task-id=\"${taskId}\" role=\"listitem\" tabindex=\"0\" aria-label=\"Tarefa conclu√≠da: ${escapeHtml(task.titulo || task.nome || 'Sem t√≠tulo')}\">${taskCard.render().outerHTML}</div>`;\n            })\n            .join('');\n\n        const showAllButton = shouldCollapse ?\n            `<button class=\"btn btn-secondary mt-md\" id=\"btn-show-all-completed\" aria-label=\"Ver todas as ${completedTasks.length} tarefas conclu√≠das\">Ver todas (${completedTasks.length})</button>` :\n            '';\n\n        return `\n            <section class=\"home-section home-section-completed\" id=\"home-section-completed\" aria-labelledby=\"completed-tasks-title\">\n                <div class=\"home-section-header\">\n                    <h2 id=\"completed-tasks-title\" class=\"home-section-title\">‚úÖ Conclu√≠das</h2>\n                    <span class=\"home-section-badge badge badge-success\" aria-label=\"${completedTasks.length} tarefas conclu√≠das\">${completedTasks.length}</span>\n                </div>\n                <div class=\"home-completed-list\" id=\"home-completed-list\" role=\"list\" aria-label=\"Lista de tarefas conclu√≠das\">\n                    ${completedItems}\n                </div>\n                ${showAllButton}\n            </section>\n        `;\n    }\n\n    /**\n     * Renderiza a se√ß√£o de tarefas adiadas\n     * @param {Array} postponedTasks - Lista de tarefas adiadas\n     * @returns {string} HTML da se√ß√£o\n     * @private\n     */\n    renderPostponedSection(postponedTasks) {\n        if (!Array.isArray(postponedTasks) || postponedTasks.length === 0) {\n            return '';\n        }\n\n        const shouldCollapse = postponedTasks.length > COLLAPSE_THRESHOLD;\n        const displayTasks = shouldCollapse ?\n            postponedTasks.slice(0, COLLAPSE_THRESHOLD) :\n            postponedTasks;\n\n        const postponedItems = displayTasks\n            .filter(task => task != null)\n            .map(task => {\n                const taskCard = new TaskCard(task, {\n                    showCheckbox: true,\n                    showModule: true,\n                    showPriority: true,\n                    showDuration: true,\n                    isCurrent: false,\n                    isOverdue: false,\n                    showActions: true,\n                });\n                const taskId = this.getTaskId(task);\n                return `<div class=\"postponed-item\" data-task-id=\"${taskId}\" role=\"listitem\" tabindex=\"0\" aria-label=\"Tarefa adiada: ${escapeHtml(task.titulo || task.nome || 'Sem t√≠tulo')}\">${taskCard.render().outerHTML}</div>`;\n            })\n            .join('');\n\n        const showAllButton = shouldCollapse ?\n            `<button class=\"btn btn-secondary mt-md\" id=\"btn-show-all-postponed\" aria-label=\"Ver todas as ${postponedTasks.length} tarefas adiadas\">Ver todas (${postponedTasks.length})</button>` :\n            '';\n\n        return `\n            <section class=\"home-section home-section-postponed\" id=\"home-section-postponed\" aria-labelledby=\"postponed-tasks-title\">\n                <div class=\"home-section-header\">\n                    <h2 id=\"postponed-tasks-title\" class=\"home-section-title\">üìÖ Adiadas</h2>\n                    <span class=\"home-section-badge badge badge-info\" aria-label=\"${postponedTasks.length} tarefas adiadas\">${postponedTasks.length}</span>\n                </div>\n                <div class=\"home-postponed-list\" id=\"home-postponed-list\" role=\"list\" aria-label=\"Lista de tarefas adiadas\">\n                    ${postponedItems}\n                </div>\n                ${showAllButton}\n            </section>\n        `;\n    }\n\n    /**\n     * Renderiza estado vazio melhorado\n     * @param {string} message - Mensagem a exibir\n     * @param {boolean} showCTA - Mostrar call-to-action\n     * @returns {string} HTML do estado vazio\n     * @private\n     */\n    renderEmptyState(message, showCTA = false) {\n        const ctaButton = showCTA ? `\n            <button class=\"btn btn-primary mt-md\" id=\"btn-add-task-empty\" aria-label=\"Adicionar nova tarefa\">\n                ‚ûï Adicionar Tarefa\n            </button>\n        ` : '';\n\n        return `\n            <div class=\"home-empty-state\" role=\"status\" aria-live=\"polite\">\n                <div class=\"home-empty-state-icon\" aria-hidden=\"true\">üìã</div>\n                <p class=\"home-empty-state-text\">${escapeHtml(message)}</p>\n                ${ctaButton}\n            </div>\n        `;\n    }\n\n    // ============================================================================\n    // FILTROS E ORDENA√á√ÉO\n    // ============================================================================\n\n    /**\n     * Aplica filtros √†s tarefas\n     * @param {Array} tasks - Lista de tarefas\n     * @returns {Array} Tarefas filtradas\n     * @private\n     */\n    applyFilters(tasks) {\n        if (!Array.isArray(tasks)) return [];\n\n        let filtered = [...tasks];\n\n        // Filtro de busca\n        if (this.currentFilter.search) {\n            const searchLower = this.currentFilter.search.toLowerCase();\n            filtered = filtered.filter(task => {\n                const title = (task.titulo || task.nome || '').toLowerCase();\n                const desc = (task.descricao || '').toLowerCase();\n                const module = (task.modulo || task.area || '').toLowerCase();\n                return title.includes(searchLower) || desc.includes(searchLower) || module.includes(searchLower);\n            });\n        }\n\n        // Filtro de prioridade\n        if (this.currentFilter.priority !== 'all') {\n            filtered = filtered.filter(task => {\n                const priority = (task.prioridade || 'media').toLowerCase();\n                return priority === this.currentFilter.priority.toLowerCase();\n            });\n        }\n\n        return filtered;\n    }\n\n    /**\n     * Filtra apenas tarefas pr√≥ximas\n     * @param {Array} tasks - Lista de tarefas\n     * @returns {Array} Tarefas pr√≥ximas\n     * @private\n     */\n    filterUpcomingTasks(tasks) {\n        return tasks.filter(task => {\n            if (task.completed) return false;\n            const taskTime = toDate(task.time);\n            if (!taskTime) return false;\n            const now = new Date();\n            const limit = new Date(now.getTime() + UPCOMING_TASKS_HOURS * 60 * 60 * 1000);\n            return taskTime >= now && taskTime <= limit;\n        });\n    }\n\n    /**\n     * Filtra apenas tarefas atrasadas\n     * @param {Array} tasks - Lista de tarefas\n     * @returns {Array} Tarefas atrasadas\n     * @private\n     */\n    filterOverdueTasks(tasks) {\n        return tasks.filter(task => {\n            if (task.completed) return false;\n            const taskDate = toDate(task.time || task.deadline);\n            if (!taskDate) return false;\n            return taskDate < new Date();\n        });\n    }\n\n    /**\n     * Ordena tarefas\n     * @param {Array} tasks - Lista de tarefas\n     * @param {string} sortBy - Crit√©rio de ordena√ß√£o\n     * @returns {Array} Tarefas ordenadas\n     * @private\n     */\n    sortTasks(tasks, sortBy) {\n        if (!Array.isArray(tasks)) return [];\n\n        const sorted = [...tasks];\n\n        switch (sortBy) {\n            case 'priority':\n                const priorityOrder = {\n                    urgente: 4,\n                    alta: 3,\n                    media: 2,\n                    baixa: 1\n                };\n                return sorted.sort((a, b) => {\n                    const priorityA = priorityOrder[(a.prioridade || 'media').toLowerCase()] || 0;\n                    const priorityB = priorityOrder[(b.prioridade || 'media').toLowerCase()] || 0;\n                    return priorityB - priorityA;\n                });\n\n            case 'module':\n                return sorted.sort((a, b) => {\n                    const moduleA = (a.modulo || a.area || '').toLowerCase();\n                    const moduleB = (b.modulo || b.area || '').toLowerCase();\n                    return moduleA.localeCompare(moduleB);\n                });\n\n            case 'createdAt':\n                return sorted.sort((a, b) => {\n                    const dateA = toDate(a.createdAt) || new Date(0);\n                    const dateB = toDate(b.createdAt) || new Date(0);\n                    return dateB - dateA;\n                });\n\n            case 'time':\n            default:\n                return sorted.sort((a, b) => {\n                    const timeA = toDate(a.time) || new Date(0);\n                    const timeB = toDate(b.time) || new Date(0);\n                    return timeA - timeB;\n                });\n        }\n    }\n\n    // ============================================================================\n    // M√âTODOS DE EVENT HANDLERS\n    // ============================================================================\n\n    /**\n     * Configura todos os event listeners\n     * @private\n     */\n    setupEventListeners() {\n        // Limpar listeners anteriores\n        this.cleanupEventListeners();\n\n        // Criar vers√µes com debounce/throttle\n        this.debouncedUpdate = debounce(() => this.update(), DEBOUNCE_DELAY);\n        this.throttledUpdate = throttle(() => this.update(), THROTTLE_DELAY);\n\n        // Event delegation para checkboxes de conclus√£o\n        const checkboxHandler = (e) => {\n            if (e.target.classList.contains('task-checkbox')) {\n                const taskId = e.target.getAttribute('data-task-id');\n                if (taskId) {\n                    this.handleTaskComplete(taskId, e.target.checked);\n                }\n            }\n        };\n        document.addEventListener('change', checkboxHandler);\n        this.registerEventListener('change', checkboxHandler, document);\n\n        // Busca\n        const searchInput = document.getElementById('home-search-input');\n        if (searchInput) {\n            const searchHandler = debounce((e) => {\n                this.currentFilter.search = e.target.value;\n                this.update();\n            }, 300);\n            searchInput.addEventListener('input', searchHandler);\n            this.registerEventListener('input', searchHandler, searchInput);\n        }\n\n        // Filtro de prioridade\n        const priorityFilter = document.getElementById('home-filter-priority');\n        if (priorityFilter) {\n            const priorityHandler = (e) => {\n                this.currentFilter.priority = e.target.value;\n                this.update();\n            };\n            priorityFilter.addEventListener('change', priorityHandler);\n            this.registerEventListener('change', priorityHandler, priorityFilter);\n        }\n\n        // Ordena√ß√£o\n        const sortFilter = document.getElementById('home-filter-sort');\n        if (sortFilter) {\n            const sortHandler = (e) => {\n                this.currentFilter.sortBy = e.target.value;\n                this.update();\n            };\n            sortFilter.addEventListener('change', sortHandler);\n            this.registerEventListener('change', sortHandler, sortFilter);\n        }\n\n        // Bot√£o \"Ver todas\" tarefas atrasadas\n        const btnShowAll = document.getElementById('btn-show-all-overdue');\n        if (btnShowAll) {\n            const showAllHandler = () => this.showAllOverdue();\n            btnShowAll.addEventListener('click', showAllHandler);\n            this.registerEventListener('click', showAllHandler, btnShowAll);\n        }\n\n        // Bot√£o \"Ver todas\" tarefas conclu√≠das\n        const btnShowAllCompleted = document.getElementById('btn-show-all-completed');\n        if (btnShowAllCompleted) {\n            const showAllCompletedHandler = () => this.showAllCompleted();\n            btnShowAllCompleted.addEventListener('click', showAllCompletedHandler);\n            this.registerEventListener('click', showAllCompletedHandler, btnShowAllCompleted);\n        }\n\n        // Bot√£o \"Ver todas\" tarefas adiadas\n        const btnShowAllPostponed = document.getElementById('btn-show-all-postponed');\n        if (btnShowAllPostponed) {\n            const showAllPostponedHandler = () => this.showAllPostponed();\n            btnShowAllPostponed.addEventListener('click', showAllPostponedHandler);\n            this.registerEventListener('click', showAllPostponedHandler, btnShowAllPostponed);\n        }\n\n        // Bot√£o adicionar nova tarefa\n        const btnAddTask = document.getElementById('btn-add-task-home');\n        if (btnAddTask) {\n            const addTaskHandler = () => this.handleTaskAdd();\n            btnAddTask.addEventListener('click', addTaskHandler);\n            this.registerEventListener('click', addTaskHandler, btnAddTask);\n        }\n\n        // Bot√£o adicionar tarefa no empty state\n        const btnAddTaskEmpty = document.getElementById('btn-add-task-empty');\n        if (btnAddTaskEmpty) {\n            const addTaskEmptyHandler = () => this.handleTaskAdd();\n            btnAddTaskEmpty.addEventListener('click', addTaskEmptyHandler);\n            this.registerEventListener('click', addTaskEmptyHandler, btnAddTaskEmpty);\n        }\n\n        // Bot√£o retry em caso de erro\n        const btnRetry = document.getElementById('btn-retry-home');\n        if (btnRetry) {\n            const retryHandler = () => {\n                this.isLoading = false;\n                this.lastRenderData = null;\n                this.update();\n            };\n            btnRetry.addEventListener('click', retryHandler);\n            this.registerEventListener('click', retryHandler, btnRetry);\n        }\n\n        // Event delegation para bot√µes de a√ß√£o (editar/excluir)\n        const actionHandler = (e) => {\n            const actionBtn = e.target.closest('[data-action]');\n            if (!actionBtn) return;\n\n            const action = actionBtn.getAttribute('data-action');\n            const taskId = actionBtn.getAttribute('data-task-id');\n\n            if (action === 'edit' && taskId) {\n                this.handleTaskEdit(taskId);\n            } else if (action === 'delete' && taskId) {\n                this.handleTaskDelete(taskId);\n            }\n        };\n        document.addEventListener('click', actionHandler);\n        this.registerEventListener('click', actionHandler, document);\n\n        // Navega√ß√£o por teclado\n        this.setupKeyboardNavigation();\n\n        // Aplicar swipe gestures nos cards\n        this.setupSwipeGestures();\n    }\n\n    /**\n     * Configura navega√ß√£o por teclado\n     * @private\n     */\n    setupKeyboardNavigation() {\n        const keyboardHandler = (e) => {\n            // Navega√ß√£o em listas com setas\n            if (e.key === 'ArrowDown' || e.key === 'ArrowUp') {\n                const focused = document.activeElement;\n                if (focused && (focused.classList.contains('timeline-item') || focused.classList.contains('overdue-item'))) {\n                    e.preventDefault();\n                    const items = Array.from(document.querySelectorAll('.timeline-item, .overdue-item'));\n                    const currentIndex = items.indexOf(focused);\n                    if (currentIndex === -1) return;\n\n                    const nextIndex = e.key === 'ArrowDown' ?\n                        Math.min(currentIndex + 1, items.length - 1) :\n                        Math.max(currentIndex - 1, 0);\n\n                    items[nextIndex].focus();\n                }\n            }\n\n            // Enter para interagir com item focado\n            if (e.key === 'Enter') {\n                const focused = document.activeElement;\n                if (focused && (focused.classList.contains('timeline-item') || focused.classList.contains('overdue-item'))) {\n                    const checkbox = focused.querySelector('.task-checkbox');\n                    if (checkbox) {\n                        checkbox.click();\n                    }\n                }\n            }\n\n            // Esc para fechar modais (se houver)\n            if (e.key === 'Escape') {\n                // L√≥gica de fechar modais pode ser adicionada aqui\n            }\n        };\n\n        document.addEventListener('keydown', keyboardHandler);\n        this.registerEventListener('keydown', keyboardHandler, document);\n    }\n\n    /**\n     * Registra um event listener para cleanup posterior\n     * @param {string} type - Tipo do evento\n     * @param {Function} handler - Handler do evento\n     * @param {EventTarget} target - Elemento alvo\n     * @private\n     */\n    registerEventListener(type, handler, target) {\n        this.eventListeners.push({\n            type,\n            handler,\n            target\n        });\n    }\n\n    /**\n     * Limpa todos os event listeners registrados\n     * @private\n     */\n    cleanupEventListeners() {\n        this.eventListeners.forEach(({\n            type,\n            handler,\n            target\n        }) => {\n            if (target && typeof target.removeEventListener === 'function') {\n                target.removeEventListener(type, handler);\n            }\n        });\n        this.eventListeners = [];\n    }\n\n    // ============================================================================\n    // SWIPE GESTURES\n    // ============================================================================\n\n    /**\n     * Configura swipe gestures nos cards de tarefas\n     * @private\n     */\n    setupSwipeGestures() {\n        // Limpar gestures anteriores apenas dos elementos removidos\n        const currentCards = new Set();\n\n        // Seletores para cards de tarefas\n        const selectors = [\n            '.timeline-item .task-card',\n            '.overdue-item .task-card',\n            '.completed-item .task-card',\n            '.postponed-item .task-card'\n        ];\n\n        selectors.forEach(selector => {\n            const items = document.querySelectorAll(selector);\n            items.forEach(card => {\n                const taskId = card.querySelector('.task-checkbox').getAttribute('data-task-id');\n                if (taskId) {\n                    currentCards.add(taskId);\n\n                    // S√≥ configurar se ainda n√£o existe\n                    if (!this.swipeGestureMap.has(taskId)) {\n                        const cleanup = this.setupSwipeGestureForCard(card, taskId);\n                        if (cleanup) {\n                            this.swipeGestureMap.set(taskId, cleanup);\n                        }\n                    }\n                }\n            });\n        });\n\n        // Limpar gestures de cards que n√£o existem mais\n        this.swipeGestureMap.forEach((cleanup, taskId) => {\n            if (!currentCards.has(taskId)) {\n                if (typeof cleanup === 'function') {\n                    try {\n                        cleanup();\n                    } catch (error) {\n                        console.error('Erro ao limpar swipe gesture:', error);\n                    }\n                }\n                this.swipeGestureMap.delete(taskId);\n            }\n        });\n    }\n\n    /**\n     * Configura swipe gesture para um card espec√≠fico\n     * @param {HTMLElement} card - Elemento do card\n     * @param {string} taskId - ID da tarefa\n     * @returns {Function|null} Fun√ß√£o de cleanup ou null\n     * @private\n     */\n    setupSwipeGestureForCard(card, taskId) {\n        if (!taskId || !card) {\n            return null;\n        }\n\n        try {\n            setupSwipeGestures(card, {\n                onSwipeLeft: createCompleteTaskHandler(taskId, (id) => {\n                    this.handleTaskComplete(id, true);\n                }),\n                onSwipeRight: createPostponeTaskHandler(taskId, (id, days) => {\n                    this.handlePostponeTask(id, days);\n                })\n            });\n\n            // Retornar fun√ß√£o de cleanup se dispon√≠vel\n            return () => {\n                // Cleanup ser√° feito pelo m√≥dulo swipe-gestures se necess√°rio\n            };\n        } catch (error) {\n            this.handleError('Erro ao configurar swipe gesture', error);\n            return null;\n        }\n    }\n\n    /**\n     * Limpa todos os swipe gestures\n     * @private\n     */\n    cleanupSwipeGestures() {\n        this.swipeGestureMap.forEach((cleanup, taskId) => {\n            if (typeof cleanup === 'function') {\n                try {\n                    cleanup();\n                } catch (error) {\n                    this.handleError('Erro ao limpar swipe gesture', error);\n                }\n            }\n        });\n        this.swipeGestureMap.clear();\n        this.swipeGestureCleanups.forEach(cleanup => {\n            if (typeof cleanup === 'function') {\n                try {\n                    cleanup();\n                } catch (error) {\n                    this.handleError('Erro ao limpar swipe gesture', error);\n                }\n            }\n        });\n        this.swipeGestureCleanups = [];\n    }\n\n    // ============================================================================\n    // HANDLERS DE TAREFAS\n    // ============================================================================\n\n    /**\n     * Manipula a conclus√£o de uma tarefa\n     * @param {string|number} taskId - ID da tarefa\n     * @param {boolean} completed - Status de conclus√£o\n     */\n    handleTaskComplete(taskId, completed) {\n        try {\n            if (!taskId) {\n                return;\n            }\n\n            const state = store.getState();\n            if (!validateStoreData(state.tarefasHome, 'array')) {\n                toast.error('Erro: dados inv√°lidos');\n                return;\n            }\n\n            const homeTasks = state.tarefasHome || [];\n            const task = this.findTaskById(homeTasks, taskId);\n\n            if (!task) {\n                toast.error('Tarefa n√£o encontrada');\n                return;\n            }\n\n            const taskTitle = task.titulo || task.nome || 'Tarefa';\n\n            // Atualizar estado (optimistic update)\n            store.updateItem('tarefasHome', (t) => this.compareTaskIds(this.getTaskId(t), taskId), {\n                completed,\n                completedAt: completed ? new Date().toISOString() : null,\n            });\n\n            // Mostrar toast com op√ß√£o de desfazer\n            if (completed) {\n                toast.success(`\"${taskTitle}\" conclu√≠da!`, {\n                    duration: 5000,\n                    action: () => {\n                        // Desfazer\n                        store.updateItem('tarefasHome', (t) => this.compareTaskIds(this.getTaskId(t), taskId), {\n                            completed: false,\n                            completedAt: null,\n                        });\n                        toast.info('A√ß√£o desfeita');\n                    },\n                    actionLabel: 'Desfazer',\n                });\n\n                // Atualizar streak\n                this.updateStreak();\n            }\n        } catch (error) {\n            this.handleError('Erro ao completar tarefa', error);\n            toast.error('Erro ao completar tarefa');\n        }\n    }\n\n    /**\n     * Manipula a adi√ß√£o de nova tarefa\n     */\n    handleTaskAdd() {\n        try {\n            const state = store.getState();\n            const newId = (state.contadorHome || 0) + 1;\n\n            // Criar tarefa padr√£o com data/hora atual\n            const now = new Date();\n            const defaultTime = new Date(now.getTime() + DEFAULT_TASK_DELAY_HOURS * 60 * 60 * 1000);\n\n            const newTask = {\n                id: newId,\n                contador: newId,\n                titulo: 'Nova Tarefa',\n                descricao: '',\n                status: 'todo',\n                prioridade: 'media',\n                tags: [],\n                responsavel: '',\n                time: defaultTime.toISOString(),\n                createdAt: new Date().toISOString(),\n                updatedAt: new Date().toISOString()\n            };\n\n            // Abrir modal para editar a nova tarefa\n            taskEditModal.open(newTask, (originalTask, updates) => {\n                try {\n                    // Adicionar tarefa ao store\n                    const finalTask = {\n                        ...newTask,\n                        ...updates\n                    };\n                    store.addItem('tarefasHome', finalTask);\n                    store.setState({\n                        contadorHome: newId\n                    });\n\n                    toast.success('Tarefa criada com sucesso');\n\n                    // Atualizar visualiza√ß√£o\n                    this.update();\n                } catch (error) {\n                    this.handleError('Erro ao criar tarefa', error);\n                    toast.error('Erro ao criar tarefa');\n                }\n            });\n        } catch (error) {\n            this.handleError('Erro ao adicionar tarefa', error);\n            toast.error('Erro ao adicionar tarefa');\n        }\n    }\n\n    /**\n     * Manipula a edi√ß√£o de uma tarefa\n     * @param {string|number} taskId - ID da tarefa\n     */\n    handleTaskEdit(taskId) {\n        try {\n            if (!taskId) {\n                toast.error('ID da tarefa inv√°lido');\n                return;\n            }\n\n            const state = store.getState();\n            if (!validateStoreData(state.tarefasHome, 'array')) {\n                toast.error('Erro: dados inv√°lidos');\n                return;\n            }\n\n            const homeTasks = state.tarefasHome || [];\n            const task = this.findTaskById(homeTasks, taskId);\n\n            if (!task) {\n                toast.error('Tarefa n√£o encontrada');\n                return;\n            }\n\n            taskEditModal.open(task, (originalTask, updates) => {\n                try {\n                    store.updateItem('tarefasHome', (t) => this.compareTaskIds(this.getTaskId(t), taskId), updates);\n\n                    toast.success('Tarefa atualizada com sucesso');\n\n                    // Atualizar visualiza√ß√£o\n                    this.update();\n                } catch (error) {\n                    this.handleError('Erro ao atualizar tarefa', error);\n                    toast.error('Erro ao atualizar tarefa');\n                }\n            });\n        } catch (error) {\n            this.handleError('Erro ao editar tarefa', error);\n            toast.error('Erro ao editar tarefa');\n        }\n    }\n\n    /**\n     * Manipula a exclus√£o de uma tarefa\n     * @param {string|number} taskId - ID da tarefa\n     */\n    async handleTaskDelete(taskId) {\n        try {\n            if (!taskId) {\n                toast.error('ID da tarefa inv√°lido');\n                return;\n            }\n\n            const state = store.getState();\n            if (!validateStoreData(state.tarefasHome, 'array')) {\n                toast.error('Erro: dados inv√°lidos');\n                return;\n            }\n\n            const homeTasks = state.tarefasHome || [];\n            const task = this.findTaskById(homeTasks, taskId);\n\n            if (!task) {\n                toast.error('Tarefa n√£o encontrada');\n                return;\n            }\n\n            const taskTitle = task.titulo || task.nome || 'Tarefa';\n            const confirmed = await confirmAction(`Tem certeza que deseja excluir \"${taskTitle}\"?`);\n\n            if (confirmed) {\n                store.removeItem('tarefasHome', (t) => this.compareTaskIds(this.getTaskId(t), taskId));\n\n                toast.success('Tarefa exclu√≠da com sucesso');\n                this.update();\n            }\n        } catch (error) {\n            this.handleError('Erro ao excluir tarefa', error);\n            toast.error('Erro ao excluir tarefa');\n        }\n    }\n\n    /**\n     * Adia uma tarefa por N dias\n     * @param {string|number} taskId - ID da tarefa\n     * @param {number} days - N√∫mero de dias para adiar\n     * @private\n     */\n    handlePostponeTask(taskId, days) {\n        try {\n            if (!taskId || typeof days !== 'number' || days <= 0) {\n                return;\n            }\n\n            const state = store.getState();\n            if (!validateStoreData(state.tarefasHome, 'array')) {\n                return;\n            }\n\n            const homeTasks = state.tarefasHome || [];\n            const task = this.findTaskById(homeTasks, taskId);\n\n            if (!task || !task.time) {\n                return;\n            }\n\n            const taskDate = toDate(task.time);\n            if (!taskDate) {\n                return;\n            }\n\n            taskDate.setDate(taskDate.getDate() + days);\n            const newTime = taskDate.toISOString();\n\n            store.updateItem('tarefasHome', (t) => this.compareTaskIds(this.getTaskId(t), taskId), {\n                time: newTime\n            });\n\n            const dayText = days === 1 ? 'dia' : 'dias';\n            toast.info(`Tarefa adiada ${days} ${dayText}`);\n        } catch (error) {\n            this.handleError('Erro ao adiar tarefa', error);\n            toast.error('Erro ao adiar tarefa');\n        }\n    }\n\n    /**\n     * Mostra todas as tarefas atrasadas\n     */\n    showAllOverdue() {\n        try {\n            const state = store.getState();\n            if (!validateStoreData(state.tarefasHome, 'array')) {\n                toast.error('Erro: dados inv√°lidos');\n                return;\n            }\n\n            const homeTasks = state.tarefasHome || [];\n            const overdueTasks = getOverdueTasks(homeTasks);\n\n            const list = document.getElementById('home-overdue-list');\n            if (!list) {\n                return;\n            }\n\n            const allOverdueItems = overdueTasks\n                .filter(task => task != null)\n                .map(task => {\n                    const taskCard = new TaskCard(task, {\n                        showCheckbox: true,\n                        showModule: true,\n                        showPriority: true,\n                        showDuration: false,\n                        isCurrent: false,\n                        isOverdue: true,\n                        showActions: true,\n                    });\n                    const taskId = this.getTaskId(task);\n                    return `<div class=\"overdue-item\" data-task-id=\"${taskId}\" role=\"listitem\" tabindex=\"0\" aria-label=\"Tarefa atrasada: ${escapeHtml(task.titulo || task.nome || 'Sem t√≠tulo')}\">${taskCard.render().outerHTML}</div>`;\n                })\n                .join('');\n\n            list.innerHTML = allOverdueItems;\n\n            // Remover bot√£o \"Ver todas\"\n            const btn = document.getElementById('btn-show-all-overdue');\n            if (btn) {\n                btn.remove();\n            }\n\n            // Reconfigurar swipe gestures ap√≥s atualizar DOM\n            this.setupSwipeGestures();\n        } catch (error) {\n            this.handleError('Erro ao mostrar todas as tarefas atrasadas', error);\n            toast.error('Erro ao carregar tarefas atrasadas');\n        }\n    }\n\n    /**\n     * Mostra todas as tarefas conclu√≠das\n     */\n    showAllCompleted() {\n        try {\n            const state = store.getState();\n            if (!validateStoreData(state.tarefasHome, 'array')) {\n                toast.error('Erro: dados inv√°lidos');\n                return;\n            }\n\n            const homeTasks = state.tarefasHome || [];\n            const filteredTasks = this.applyFilters(homeTasks);\n            const completedTasks = getCompletedTasks(filteredTasks);\n\n            const list = document.getElementById('home-completed-list');\n            if (!list) {\n                return;\n            }\n\n            const allCompletedItems = completedTasks\n                .filter(task => task != null)\n                .map(task => {\n                    const taskCard = new TaskCard(task, {\n                        showCheckbox: true,\n                        showModule: true,\n                        showPriority: true,\n                        showDuration: false,\n                        isCurrent: false,\n                        isOverdue: false,\n                        showActions: true,\n                        isCompleted: true,\n                    });\n                    const taskId = this.getTaskId(task);\n                    return `<div class=\"completed-item\" data-task-id=\"${taskId}\" role=\"listitem\" tabindex=\"0\" aria-label=\"Tarefa conclu√≠da: ${escapeHtml(task.titulo || task.nome || 'Sem t√≠tulo')}\">${taskCard.render().outerHTML}</div>`;\n                })\n                .join('');\n\n            list.innerHTML = allCompletedItems;\n\n            // Remover bot√£o \"Ver todas\"\n            const btn = document.getElementById('btn-show-all-completed');\n            if (btn) {\n                btn.remove();\n            }\n\n            // Reconfigurar swipe gestures ap√≥s atualizar DOM\n            this.setupSwipeGestures();\n        } catch (error) {\n            this.handleError('Erro ao mostrar todas as tarefas conclu√≠das', error);\n            toast.error('Erro ao carregar tarefas conclu√≠das');\n        }\n    }\n\n    /**\n     * Mostra todas as tarefas adiadas\n     */\n    showAllPostponed() {\n        try {\n            const state = store.getState();\n            if (!validateStoreData(state.tarefasHome, 'array')) {\n                toast.error('Erro: dados inv√°lidos');\n                return;\n            }\n\n            const homeTasks = state.tarefasHome || [];\n            const filteredTasks = this.applyFilters(homeTasks);\n            const postponedTasks = getPostponedTasks(filteredTasks);\n\n            const list = document.getElementById('home-postponed-list');\n            if (!list) {\n                return;\n            }\n\n            const allPostponedItems = postponedTasks\n                .filter(task => task != null)\n                .map(task => {\n                    const taskCard = new TaskCard(task, {\n                        showCheckbox: true,\n                        showModule: true,\n                        showPriority: true,\n                        showDuration: true,\n                        isCurrent: false,\n                        isOverdue: false,\n                        showActions: true,\n                    });\n                    const taskId = this.getTaskId(task);\n                    return `<div class=\"postponed-item\" data-task-id=\"${taskId}\" role=\"listitem\" tabindex=\"0\" aria-label=\"Tarefa adiada: ${escapeHtml(task.titulo || task.nome || 'Sem t√≠tulo')}\">${taskCard.render().outerHTML}</div>`;\n                })\n                .join('');\n\n            list.innerHTML = allPostponedItems;\n\n            // Remover bot√£o \"Ver todas\"\n            const btn = document.getElementById('btn-show-all-postponed');\n            if (btn) {\n                btn.remove();\n            }\n\n            // Reconfigurar swipe gestures ap√≥s atualizar DOM\n            this.setupSwipeGestures();\n        } catch (error) {\n            this.handleError('Erro ao mostrar todas as tarefas adiadas', error);\n            toast.error('Erro ao carregar tarefas adiadas');\n        }\n    }\n\n    // ============================================================================\n    // M√âTODOS AUXILIARES\n    // ============================================================================\n\n    /**\n     * Encontra uma tarefa pelo ID\n     * @param {Array} tasks - Lista de tarefas\n     * @param {string|number} taskId - ID da tarefa\n     * @returns {Object|null} Tarefa encontrada ou null\n     * @private\n     */\n    findTaskById(tasks, taskId) {\n        if (!Array.isArray(tasks) || !taskId) {\n            return null;\n        }\n        return tasks.find((t) => this.compareTaskIds(this.getTaskId(t), taskId)) || null;\n    }\n\n    /**\n     * Obt√©m o ID de uma tarefa (id ou contador)\n     * @param {Object} task - Tarefa\n     * @returns {string|number|null} ID da tarefa\n     * @private\n     */\n    getTaskId(task) {\n        if (!task) return null;\n        return task.id || task.contador || null;\n    }\n\n    /**\n     * Compara IDs de tarefas de forma segura\n     * @param {string|number} id1 - Primeiro ID\n     * @param {string|number} id2 - Segundo ID\n     * @returns {boolean} True se forem iguais\n     * @private\n     */\n    compareTaskIds(id1, id2) {\n        if (id1 == null || id2 == null) return false;\n        return String(id1) === String(id2);\n    }\n\n    /**\n     * Atualiza o streak do usu√°rio\n     * @private\n     */\n    updateStreak() {\n        try {\n            const state = store.getState();\n            const today = getTodayISO();\n            const homeTasks = state.tarefasHome || [];\n            const completedToday = getTasksCompletedToday(homeTasks);\n\n            if (completedToday.length === 0) {\n                return;\n            }\n\n            const lastStreakDate = state.ultimaStreakDate || null;\n            const currentStreak = state.streak || 0;\n\n            if (!lastStreakDate) {\n                // Primeira vez\n                store.setState({\n                    streak: 1,\n                    ultimaStreakDate: today,\n                    diaAtual: today\n                });\n            } else if (lastStreakDate === today) {\n                // Mesmo dia, manter streak\n                return;\n            } else {\n                // Verificar se √© dia consecutivo\n                const yesterday = new Date(today);\n                yesterday.setDate(yesterday.getDate() - 1);\n                const yesterdayISO = yesterday.toISOString().split('T')[0];\n\n                if (lastStreakDate === yesterdayISO) {\n                    // Dia consecutivo, incrementar streak\n                    store.setState({\n                        streak: currentStreak + 1,\n                        ultimaStreakDate: today,\n                        diaAtual: today\n                    });\n                } else {\n                    // Quebrou streak, reiniciar\n                    store.setState({\n                        streak: 1,\n                        ultimaStreakDate: today,\n                        diaAtual: today\n                    });\n                }\n            }\n\n            // Anima√ß√£o ao completar 100%\n            this.triggerCompletionAnimation(homeTasks, completedToday);\n        } catch (error) {\n            this.handleError('Erro ao atualizar streak', error);\n        }\n    }\n\n    /**\n     * Dispara anima√ß√£o quando todas as tarefas s√£o completadas\n     * @param {Array} homeTasks - Lista de tarefas\n     * @param {Array} completedToday - Tarefas completadas hoje\n     * @private\n     */\n    triggerCompletionAnimation(homeTasks, completedToday) {\n        try {\n            const totalToday = getTotalTasksToday(homeTasks);\n            if (completedToday.length === totalToday && totalToday > 0) {\n                setTimeout(() => {\n                    const progressBar = document.querySelector('.home-metrics-progress-bar');\n                    if (progressBar) {\n                        progressBar.style.animation = 'progress-complete 0.5s ease';\n                    }\n                }, ANIMATION_DELAY);\n            }\n        } catch (error) {\n            this.handleError('Erro ao disparar anima√ß√£o', error);\n        }\n    }\n\n    /**\n     * Trata erros de renderiza√ß√£o\n     * @param {Error} error - Erro ocorrido\n     * @returns {string} HTML de erro\n     * @private\n     */\n    handleRenderError(error) {\n        this.handleError('Erro ao renderizar HomeView', error);\n        return this.renderErrorState('Erro ao carregar o dashboard');\n    }\n\n    /**\n     * Trata erros de forma centralizada\n     * @param {string} message - Mensagem de erro\n     * @param {Error} error - Erro ocorrido\n     * @private\n     */\n    handleError(message, error) {\n        console.error(message, error);\n        // Aqui poderia adicionar logging estruturado ou envio para servi√ßo de monitoramento\n        if (error && error.stack) {\n            console.error('Stack trace:', error.stack);\n        }\n    }\n}\n\n/**\n * Exporta fun√ß√£o de renderiza√ß√£o para o router\n * @returns {Object} Objeto com m√©todos render e mount\n */\nexport default function renderHome() {\n    const view = new HomeView();\n\n    return {\n        render: () => view.render(),\n        mount: () => {\n            // Usar setTimeout para garantir que o DOM est√° pronto\n            setTimeout(() => {\n                view.mount();\n            }, 0);\n            return view;\n        },\n    };\n}"],"names":["debounce","func","wait","timeout","args","later","throttle","limit","inThrottle","memoize","fn","cache","key","result","validateStoreData","data","type","escapeHtml","str","div","compareTaskArrays","oldTasks","newTasks","oldIds","t","newIds","added","id","removed","modified","newTask","oldTask","UPDATE_INTERVAL","COLLAPSE_THRESHOLD","ANIMATION_DELAY","DEFAULT_TASK_DELAY_HOURS","UPCOMING_TASKS_HOURS","DEBOUNCE_DELAY","THROTTLE_DELAY","HomeView","tasks","hours","getUpcomingTasks","getOverdueTasks","state","store","homeTasks","filteredTasks","upcomingTasks","overdueTasks","completedTasks","getCompletedTasks","postponedTasks","getPostponedTasks","completedToday","getTasksCompletedToday","totalToday","getTotalTasksToday","sortedUpcomingTasks","now","currentTask","task","taskTime","toDate","renderData","error","container","newRenderData","newData","oldData","timelineContainer","section","shouldCollapse","displayTasks","list","overdueItems","taskCard","TaskCard","badge","existingBtn","showAllButton","completed","total","streak","percentage","completedValue","streakValue","progressBar","progressText","completedItems","postponedItems","message","showCTA","ctaButton","filtered","searchLower","title","desc","module","taskDate","sortBy","sorted","priorityOrder","a","b","priorityA","moduleA","moduleB","dateA","timeA","timeB","checkboxHandler","e","taskId","searchInput","searchHandler","priorityFilter","priorityHandler","sortFilter","sortHandler","btnShowAll","showAllHandler","btnShowAllCompleted","showAllCompletedHandler","btnShowAllPostponed","showAllPostponedHandler","btnAddTask","addTaskHandler","btnAddTaskEmpty","addTaskEmptyHandler","btnRetry","retryHandler","actionHandler","actionBtn","action","keyboardHandler","focused","items","currentIndex","nextIndex","checkbox","handler","target","currentCards","selector","card","cleanup","setupSwipeGestures","createCompleteTaskHandler","createPostponeTaskHandler","days","toast","taskTitle","newId","defaultTime","taskEditModal","originalTask","updates","finalTask","confirmAction","newTime","dayText","allOverdueItems","btn","allCompletedItems","allPostponedItems","id1","id2","today","getTodayISO","lastStreakDate","currentStreak","yesterday","yesterdayISO","renderHome","view"],"mappings":"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"}