{"version":3,"mappings":";4IAeA,MAAMA,CAAM,CACR,aAAc,CACV,KAAK,MAAQ,KAAK,gBAAe,EACjC,KAAK,YAAc,GACnB,KAAK,aAAe,KACpB,KAAK,eAAiB,IACtB,KAAK,YAAc,GACnB,KAAK,aAAe,GACpB,KAAK,UAAY,GACjB,KAAK,OAAS,UAGd,KAAK,KAAI,CACb,CAKA,MAAM,MAAO,CAET,MAAMC,EAAc,KAAI,EAGxB,MAAMC,EAAc,MAAM,KAAK,cAAa,EACxCA,IACA,KAAK,MAAQ,CACT,GAAG,KAAK,gBAAe,EACvB,GAAGA,CACnB,EACY,KAAK,OAAM,GAIf,MAAM,KAAK,kBAAiB,EAG5B,KAAK,aAAY,EAGjB,KAAK,uBAAsB,EAE3B,KAAK,YAAc,GACnB,QAAQ,IAAI,mCAAmC,CACnD,CAKA,iBAAkB,CACd,MAAO,CAEH,QAAS,GACT,SAAU,EAGV,YAAa,GACb,aAAc,EAGd,cAAe,GACf,eAAgB,EAChB,UAAW,GACX,WAAY,GAGZ,YAAa,GACb,cAAe,GACf,cAAe,GACf,gBAAiB,EACjB,WAAY,GACZ,cAAe,CACX,gBAAiB,CACb,MAAO,GACP,WAAY,CAAC,EAAG,GAAI,EAAE,CAC1C,EACgB,aAAc,GACd,WAAY,QAC5B,EAGY,OAAQ,EACR,WAAY,GACZ,kBAAmB,GAGnB,SAAU,GACV,aAAc,KACd,SAAU,IAAI,OAAO,YAAW,EAAG,MAAM,GAAG,EAAE,CAAC,EAG/C,kBAAmB,IAAI,KAAI,EAAG,YAAW,CACrD,CACI,CAKA,MAAM,eAAgB,CAClB,GAAI,CACA,MAAMC,EAAS,MAAMF,EAAc,IAAI,aAAa,EACpD,GAAIE,GAAU,OAAOA,GAAW,SAC5B,MAAO,CACH,GAAG,KAAK,gBAAe,EACvB,GAAGA,CACvB,CAEQ,OAASC,EAAO,CACZ,QAAQ,KAAK,oCAAqCA,CAAK,CAC3D,CACA,OAAO,IACX,CAKA,MAAM,mBAAoB,CACtB,GAAI,CACA,GAAI,CAACC,EAAgB,cAAe,CAChC,QAAQ,KAAK,+CAA+C,EAC5D,MACJ,CAGA,KAAM,CAACC,EAASC,EAAQC,EAAYC,EAASC,CAAM,EAAI,MAAM,QAAQ,IAAI,CACrEL,EAAgB,cAAc,SAAS,EACvCA,EAAgB,YAAY,SAAU,KAAK,MAAM,EACjDA,EAAgB,cAAc,YAAY,EAC1CA,EAAgB,YAAY,UAAW,KAAK,MAAM,EAClDA,EAAgB,YAAY,SAAU,KAAK,MAAM,CACjE,CAAa,EAGKM,EAAW,CACb,GAAG,KAAK,gBAAe,CACvC,EAGgB,MAAM,QAAQL,CAAO,IACrBA,EAAQ,QAAQM,GAAQ,CAChBA,EAAK,OAAS,UACdD,EAAS,QAAQ,KAAKC,CAAI,EACnBA,EAAK,OAAS,QACrBD,EAAS,YAAY,KAAKC,CAAI,CAEtC,CAAC,EACDD,EAAS,SAAWA,EAAS,QAAQ,OACrCA,EAAS,aAAeA,EAAS,YAAY,QAI7CJ,IACAI,EAAS,cAAgBJ,EAAO,eAAiB,GACjDI,EAAS,eAAiBJ,EAAO,gBAAkB,EACnDI,EAAS,UAAYJ,EAAO,WAAa,IAIzC,MAAM,QAAQC,CAAU,IACxBG,EAAS,WAAaH,GAItBC,IACAE,EAAS,YAAcF,EAAQ,aAAe,GAC9CE,EAAS,cAAgBF,EAAQ,eAAiB,GAClDE,EAAS,cAAgBF,EAAQ,eAAiB,GAClDE,EAAS,gBAAkBF,EAAQ,iBAAmB,EACtDE,EAAS,WAAaF,EAAQ,YAAc,GACxCA,EAAQ,gBACRE,EAAS,cAAgB,CACrB,GAAGA,EAAS,cACZ,GAAGF,EAAQ,aACnC,IAKgBC,IACAC,EAAS,OAASD,EAAO,QAAU,EACnCC,EAAS,WAAaD,EAAO,YAAc,GAC3CC,EAAS,kBAAoBD,EAAO,mBAAqB,GACzDC,EAAS,SAAWD,EAAO,UAAY,GACvCC,EAAS,aAAeD,EAAO,cAAgB,KAC3CA,EAAO,WACPC,EAAS,SAAWD,EAAO,UAE3BA,EAAO,oBACPC,EAAS,kBAAoBD,EAAO,oBAK5C,KAAK,MAAQC,EACb,MAAMV,EAAc,IAAI,cAAeU,CAAQ,EAC/C,KAAK,OAAM,CACf,OAASP,EAAO,CACZ,QAAQ,MAAM,wCAAyCA,CAAK,CAChE,CACJ,CAKA,iBAAkB,CACV,KAAK,cACL,aAAa,KAAK,YAAY,EAGlC,KAAK,aAAe,WAAW,SAAY,CACvC,GAAI,CACA,MAAMS,EAAc,CAChB,GAAG,KAAK,MACR,kBAAmB,IAAI,KAAI,EAAG,YAAW,CAC7D,EAGgB,MAAMZ,EAAc,IAAI,cAAeY,CAAW,EAG9CR,EAAgB,eAChB,MAAM,KAAK,4BAA4BQ,CAAW,CAE1D,OAAST,EAAO,CACZ,QAAQ,MAAM,sCAAuCA,CAAK,CAC9D,CACJ,EAAG,KAAK,cAAc,CAC1B,CAKA,MAAM,4BAA4BU,EAAO,CACrC,GAAI,CACA,MAAMC,EAAQ,GAGRC,EAAa,CACf,GAAGF,EAAM,QAAQ,IAAIG,IAAM,CACvB,GAAGA,EACH,KAAM,SAC1B,EAAkB,EACF,GAAGH,EAAM,YAAY,IAAIG,IAAM,CAC3B,GAAGA,EACH,KAAM,MAC1B,EAAkB,CAClB,EAIY,UAAWC,KAAUF,EACbE,EAAO,IACPH,EAAM,KAAK,CACP,KAAM,MACN,WAAY,UACZ,MAAOG,EAAO,GACd,KAAMA,EACN,MAAO,EAC/B,CAAqB,EAKTH,EAAM,KAAK,CACP,KAAM,MACN,WAAY,SACZ,MAAO,KAAK,OACZ,KAAM,CACF,cAAeD,EAAM,cACrB,eAAgBA,EAAM,eACtB,UAAWA,EAAM,UACjB,UAAW,IAAI,KAAI,EAAG,YAAW,CACrD,EACgB,MAAO,EACvB,CAAa,EAGD,UAAWK,KAAaL,EAAM,WACtBK,EAAU,IACVJ,EAAM,KAAK,CACP,KAAM,MACN,WAAY,aACZ,MAAOI,EAAU,GACjB,KAAMA,EACN,MAAO,EAC/B,CAAqB,EAKTJ,EAAM,KAAK,CACP,KAAM,MACN,WAAY,UACZ,MAAO,KAAK,OACZ,KAAM,CACF,YAAaD,EAAM,YACnB,cAAeA,EAAM,cACrB,cAAeA,EAAM,cACrB,gBAAiBA,EAAM,gBACvB,WAAYA,EAAM,WAClB,cAAeA,EAAM,cACrB,UAAW,IAAI,KAAI,EAAG,YAAW,CACrD,EACgB,MAAO,EACvB,CAAa,EAGDC,EAAM,KAAK,CACP,KAAM,MACN,WAAY,SACZ,MAAO,KAAK,OACZ,KAAM,CACF,OAAQD,EAAM,OACd,WAAYA,EAAM,WAClB,kBAAmBA,EAAM,kBACzB,SAAUA,EAAM,SAChB,aAAcA,EAAM,aACpB,SAAUA,EAAM,SAChB,kBAAmBA,EAAM,kBACzB,UAAW,IAAI,KAAI,EAAG,YAAW,CACrD,EACgB,MAAO,EACvB,CAAa,EAGGC,EAAM,OAAS,GACf,MAAMV,EAAgB,WAAWU,CAAK,CAE9C,OAASX,EAAO,CACZ,cAAQ,MAAM,wCAAyCA,CAAK,EACtDA,CACV,CACJ,CAKA,wBAAyB,CACrB,GAAI,CAACC,EAAgB,cACjB,OAIJ,MAAMe,EAAqBf,EAAgB,sBAAsB,UAAYC,GAAY,CACrF,MAAMe,EAAWf,EAAQ,OAAOW,GAAKA,EAAE,OAAS,SAAS,EACnDK,EAAOhB,EAAQ,OAAOW,GAAKA,EAAE,OAAS,MAAM,EAElD,KAAK,MAAM,QAAUI,EACrB,KAAK,MAAM,YAAcC,EACzB,KAAK,MAAM,SAAWD,EAAS,OAC/B,KAAK,MAAM,aAAeC,EAAK,OAC/B,KAAK,OAAM,CACf,CAAC,EACD,KAAK,UAAU,KAAKF,CAAkB,EAGtC,MAAMG,EAAoBlB,EAAgB,oBAAoB,SAAU,KAAK,OAASE,GAAW,CACzFA,IACA,KAAK,MAAM,cAAgBA,EAAO,eAAiB,GACnD,KAAK,MAAM,eAAiBA,EAAO,gBAAkB,EACrD,KAAK,MAAM,UAAYA,EAAO,WAAa,GAC3C,KAAK,OAAM,EAEnB,CAAC,EACD,KAAK,UAAU,KAAKgB,CAAiB,EAGrC,MAAMC,EAAwBnB,EAAgB,sBAAsB,aAAeG,GAAe,CAC9F,KAAK,MAAM,WAAaA,EACxB,KAAK,OAAM,CACf,CAAC,EACD,KAAK,UAAU,KAAKgB,CAAqB,EAGzC,MAAMC,EAAqBpB,EAAgB,oBAAoB,UAAW,KAAK,OAASI,GAAY,CAC5FA,IACA,KAAK,MAAM,YAAcA,EAAQ,aAAe,GAChD,KAAK,MAAM,cAAgBA,EAAQ,eAAiB,GACpD,KAAK,MAAM,cAAgBA,EAAQ,eAAiB,GACpD,KAAK,MAAM,gBAAkBA,EAAQ,iBAAmB,EACxD,KAAK,MAAM,WAAaA,EAAQ,YAAc,GAC1CA,EAAQ,gBACR,KAAK,MAAM,cAAgB,CACvB,GAAG,KAAK,MAAM,cACd,GAAGA,EAAQ,aACnC,GAEgB,KAAK,OAAM,EAEnB,CAAC,EACD,KAAK,UAAU,KAAKgB,CAAkB,EAGtC,MAAMC,EAAoBrB,EAAgB,oBAAoB,SAAU,KAAK,OAASK,GAAW,CACzFA,IACA,KAAK,MAAM,OAASA,EAAO,QAAU,EACrC,KAAK,MAAM,WAAaA,EAAO,YAAc,GAC7C,KAAK,MAAM,kBAAoBA,EAAO,mBAAqB,GAC3D,KAAK,MAAM,SAAWA,EAAO,UAAY,GACzC,KAAK,MAAM,aAAeA,EAAO,cAAgB,KAC7CA,EAAO,WACP,KAAK,MAAM,SAAWA,EAAO,UAE7BA,EAAO,oBACP,KAAK,MAAM,kBAAoBA,EAAO,mBAE1C,KAAK,OAAM,EAEnB,CAAC,EACD,KAAK,UAAU,KAAKgB,CAAiB,CACzC,CAKA,MAAM,cAAe,CACjB,GAAI,CAEA,KAAM,CACF,8BAAAC,EACA,aAAAC,CAChB,EAAgB,MAAKC,EAAA,8DAAC,eAAO,gDAA6C,wFAG9D,MAAMD,EAAY,EAGlB,MAAMD,EAA6B,CACvC,OAASvB,EAAO,CACZ,QAAQ,MAAM,6BAA8BA,CAAK,EAEjD,KAAK,cAAa,CACtB,CACJ,CAMA,MAAM,eAAgB,CAClB,GAAI,CAGA,GADiB,MAAMH,EAAc,IAAI,oBAAoB,EAEzD,OAIJ,MAAM6B,EAAe,sBACfC,EAAa,oBACbC,EAAgB,sBAChBC,EAAiB,uBACjBC,EAAc,mBACdC,EAAiB,wBACjBC,EAAe,uBAErB,IAAIC,EAAU,GAGd,MAAMhB,EAAW,aAAa,QAAQS,CAAY,EAClD,GAAIT,EACA,GAAI,CACA,KAAK,MAAM,QAAU,KAAK,MAAMA,CAAQ,EACxCgB,EAAU,EACd,OAASC,EAAG,CACR,QAAQ,KAAK,2BAA4BA,CAAC,CAC9C,CAIJ,MAAM/B,EAAS,aAAa,QAAQwB,CAAU,EAC9C,GAAIxB,EACA,GAAI,CACA,KAAK,MAAM,cAAgB,KAAK,MAAMA,CAAM,EAC5C8B,EAAU,EACd,OAASC,EAAG,CACR,QAAQ,KAAK,yBAA0BA,CAAC,CAC5C,CAIJ,MAAMC,EAAY,aAAa,QAAQP,CAAa,EACpD,GAAIO,EACA,GAAI,CACA,KAAK,MAAM,UAAY,KAAK,MAAMA,CAAS,EAC3CF,EAAU,EACd,OAASC,EAAG,CACR,QAAQ,KAAK,4BAA6BA,CAAC,CAC/C,CAIJ,MAAM9B,EAAa,aAAa,QAAQyB,CAAc,EACtD,GAAIzB,EACA,GAAI,CACA,KAAK,MAAM,WAAa,KAAK,MAAMA,CAAU,EAC7C6B,EAAU,EACd,OAASC,EAAG,CACR,QAAQ,KAAK,6BAA8BA,CAAC,CAChD,CAIJ,MAAM7B,EAAU,aAAa,QAAQyB,CAAW,EAChD,GAAIzB,EACA,GAAI,CACA,MAAM+B,EAAc,KAAK,MAAM/B,CAAO,EACtC,KAAK,MAAM,YAAc+B,EAAY,OAAS,GAC9C,KAAK,MAAM,cAAgBA,EAAY,SAAW,GAClD,KAAK,MAAM,cAAgBA,EAAY,SAAW,GAClD,KAAK,MAAM,WAAaA,EAAY,MAAQ,GACxCA,EAAY,SACZ,KAAK,MAAM,cAAgB,CACvB,GAAG,KAAK,MAAM,cACd,GAAGA,EAAY,MAC3C,GAEoBH,EAAU,EACd,OAASC,EAAG,CACR,QAAQ,KAAK,0BAA2BA,CAAC,CAC7C,CAIJ,MAAMG,EAAa,aAAa,QAAQN,CAAc,EACtD,GAAIM,EACA,GAAI,CACA,KAAK,MAAM,kBAAoB,KAAK,MAAMA,CAAU,EACpDJ,EAAU,EACd,OAASC,EAAG,CACR,QAAQ,KAAK,6BAA8BA,CAAC,CAChD,CAIJ,MAAMI,EAAU,aAAa,QAAQN,CAAY,EACjD,GAAIM,EACA,GAAI,CACA,MAAMC,EAAS,KAAK,MAAMD,CAAO,EACjC,KAAK,MAAQ,CACT,GAAG,KAAK,MACR,GAAGC,CAC3B,EACoBN,EAAU,EACd,OAASC,EAAG,CACR,QAAQ,KAAK,4BAA6BA,CAAC,CAC/C,CAIAD,IACA,MAAM,KAAK,gBAAe,EAEtB,KAAK,cACL,aAAa,KAAK,YAAY,EAElC,MAAM,KAAK,4BAA4B,KAAK,KAAK,GAIrD,MAAMpC,EAAc,IAAI,qBAAsB,EAAI,EAE9CoC,IACA,QAAQ,IAAI,wCAAwC,EACpD,KAAK,OAAM,EAEnB,OAASjC,EAAO,CACZ,QAAQ,MAAM,oBAAqBA,CAAK,CAC5C,CACJ,CAKA,UAAUwC,EAAU,CAChB,YAAK,YAAY,KAAKA,CAAQ,EAEvB,IAAM,CACT,KAAK,YAAc,KAAK,YAAY,OAAQC,GAAOA,IAAOD,CAAQ,CACtE,CACJ,CAKA,QAAS,CACL,KAAK,YAAY,QAASA,GAAa,CACnC,GAAI,CACAA,EAAS,KAAK,KAAK,CACvB,OAASxC,EAAO,CACZ,QAAQ,MAAM,gCAAiCA,CAAK,CACxD,CACJ,CAAC,CACL,CAKA,SAAS0C,EAAS,CACd,KAAK,MAAQ,CACT,GAAG,KAAK,MACR,GAAGA,CACf,EACQ,KAAK,gBAAe,EACpB,KAAK,OAAM,CACf,CAKA,UAAW,CACP,MAAO,CACH,GAAG,KAAK,KACpB,CACI,CAKA,cAAcC,EAAK,CACf,OAAO,KAAK,MAAMA,CAAG,CACzB,CAKA,iBAAiBA,EAAKD,EAAS,CAC3B,MAAME,EAAU,KAAK,MAAMD,CAAG,EAC1B,MAAM,QAAQC,CAAO,EACrB,KAAK,SAAS,CACV,CAACD,CAAG,EAAG,CAAC,GAAGC,EAAS,GAAGF,CAAO,CAC9C,CAAa,EACM,OAAOE,GAAY,UAAYA,IAAY,KAClD,KAAK,SAAS,CACV,CAACD,CAAG,EAAG,CACH,GAAGC,EACH,GAAGF,CACvB,CACA,CAAa,EAED,KAAK,SAAS,CACV,CAACC,CAAG,EAAGD,CACvB,CAAa,CAET,CAKA,QAAQC,EAAKE,EAAM,CACf,MAAMD,EAAU,KAAK,MAAMD,CAAG,EAC1B,MAAM,QAAQC,CAAO,GACrB,KAAK,SAAS,CACV,CAACD,CAAG,EAAG,CAAC,GAAGC,EAASC,CAAI,CACxC,CAAa,CAET,CAKA,WAAWF,EAAKG,EAAW,CACvB,MAAMF,EAAU,KAAK,MAAMD,CAAG,EAC1B,MAAM,QAAQC,CAAO,GACrB,KAAK,SAAS,CACV,CAACD,CAAG,EAAGC,EAAQ,OAAQC,GAAS,CAACC,EAAUD,CAAI,CAAC,CAChE,CAAa,CAET,CAKA,WAAWF,EAAKG,EAAWJ,EAAS,CAChC,MAAME,EAAU,KAAK,MAAMD,CAAG,EAC1B,MAAM,QAAQC,CAAO,GACrB,KAAK,SAAS,CACV,CAACD,CAAG,EAAGC,EAAQ,IAAKC,GAAUC,EAAUD,CAAI,EAAI,CAC5C,GAAGA,EACH,GAAGH,CACvB,EAAoBG,CAAK,CACzB,CAAa,CAET,CAKA,MAAM,WAAY,CACV,KAAK,cACL,aAAa,KAAK,YAAY,EAElC,GAAI,CACA,MAAMpC,EAAc,CAChB,GAAG,KAAK,MACR,kBAAmB,IAAI,KAAI,EAAG,YAAW,CACzD,EACY,MAAMZ,EAAc,IAAI,cAAeY,CAAW,EAC9CR,EAAgB,eAChB,MAAM,KAAK,4BAA4BQ,CAAW,CAE1D,OAAST,EAAO,CACZ,QAAQ,MAAM,6BAA8BA,CAAK,CACrD,CACJ,CAKA,SAAU,CACN,KAAK,UAAU,QAAQ+C,GAAeA,EAAW,CAAE,EACnD,KAAK,UAAY,EACrB,CACJ,CAGY,MAACC,EAAQ,IAAIpD,ECrtBlB,MAAMqD,CAAM,CACjB,aAAc,CACZ,KAAK,OAAS,GACd,KAAK,UAAY,KACjB,KAAK,KAAI,CACX,CAEA,MAAO,CACL,KAAK,UAAY,SAAS,cAAc,KAAK,EAC7C,KAAK,UAAU,UAAY,kBAC3B,KAAK,UAAU,GAAK,kBACpB,SAAS,KAAK,YAAY,KAAK,SAAS,CAC1C,CAEA,KAAKC,EAASC,EAAU,GAAI,CAC1B,KAAM,CACJ,KAAAC,EAAO,OACP,SAAAC,EAAW,IACX,OAAAC,EAAS,KACT,YAAAC,EAAc,UACpB,EAAQJ,EAEEK,EAAQ,SAAS,cAAc,KAAK,EAC1C,OAAAA,EAAM,UAAY,eAAeJ,CAAI,GACrCI,EAAM,UAAY;AAAA,oCACc,KAAK,WAAWN,CAAO,CAAC;AAAA,QACpDI,EAAS,gDAAgD,KAAK,OAAO,MAAM,KAAK,KAAK,WAAWC,CAAW,CAAC,YAAc,EAAE;AAAA;AAAA,MAIhI,KAAK,UAAU,YAAYC,CAAK,EAGhC,WAAW,IAAM,CACfA,EAAM,UAAU,IAAI,YAAY,CAClC,EAAG,EAAE,EAGDF,GACgBE,EAAM,cAAc,eAAe,EAC3C,iBAAiB,QAAS,IAAM,CACxCF,EAAM,EACN,KAAK,KAAKE,CAAK,CACjB,CAAC,EAIcA,EAAM,cAAc,cAAc,EAC1C,iBAAiB,QAAS,IAAM,CACvC,KAAK,KAAKA,CAAK,CACjB,CAAC,EAGGH,EAAW,GACb,WAAW,IAAM,CACf,KAAK,KAAKG,CAAK,CACjB,EAAGH,CAAQ,EAGb,KAAK,OAAO,KAAK,CAAE,QAASG,EAAO,OAAAF,EAAQ,EACpCE,CACT,CAEA,KAAKA,EAAO,CACLA,IAELA,EAAM,UAAU,OAAO,YAAY,EACnCA,EAAM,UAAU,IAAI,YAAY,EAEhC,WAAW,IAAM,CACXA,EAAM,YACRA,EAAM,WAAW,YAAYA,CAAK,EAEpC,KAAK,OAAS,KAAK,OAAO,OAAQ3C,GAAMA,EAAE,UAAY2C,CAAK,CAC7D,EAAG,GAAG,EACR,CAEA,QAAQN,EAASC,EAAU,GAAI,CAC7B,OAAO,KAAK,KAAKD,EAAS,CAAE,GAAGC,EAAS,KAAM,UAAW,CAC3D,CAEA,MAAMD,EAASC,EAAU,GAAI,CAC3B,OAAO,KAAK,KAAKD,EAAS,CAAE,GAAGC,EAAS,KAAM,QAAS,CACzD,CAEA,KAAKD,EAASC,EAAU,GAAI,CAC1B,OAAO,KAAK,KAAKD,EAAS,CAAE,GAAGC,EAAS,KAAM,OAAQ,CACxD,CAEA,WAAWM,EAAM,CACf,MAAMC,EAAM,SAAS,cAAc,KAAK,EACxC,OAAAA,EAAI,YAAcD,EACXC,EAAI,SACb,CACF,CAGY,MAACF,EAAQ,IAAIP","names":["Store","firebaseCache","cachedState","cached","error","firebaseService","tarefas","rotina","categorias","estudos","config","newState","task","stateToSave","state","batch","allTarefas","t","tarefa","categoria","unsubscribeTarefas","projetos","home","unsubscribeRotina","unsubscribeCategorias","unsubscribeEstudos","unsubscribeConfig","migrateLocalStorageToFirebase","createBackup","__vitePreload","KEY_PROJETOS","KEY_ROTINA","KEY_HISTORICO","KEY_CATEGORIAS","KEY_ESTUDOS","KEY_AVALIACOES","KEY_V3_STATE","hasData","e","historico","estudosData","avaliacoes","v3State","parsed","callback","cb","updates","key","current","item","predicate","unsubscribe","store","Toast","message","options","type","duration","action","actionLabel","toast","text","div"],"ignoreList":[],"sources":["../../src/store.js","../../src/components/Toast.js"],"sourcesContent":["/**\n * Sistema de Estado Global\n * Gerencia estado centralizado com sincronização automática ao Firebase Firestore\n */\n\nimport {\n    firebaseService\n} from './services/firebase-service.js';\nimport {\n    firebaseCache\n} from './services/firebase-cache.js';\nimport {\n    firebaseSync\n} from './services/firebase-sync.js';\n\nclass Store {\n    constructor() {\n        this.state = this.getDefaultState();\n        this.subscribers = [];\n        this.saveDebounce = null;\n        this.DEBOUNCE_DELAY = 300; // ms\n        this.initialized = false;\n        this.initializing = false;\n        this.listeners = []; // Firestore listeners\n        this.userId = 'default'; // Para futuro suporte de autenticação\n\n        // Inicializar assincronamente\n        this.init();\n    }\n\n    /**\n     * Inicialização assíncrona do Firebase\n     */\n    async init() {\n        // Inicializar cache\n        await firebaseCache.init();\n\n        // Carregar estado do cache primeiro (para mostrar algo imediatamente)\n        const cachedState = await this.loadFromCache();\n        if (cachedState) {\n            this.state = {\n                ...this.getDefaultState(),\n                ...cachedState\n            };\n            this.notify();\n        }\n\n        // Tentar carregar do Firestore\n        await this.loadFromFirestore();\n\n        // Executar migração completa do localStorage para Firestore\n        this.runMigration();\n\n        // Configurar listeners em tempo real\n        this.setupRealtimeListeners();\n\n        this.initialized = true;\n        console.log('✅ Store inicializado com Firebase');\n    }\n\n    /**\n     * Estado padrão da aplicação\n     */\n    getDefaultState() {\n        return {\n            // Projetos\n            tarefas: [],\n            contador: 0,\n\n            // Home\n            tarefasHome: [],\n            contadorHome: 0,\n\n            // Rotina\n            tarefasRotina: [],\n            contadorRotina: 0,\n            historico: [],\n            categorias: [],\n\n            // Estudos\n            areasEstudo: [],\n            topicosEstudo: [],\n            sessoesEstudo: [],\n            contadorEstudos: 0,\n            tagsEstudo: [],\n            configEstudos: {\n                revisaoEspacada: {\n                    ativo: true,\n                    intervalos: [7, 15, 30],\n                },\n                notificacoes: true,\n                viewPadrao: 'kanban',\n            },\n\n            // Gamificação\n            streak: 0,\n            conquistas: {},\n            avaliacoesDiarias: [],\n\n            // UI\n            darkMode: false,\n            filtroStatus: null,\n            diaAtual: new Date().toISOString().split('T')[0],\n\n            // Meta\n            ultimaAtualizacao: new Date().toISOString(),\n        };\n    }\n\n    /**\n     * Carrega estado do cache local\n     */\n    async loadFromCache() {\n        try {\n            const cached = await firebaseCache.get('store-state');\n            if (cached && typeof cached === 'object') {\n                return {\n                    ...this.getDefaultState(),\n                    ...cached\n                };\n            }\n        } catch (error) {\n            console.warn('Erro ao carregar estado do cache:', error);\n        }\n        return null;\n    }\n\n    /**\n     * Carrega estado do Firestore\n     */\n    async loadFromFirestore() {\n        try {\n            if (!firebaseService.isAvailable()) {\n                console.warn('Firestore não disponível, usando cache apenas');\n                return;\n            }\n\n            // Carregar dados de diferentes coleções\n            const [tarefas, rotina, categorias, estudos, config] = await Promise.all([\n                firebaseService.getCollection('tarefas'),\n                firebaseService.getDocument('rotina', this.userId),\n                firebaseService.getCollection('categorias'),\n                firebaseService.getDocument('estudos', this.userId),\n                firebaseService.getDocument('config', this.userId),\n            ]);\n\n            // Montar estado a partir dos dados do Firestore\n            const newState = {\n                ...this.getDefaultState(),\n            };\n\n            // Tarefas (projetos e home)\n            if (Array.isArray(tarefas)) {\n                tarefas.forEach(task => {\n                    if (task.tipo === 'projeto') {\n                        newState.tarefas.push(task);\n                    } else if (task.tipo === 'home') {\n                        newState.tarefasHome.push(task);\n                    }\n                });\n                newState.contador = newState.tarefas.length;\n                newState.contadorHome = newState.tarefasHome.length;\n            }\n\n            // Rotina\n            if (rotina) {\n                newState.tarefasRotina = rotina.tarefasRotina || [];\n                newState.contadorRotina = rotina.contadorRotina || 0;\n                newState.historico = rotina.historico || [];\n            }\n\n            // Categorias\n            if (Array.isArray(categorias)) {\n                newState.categorias = categorias;\n            }\n\n            // Estudos\n            if (estudos) {\n                newState.areasEstudo = estudos.areasEstudo || [];\n                newState.topicosEstudo = estudos.topicosEstudo || [];\n                newState.sessoesEstudo = estudos.sessoesEstudo || [];\n                newState.contadorEstudos = estudos.contadorEstudos || 0;\n                newState.tagsEstudo = estudos.tagsEstudo || [];\n                if (estudos.configEstudos) {\n                    newState.configEstudos = {\n                        ...newState.configEstudos,\n                        ...estudos.configEstudos\n                    };\n                }\n            }\n\n            // Config\n            if (config) {\n                newState.streak = config.streak || 0;\n                newState.conquistas = config.conquistas || {};\n                newState.avaliacoesDiarias = config.avaliacoesDiarias || [];\n                newState.darkMode = config.darkMode || false;\n                newState.filtroStatus = config.filtroStatus || null;\n                if (config.diaAtual) {\n                    newState.diaAtual = config.diaAtual;\n                }\n                if (config.ultimaAtualizacao) {\n                    newState.ultimaAtualizacao = config.ultimaAtualizacao;\n                }\n            }\n\n            // Atualizar estado\n            this.state = newState;\n            await firebaseCache.set('store-state', newState);\n            this.notify();\n        } catch (error) {\n            console.error('Erro ao carregar estado do Firestore:', error);\n        }\n    }\n\n    /**\n     * Salva estado no Firestore com debounce\n     */\n    saveToFirestore() {\n        if (this.saveDebounce) {\n            clearTimeout(this.saveDebounce);\n        }\n\n        this.saveDebounce = setTimeout(async () => {\n            try {\n                const stateToSave = {\n                    ...this.state,\n                    ultimaAtualizacao: new Date().toISOString(),\n                };\n\n                // Salvar no cache imediatamente\n                await firebaseCache.set('store-state', stateToSave);\n\n                // Organizar dados em coleções do Firestore\n                if (firebaseService.isAvailable()) {\n                    await this._saveCollectionsToFirestore(stateToSave);\n                }\n            } catch (error) {\n                console.error('Erro ao salvar estado no Firestore:', error);\n            }\n        }, this.DEBOUNCE_DELAY);\n    }\n\n    /**\n     * Salva estado organizado em coleções do Firestore\n     */\n    async _saveCollectionsToFirestore(state) {\n        try {\n            const batch = [];\n\n            // Tarefas (projetos e home)\n            const allTarefas = [\n                ...state.tarefas.map(t => ({\n                    ...t,\n                    tipo: 'projeto'\n                })),\n                ...state.tarefasHome.map(t => ({\n                    ...t,\n                    tipo: 'home'\n                }))\n            ];\n\n            // Limpar tarefas antigas e salvar novas\n            // Nota: Em produção, seria melhor atualizar apenas os documentos modificados\n            for (const tarefa of allTarefas) {\n                if (tarefa.id) {\n                    batch.push({\n                        type: 'set',\n                        collection: 'tarefas',\n                        docId: tarefa.id,\n                        data: tarefa,\n                        merge: true,\n                    });\n                }\n            }\n\n            // Rotina\n            batch.push({\n                type: 'set',\n                collection: 'rotina',\n                docId: this.userId,\n                data: {\n                    tarefasRotina: state.tarefasRotina,\n                    contadorRotina: state.contadorRotina,\n                    historico: state.historico,\n                    updatedAt: new Date().toISOString(),\n                },\n                merge: true,\n            });\n\n            // Categorias\n            for (const categoria of state.categorias) {\n                if (categoria.id) {\n                    batch.push({\n                        type: 'set',\n                        collection: 'categorias',\n                        docId: categoria.id,\n                        data: categoria,\n                        merge: true,\n                    });\n                }\n            }\n\n            // Estudos\n            batch.push({\n                type: 'set',\n                collection: 'estudos',\n                docId: this.userId,\n                data: {\n                    areasEstudo: state.areasEstudo,\n                    topicosEstudo: state.topicosEstudo,\n                    sessoesEstudo: state.sessoesEstudo,\n                    contadorEstudos: state.contadorEstudos,\n                    tagsEstudo: state.tagsEstudo,\n                    configEstudos: state.configEstudos,\n                    updatedAt: new Date().toISOString(),\n                },\n                merge: true,\n            });\n\n            // Config\n            batch.push({\n                type: 'set',\n                collection: 'config',\n                docId: this.userId,\n                data: {\n                    streak: state.streak,\n                    conquistas: state.conquistas,\n                    avaliacoesDiarias: state.avaliacoesDiarias,\n                    darkMode: state.darkMode,\n                    filtroStatus: state.filtroStatus,\n                    diaAtual: state.diaAtual,\n                    ultimaAtualizacao: state.ultimaAtualizacao,\n                    updatedAt: new Date().toISOString(),\n                },\n                merge: true,\n            });\n\n            // Executar batch write\n            if (batch.length > 0) {\n                await firebaseService.batchWrite(batch);\n            }\n        } catch (error) {\n            console.error('Erro ao salvar coleções no Firestore:', error);\n            throw error;\n        }\n    }\n\n    /**\n     * Configura listeners em tempo real do Firestore\n     */\n    setupRealtimeListeners() {\n        if (!firebaseService.isAvailable()) {\n            return;\n        }\n\n        // Listener para tarefas\n        const unsubscribeTarefas = firebaseService.subscribeToCollection('tarefas', (tarefas) => {\n            const projetos = tarefas.filter(t => t.tipo === 'projeto');\n            const home = tarefas.filter(t => t.tipo === 'home');\n\n            this.state.tarefas = projetos;\n            this.state.tarefasHome = home;\n            this.state.contador = projetos.length;\n            this.state.contadorHome = home.length;\n            this.notify();\n        });\n        this.listeners.push(unsubscribeTarefas);\n\n        // Listener para rotina\n        const unsubscribeRotina = firebaseService.subscribeToDocument('rotina', this.userId, (rotina) => {\n            if (rotina) {\n                this.state.tarefasRotina = rotina.tarefasRotina || [];\n                this.state.contadorRotina = rotina.contadorRotina || 0;\n                this.state.historico = rotina.historico || [];\n                this.notify();\n            }\n        });\n        this.listeners.push(unsubscribeRotina);\n\n        // Listener para categorias\n        const unsubscribeCategorias = firebaseService.subscribeToCollection('categorias', (categorias) => {\n            this.state.categorias = categorias;\n            this.notify();\n        });\n        this.listeners.push(unsubscribeCategorias);\n\n        // Listener para estudos\n        const unsubscribeEstudos = firebaseService.subscribeToDocument('estudos', this.userId, (estudos) => {\n            if (estudos) {\n                this.state.areasEstudo = estudos.areasEstudo || [];\n                this.state.topicosEstudo = estudos.topicosEstudo || [];\n                this.state.sessoesEstudo = estudos.sessoesEstudo || [];\n                this.state.contadorEstudos = estudos.contadorEstudos || 0;\n                this.state.tagsEstudo = estudos.tagsEstudo || [];\n                if (estudos.configEstudos) {\n                    this.state.configEstudos = {\n                        ...this.state.configEstudos,\n                        ...estudos.configEstudos\n                    };\n                }\n                this.notify();\n            }\n        });\n        this.listeners.push(unsubscribeEstudos);\n\n        // Listener para config\n        const unsubscribeConfig = firebaseService.subscribeToDocument('config', this.userId, (config) => {\n            if (config) {\n                this.state.streak = config.streak || 0;\n                this.state.conquistas = config.conquistas || {};\n                this.state.avaliacoesDiarias = config.avaliacoesDiarias || [];\n                this.state.darkMode = config.darkMode || false;\n                this.state.filtroStatus = config.filtroStatus || null;\n                if (config.diaAtual) {\n                    this.state.diaAtual = config.diaAtual;\n                }\n                if (config.ultimaAtualizacao) {\n                    this.state.ultimaAtualizacao = config.ultimaAtualizacao;\n                }\n                this.notify();\n            }\n        });\n        this.listeners.push(unsubscribeConfig);\n    }\n\n    /**\n     * Executa migração completa do localStorage para Firestore\n     */\n    async runMigration() {\n        try {\n            // Importar script de migração dinamicamente\n            const {\n                migrateLocalStorageToFirebase,\n                createBackup\n            } = await import('./utils/migrate-localStorage-to-firebase.js');\n\n            // Criar backup primeiro\n            await createBackup();\n\n            // Executar migração\n            await migrateLocalStorageToFirebase();\n        } catch (error) {\n            console.error('Erro ao executar migração:', error);\n            // Continuar com migração v2 se disponível\n            this.migrateFromV2();\n        }\n    }\n\n    /**\n     * Migração de dados v2 → v3 (do localStorage)\n     * Mantido para compatibilidade, mas será executado apenas uma vez\n     */\n    async migrateFromV2() {\n        try {\n            // Verificar se já migrou para Firestore\n            const migrated = await firebaseCache.get('firestore-migrated');\n            if (migrated) {\n                return;\n            }\n\n            // Chaves do v2 no localStorage\n            const KEY_PROJETOS = 'tarefas_projetos_v2';\n            const KEY_ROTINA = 'tarefas_rotina_v5';\n            const KEY_HISTORICO = 'historico_rotina_v5';\n            const KEY_CATEGORIAS = 'categorias_rotina_v4';\n            const KEY_ESTUDOS = 'estudos_dados_v2';\n            const KEY_AVALIACOES = 'avaliacoes_diarias_v1';\n            const KEY_V3_STATE = 'gerenciador_v3_state';\n\n            let hasData = false;\n\n            // Migrar projetos\n            const projetos = localStorage.getItem(KEY_PROJETOS);\n            if (projetos) {\n                try {\n                    this.state.tarefas = JSON.parse(projetos);\n                    hasData = true;\n                } catch (e) {\n                    console.warn('Erro ao migrar projetos:', e);\n                }\n            }\n\n            // Migrar rotina\n            const rotina = localStorage.getItem(KEY_ROTINA);\n            if (rotina) {\n                try {\n                    this.state.tarefasRotina = JSON.parse(rotina);\n                    hasData = true;\n                } catch (e) {\n                    console.warn('Erro ao migrar rotina:', e);\n                }\n            }\n\n            // Migrar histórico\n            const historico = localStorage.getItem(KEY_HISTORICO);\n            if (historico) {\n                try {\n                    this.state.historico = JSON.parse(historico);\n                    hasData = true;\n                } catch (e) {\n                    console.warn('Erro ao migrar histórico:', e);\n                }\n            }\n\n            // Migrar categorias\n            const categorias = localStorage.getItem(KEY_CATEGORIAS);\n            if (categorias) {\n                try {\n                    this.state.categorias = JSON.parse(categorias);\n                    hasData = true;\n                } catch (e) {\n                    console.warn('Erro ao migrar categorias:', e);\n                }\n            }\n\n            // Migrar estudos\n            const estudos = localStorage.getItem(KEY_ESTUDOS);\n            if (estudos) {\n                try {\n                    const estudosData = JSON.parse(estudos);\n                    this.state.areasEstudo = estudosData.areas || [];\n                    this.state.topicosEstudo = estudosData.topicos || [];\n                    this.state.sessoesEstudo = estudosData.sessoes || [];\n                    this.state.tagsEstudo = estudosData.tags || [];\n                    if (estudosData.config) {\n                        this.state.configEstudos = {\n                            ...this.state.configEstudos,\n                            ...estudosData.config\n                        };\n                    }\n                    hasData = true;\n                } catch (e) {\n                    console.warn('Erro ao migrar estudos:', e);\n                }\n            }\n\n            // Migrar avaliações\n            const avaliacoes = localStorage.getItem(KEY_AVALIACOES);\n            if (avaliacoes) {\n                try {\n                    this.state.avaliacoesDiarias = JSON.parse(avaliacoes);\n                    hasData = true;\n                } catch (e) {\n                    console.warn('Erro ao migrar avaliações:', e);\n                }\n            }\n\n            // Tentar migrar estado v3 completo\n            const v3State = localStorage.getItem(KEY_V3_STATE);\n            if (v3State) {\n                try {\n                    const parsed = JSON.parse(v3State);\n                    this.state = {\n                        ...this.state,\n                        ...parsed\n                    };\n                    hasData = true;\n                } catch (e) {\n                    console.warn('Erro ao migrar estado v3:', e);\n                }\n            }\n\n            // Se houver dados migrados, salvar no Firestore\n            if (hasData) {\n                await this.saveToFirestore();\n                // Forçar salvamento imediato\n                if (this.saveDebounce) {\n                    clearTimeout(this.saveDebounce);\n                }\n                await this._saveCollectionsToFirestore(this.state);\n            }\n\n            // Marcar como migrado\n            await firebaseCache.set('firestore-migrated', true);\n\n            if (hasData) {\n                console.log('✅ Migração v2/v3 → Firestore concluída');\n                this.notify();\n            }\n        } catch (error) {\n            console.error('Erro na migração:', error);\n        }\n    }\n\n    /**\n     * Inscreve callback para mudanças de estado\n     */\n    subscribe(callback) {\n        this.subscribers.push(callback);\n        // Retorna função para desinscrever\n        return () => {\n            this.subscribers = this.subscribers.filter((cb) => cb !== callback);\n        };\n    }\n\n    /**\n     * Notifica todos os subscribers\n     */\n    notify() {\n        this.subscribers.forEach((callback) => {\n            try {\n                callback(this.state);\n            } catch (error) {\n                console.error('Erro ao notificar subscriber:', error);\n            }\n        });\n    }\n\n    /**\n     * Atualiza estado e notifica subscribers\n     */\n    setState(updates) {\n        this.state = {\n            ...this.state,\n            ...updates\n        };\n        this.saveToFirestore();\n        this.notify();\n    }\n\n    /**\n     * Retorna estado atual\n     */\n    getState() {\n        return {\n            ...this.state\n        };\n    }\n\n    /**\n     * Retorna parte específica do estado\n     */\n    getStateSlice(key) {\n        return this.state[key];\n    }\n\n    /**\n     * Atualiza parte específica do estado (merge)\n     */\n    updateStateSlice(key, updates) {\n        const current = this.state[key];\n        if (Array.isArray(current)) {\n            this.setState({\n                [key]: [...current, ...updates]\n            });\n        } else if (typeof current === 'object' && current !== null) {\n            this.setState({\n                [key]: {\n                    ...current,\n                    ...updates\n                }\n            });\n        } else {\n            this.setState({\n                [key]: updates\n            });\n        }\n    }\n\n    /**\n     * Adiciona item a uma lista no estado\n     */\n    addItem(key, item) {\n        const current = this.state[key];\n        if (Array.isArray(current)) {\n            this.setState({\n                [key]: [...current, item]\n            });\n        }\n    }\n\n    /**\n     * Remove item de uma lista no estado\n     */\n    removeItem(key, predicate) {\n        const current = this.state[key];\n        if (Array.isArray(current)) {\n            this.setState({\n                [key]: current.filter((item) => !predicate(item))\n            });\n        }\n    }\n\n    /**\n     * Atualiza item em uma lista no estado\n     */\n    updateItem(key, predicate, updates) {\n        const current = this.state[key];\n        if (Array.isArray(current)) {\n            this.setState({\n                [key]: current.map((item) => (predicate(item) ? {\n                    ...item,\n                    ...updates\n                } : item)),\n            });\n        }\n    }\n\n    /**\n     * Força salvamento imediato (sem debounce)\n     */\n    async forceSave() {\n        if (this.saveDebounce) {\n            clearTimeout(this.saveDebounce);\n        }\n        try {\n            const stateToSave = {\n                ...this.state,\n                ultimaAtualizacao: new Date().toISOString(),\n            };\n            await firebaseCache.set('store-state', stateToSave);\n            if (firebaseService.isAvailable()) {\n                await this._saveCollectionsToFirestore(stateToSave);\n            }\n        } catch (error) {\n            console.error('Erro ao forçar salvamento:', error);\n        }\n    }\n\n    /**\n     * Limpa todos os listeners\n     */\n    destroy() {\n        this.listeners.forEach(unsubscribe => unsubscribe());\n        this.listeners = [];\n    }\n}\n\n// Exportar instância singleton\nexport const store = new Store();\nexport default store;","/**\n * Sistema de Toast/Notificações\n * Toast para feedback de ações (ex: desfazer)\n */\n\nexport class Toast {\n  constructor() {\n    this.toasts = [];\n    this.container = null;\n    this.init();\n  }\n\n  init() {\n    this.container = document.createElement('div');\n    this.container.className = 'toast-container';\n    this.container.id = 'toast-container';\n    document.body.appendChild(this.container);\n  }\n\n  show(message, options = {}) {\n    const {\n      type = 'info',\n      duration = 5000,\n      action = null,\n      actionLabel = 'Desfazer',\n    } = options;\n\n    const toast = document.createElement('div');\n    toast.className = `toast toast-${type}`;\n    toast.innerHTML = `\n      <span class=\"toast-message\">${this.escapeHtml(message)}</span>\n      ${action ? `<button class=\"toast-action\" data-action-id=\"${this.toasts.length}\">${this.escapeHtml(actionLabel)}</button>` : ''}\n      <button class=\"toast-close\" aria-label=\"Fechar\">×</button>\n    `;\n\n    this.container.appendChild(toast);\n\n    // Trigger animation\n    setTimeout(() => {\n      toast.classList.add('toast-show');\n    }, 10);\n\n    // Action handler\n    if (action) {\n      const actionBtn = toast.querySelector('.toast-action');\n      actionBtn.addEventListener('click', () => {\n        action();\n        this.hide(toast);\n      });\n    }\n\n    // Close handler\n    const closeBtn = toast.querySelector('.toast-close');\n    closeBtn.addEventListener('click', () => {\n      this.hide(toast);\n    });\n\n    // Auto hide\n    if (duration > 0) {\n      setTimeout(() => {\n        this.hide(toast);\n      }, duration);\n    }\n\n    this.toasts.push({ element: toast, action });\n    return toast;\n  }\n\n  hide(toast) {\n    if (!toast) return;\n\n    toast.classList.remove('toast-show');\n    toast.classList.add('toast-hide');\n\n    setTimeout(() => {\n      if (toast.parentNode) {\n        toast.parentNode.removeChild(toast);\n      }\n      this.toasts = this.toasts.filter((t) => t.element !== toast);\n    }, 300);\n  }\n\n  success(message, options = {}) {\n    return this.show(message, { ...options, type: 'success' });\n  }\n\n  error(message, options = {}) {\n    return this.show(message, { ...options, type: 'error' });\n  }\n\n  info(message, options = {}) {\n    return this.show(message, { ...options, type: 'info' });\n  }\n\n  escapeHtml(text) {\n    const div = document.createElement('div');\n    div.textContent = text;\n    return div.innerHTML;\n  }\n}\n\n// Singleton\nexport const toast = new Toast();\n\n"],"file":"assets/Toast-BwAp5p2A.js"}