class d{constructor(t={}){this.duration=t.duration||25*60,this.shortBreak=t.shortBreak||5*60,this.longBreak=t.longBreak||15*60,this.autoSaveInterval=t.autoSaveInterval||5*60,this.timeRemaining=this.duration,this.isRunning=!1,this.isPaused=!1,this.mode="work",this.pomodorosCompleted=0,this.intervalId=null,this.autoSaveId=null,this.startTime=null,this.pausedTime=0,this.onTick=t.onTick||(()=>{}),this.onComplete=t.onComplete||(()=>{}),this.onAutoSave=t.onAutoSave||(()=>{}),this._createUI(),this._attachEvents()}_createUI(){this.container=document.createElement("div"),this.container.className="pomodoro-timer",this.container.innerHTML=`
            <div class="pomodoro-container">
                <div class="pomodoro-display">
                    <div class="pomodoro-time" id="pomodoroTime">25:00</div>
                    <div class="pomodoro-mode" id="pomodoroMode">Trabalho</div>
                </div>
                
                <div class="pomodoro-controls">
                    <button class="pomodoro-btn" id="pomodoroStart">‚ñ∂Ô∏è Iniciar</button>
                    <button class="pomodoro-btn" id="pomodoroPause" style="display:none">‚è∏Ô∏è Pausar</button>
                    <button class="pomodoro-btn" id="pomodoroReset">üîÑ Resetar</button>
                    <button class="pomodoro-btn" id="pomodoroSkip">‚è≠Ô∏è Pular</button>
                </div>
                
                <div class="pomodoro-settings">
                    <label>
                        Dura√ß√£o (min):
                        <input type="number" id="pomodoroDuration" value="25" min="1" max="60">
                    </label>
                    <button class="pomodoro-btn-small" id="pomodoroFocusMode">üéØ Modo Foco</button>
                </div>
                
                <div class="pomodoro-stats">
                    <div class="pomodoro-stat">
                        <span class="pomodoro-stat-label">Pomodoros:</span>
                        <span class="pomodoro-stat-value" id="pomodoroCount">0</span>
                    </div>
                </div>
            </div>
        `}_attachEvents(){const t=this.container.querySelector("#pomodoroStart"),o=this.container.querySelector("#pomodoroPause"),e=this.container.querySelector("#pomodoroReset"),s=this.container.querySelector("#pomodoroSkip"),n=this.container.querySelector("#pomodoroFocusMode"),a=this.container.querySelector("#pomodoroDuration");t.addEventListener("click",()=>this.start()),o.addEventListener("click",()=>this.pause()),e.addEventListener("click",()=>this.reset()),s.addEventListener("click",()=>this.skip()),n.addEventListener("click",()=>this.toggleFocusMode()),a.addEventListener("change",r=>{const i=parseInt(r.target.value);i>0&&i<=60&&this.setDuration(i*60)})}start(){this.isRunning||(this.isRunning=!0,this.isPaused=!1,this.startTime=Date.now()-this.pausedTime,this.intervalId=setInterval(()=>{this._tick()},1e3),this.autoSaveId=setInterval(()=>{this._autoSave()},this.autoSaveInterval*1e3),this._updateUI(),this._tick())}pause(){!this.isRunning||this.isPaused||(this.isPaused=!0,this.pausedTime=Date.now()-this.startTime,this.intervalId&&(clearInterval(this.intervalId),this.intervalId=null),this._updateUI())}resume(){this.isPaused&&(this.isPaused=!1,this.startTime=Date.now()-this.pausedTime,this.intervalId=setInterval(()=>{this._tick()},1e3),this._updateUI())}reset(){this.stop(),this.timeRemaining=this.duration,this.pausedTime=0,this._updateUI()}stop(){this.isRunning=!1,this.isPaused=!1,this.intervalId&&(clearInterval(this.intervalId),this.intervalId=null),this.autoSaveId&&(clearInterval(this.autoSaveId),this.autoSaveId=null),this.startTime=null,this.pausedTime=0}skip(){this.stop(),this.mode==="work"?(this.pomodorosCompleted++,this.pomodorosCompleted%4===0?(this.mode="longBreak",this.timeRemaining=this.longBreak):(this.mode="shortBreak",this.timeRemaining=this.shortBreak)):(this.mode="work",this.timeRemaining=this.duration),this._updateUI()}_tick(){if(!this.isRunning||this.isPaused)return;const t=Math.floor((Date.now()-this.startTime)/1e3);this.timeRemaining=Math.max(0,this.duration-t),this._updateUI(),this.onTick(this.timeRemaining,this.mode),this.timeRemaining<=0&&this._complete()}_complete(){this.stop(),this.mode==="work"&&this.pomodorosCompleted++,this._playSound(),this.onComplete(this.mode,this.pomodorosCompleted),this._updateUI()}_autoSave(){if(!this.isRunning||this.isPaused)return;const t=Math.floor((Date.now()-this.startTime)/1e3),o={timeRemaining:this.timeRemaining,elapsed:t,mode:this.mode,timestamp:new Date().toISOString()};this.onAutoSave(o)}_updateUI(){const t=this.container.querySelector("#pomodoroTime"),o=this.container.querySelector("#pomodoroMode"),e=this.container.querySelector("#pomodoroStart"),s=this.container.querySelector("#pomodoroPause"),n=this.container.querySelector("#pomodoroCount"),a=Math.floor(this.timeRemaining/60),r=this.timeRemaining%60;t.textContent=`${String(a).padStart(2,"0")}:${String(r).padStart(2,"0")}`;const i={work:"Trabalho",shortBreak:"Pausa Curta",longBreak:"Pausa Longa"};o.textContent=i[this.mode]||"Trabalho",this.isRunning&&!this.isPaused?(e.style.display="none",s.style.display="inline-block"):(e.style.display="inline-block",s.style.display="none"),n.textContent=this.pomodorosCompleted,t.classList.toggle("warning",this.timeRemaining<60)}toggleFocusMode(){const t=document.body.classList.toggle("focus-mode"),o=this.container.querySelector("#pomodoroFocusMode");o.textContent=t?"üëÅÔ∏è Sair do Foco":"üéØ Modo Foco"}setDuration(t){if(this.isRunning){console.warn("N√£o √© poss√≠vel alterar dura√ß√£o enquanto o timer est√° rodando");return}this.duration=t,this.timeRemaining=t,this._updateUI()}_playSound(){try{const t=new(window.AudioContext||window.webkitAudioContext),o=t.createOscillator(),e=t.createGain();o.connect(e),e.connect(t.destination),o.frequency.value=800,o.type="sine",e.gain.setValueAtTime(.3,t.currentTime),e.gain.exponentialRampToValueAtTime(.01,t.currentTime+.5),o.start(t.currentTime),o.stop(t.currentTime+.5)}catch(t){console.warn("N√£o foi poss√≠vel tocar som",t)}}getElement(){return this.container}destroy(){this.stop(),this.container&&this.container.parentNode&&this.container.parentNode.removeChild(this.container)}}typeof module<"u"&&module.exports&&(module.exports=d);export{d as PomodoroTimer,d as default};
//# sourceMappingURL=PomodoroTimer-CWgRpmEF.js.map
