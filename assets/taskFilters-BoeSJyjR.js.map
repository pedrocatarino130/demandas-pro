{"version":3,"file":"taskFilters-BoeSJyjR.js","sources":["../../src/utils/taskFilters.js"],"sourcesContent":["/**\n * Filtros e utilitários para tarefas\n */\n\nimport { addHoursToDate, isFuture, isPast, getDaysOverdue, toDate } from './dateUtils.js';\n\n/**\n * Filtra tarefas das próximas N horas\n */\nexport function getUpcomingTasks(tasks, hoursAhead = 2) {\n  if (!tasks || !Array.isArray(tasks)) return [];\n\n  const now = new Date();\n  const limit = addHoursToDate(now, hoursAhead);\n\n  return tasks\n    .filter((task) => {\n      if (task.completed) return false;\n      if (!task.time) return false;\n\n      const taskTime = toDate(task.time);\n      if (!taskTime) return false;\n\n      return taskTime >= now && taskTime <= limit;\n    })\n    .sort((a, b) => {\n      const timeA = toDate(a.time);\n      const timeB = toDate(b.time);\n      if (!timeA || !timeB) return 0;\n      return timeA - timeB;\n    });\n}\n\n/**\n * Filtra tarefas atrasadas\n */\nexport function getOverdueTasks(tasks) {\n  if (!tasks || !Array.isArray(tasks)) return [];\n\n  const now = new Date();\n\n  return tasks\n    .filter((task) => {\n      if (task.completed) return false;\n      if (!task.time && !task.deadline) return false;\n\n      const taskDate = toDate(task.time || task.deadline);\n      if (!taskDate) return false;\n\n      return taskDate < now;\n    })\n    .map((task) => {\n      const taskDate = toDate(task.time || task.deadline);\n      return {\n        ...task,\n        daysOverdue: getDaysOverdue(taskDate),\n      };\n    })\n    .sort((a, b) => {\n      // Ordenar por prioridade primeiro, depois por dias de atraso\n      const priorityOrder = { urgente: 4, alta: 3, media: 2, baixa: 1 };\n      const priorityA = priorityOrder[a.prioridade?.toLowerCase()] || 0;\n      const priorityB = priorityOrder[b.prioridade?.toLowerCase()] || 0;\n\n      if (priorityA !== priorityB) {\n        return priorityB - priorityA;\n      }\n\n      return b.daysOverdue - a.daysOverdue;\n    });\n}\n\n/**\n * Filtra tarefas concluídas hoje\n */\nexport function getTasksCompletedToday(tasks) {\n  if (!tasks || !Array.isArray(tasks)) return [];\n\n  const today = new Date();\n  today.setHours(0, 0, 0, 0);\n\n  return tasks.filter((task) => {\n    if (!task.completed || !task.completedAt) return false;\n\n    const completedDate = toDate(task.completedAt);\n    if (!completedDate) return false;\n\n    completedDate.setHours(0, 0, 0, 0);\n    return completedDate.getTime() === today.getTime();\n  });\n}\n\n/**\n * Calcula total de tarefas do dia\n */\nexport function getTotalTasksToday(tasks) {\n  if (!tasks || !Array.isArray(tasks)) return 0;\n\n  const today = new Date();\n  today.setHours(0, 0, 0, 0);\n\n  return tasks.filter((task) => {\n    if (task.completed) return false;\n    if (!task.time) return false;\n\n    const taskDate = toDate(task.time);\n    if (!taskDate) return false;\n\n    taskDate.setHours(0, 0, 0, 0);\n    return taskDate.getTime() === today.getTime();\n  }).length;\n}\n\n/**\n * Filtra todas as tarefas concluídas\n * Retorna tarefas com completed: true, ordenadas por data de conclusão (mais recentes primeiro)\n */\nexport function getCompletedTasks(tasks) {\n  if (!tasks || !Array.isArray(tasks)) return [];\n\n  return tasks\n    .filter((task) => task.completed === true)\n    .map((task) => {\n      const completedDate = toDate(task.completedAt);\n      return {\n        ...task,\n        completedDate: completedDate || new Date(0),\n      };\n    })\n    .sort((a, b) => {\n      // Ordenar por data de conclusão (mais recentes primeiro)\n      return b.completedDate - a.completedDate;\n    });\n}\n\n/**\n * Filtra tarefas adiadas (com horário futuro além das próximas 2 horas)\n * Retorna tarefas não completas com time no futuro além das próximas 2 horas, ordenadas por data/hora\n */\nexport function getPostponedTasks(tasks) {\n  if (!tasks || !Array.isArray(tasks)) return [];\n\n  const now = new Date();\n  const twoHoursFromNow = addHoursToDate(now, 2);\n\n  return tasks\n    .filter((task) => {\n      if (task.completed) return false;\n      if (!task.time) return false;\n\n      const taskTime = toDate(task.time);\n      if (!taskTime) return false;\n\n      // Tarefas com horário no futuro além das próximas 2 horas\n      return taskTime > twoHoursFromNow;\n    })\n    .sort((a, b) => {\n      const timeA = toDate(a.time);\n      const timeB = toDate(b.time);\n      if (!timeA || !timeB) return 0;\n      return timeA - timeB; // Ordenar por data/hora (ascendente)\n    });\n}\n\n/**\n * Combina tarefas de rotina e projetos\n */\nexport function combineTasks(rotinaTasks = [], projetoTasks = []) {\n  return [...rotinaTasks, ...projetoTasks];\n}\n\n"],"names":["getOverdueTasks","tasks","now","task","taskDate","toDate","getDaysOverdue","a","b","priorityOrder","priorityA","_a","priorityB","_b","getCompletedTasks","completedDate","getPostponedTasks","twoHoursFromNow","addHoursToDate","taskTime","timeA","timeB"],"mappings":"yDAoCO,SAASA,EAAgBC,EAAO,CACrC,GAAI,CAACA,GAAS,CAAC,MAAM,QAAQA,CAAK,EAAG,MAAO,CAAA,EAE5C,MAAMC,EAAM,IAAI,KAEhB,OAAOD,EACJ,OAAQE,GAAS,CAEhB,GADIA,EAAK,WACL,CAACA,EAAK,MAAQ,CAACA,EAAK,SAAU,MAAO,GAEzC,MAAMC,EAAWC,EAAOF,EAAK,MAAQA,EAAK,QAAQ,EAClD,OAAKC,EAEEA,EAAWF,EAFI,EAGxB,CAAC,EACA,IAAKC,GAAS,CACb,MAAMC,EAAWC,EAAOF,EAAK,MAAQA,EAAK,QAAQ,EAClD,MAAO,CACL,GAAGA,EACH,YAAaG,EAAeF,CAAQ,CAC5C,CACI,CAAC,EACA,KAAK,CAACG,EAAGC,IAAM,SAEd,MAAMC,EAAgB,CAAE,QAAS,EAAG,KAAM,EAAG,MAAO,EAAG,MAAO,CAAC,EACzDC,EAAYD,GAAcE,EAAAJ,EAAE,aAAF,YAAAI,EAAc,aAAa,GAAK,EAC1DC,EAAYH,GAAcI,EAAAL,EAAE,aAAF,YAAAK,EAAc,aAAa,GAAK,EAEhE,OAAIH,IAAcE,EACTA,EAAYF,EAGdF,EAAE,YAAcD,EAAE,WAC3B,CAAC,CACL,CA+CO,SAASO,EAAkBb,EAAO,CACvC,MAAI,CAACA,GAAS,CAAC,MAAM,QAAQA,CAAK,EAAU,CAAA,EAErCA,EACJ,OAAQE,GAASA,EAAK,YAAc,EAAI,EACxC,IAAKA,GAAS,CACb,MAAMY,EAAgBV,EAAOF,EAAK,WAAW,EAC7C,MAAO,CACL,GAAGA,EACH,cAAeY,GAAiB,IAAI,KAAK,CAAC,CAClD,CACI,CAAC,EACA,KAAK,CAACR,EAAGC,IAEDA,EAAE,cAAgBD,EAAE,aAC5B,CACL,CAMO,SAASS,EAAkBf,EAAO,CACvC,GAAI,CAACA,GAAS,CAAC,MAAM,QAAQA,CAAK,EAAG,MAAO,CAAA,EAG5C,MAAMgB,EAAkBC,EADZ,IAAI,KAC4B,CAAC,EAE7C,OAAOjB,EACJ,OAAQE,GAAS,CAEhB,GADIA,EAAK,WACL,CAACA,EAAK,KAAM,MAAO,GAEvB,MAAMgB,EAAWd,EAAOF,EAAK,IAAI,EACjC,OAAKgB,EAGEA,EAAWF,EAHI,EAIxB,CAAC,EACA,KAAK,CAACV,EAAGC,IAAM,CACd,MAAMY,EAAQf,EAAOE,EAAE,IAAI,EACrBc,EAAQhB,EAAOG,EAAE,IAAI,EAC3B,MAAI,CAACY,GAAS,CAACC,EAAc,EACtBD,EAAQC,CACjB,CAAC,CACL"}