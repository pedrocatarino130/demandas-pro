{"version":3,"file":"estudos-store-Cv7SF9pX.js","sources":["../../src/utils/estudos-store.js"],"sourcesContent":["/**\n * EstudosStore - Gerenciamento de estado para mÃ³dulo de Estudos\n * \n * Gerencia Ã¡reas, tÃ³picos e sessÃµes com sincronizaÃ§Ã£o automÃ¡tica no Firebase Firestore\n */\n\nimport {\n    firebaseService\n} from '../services/firebase-service.js';\nimport {\n    firebaseCache\n} from '../services/firebase-cache.js';\n\nclass EstudosStore {\n    constructor() {\n        this.state = {\n            areas: [],\n            topicos: [],\n            contadorAreas: 0,\n            contadorTopicos: 0,\n            versao: 3\n        };\n        this.subscribers = [];\n        this.revisaoEspacada = null; // SerÃ¡ injetado\n        this.userId = 'default';\n        this.initialized = false;\n        this.listeners = [];\n        this.saveDebounce = null;\n        this.DEBOUNCE_DELAY = 300;\n\n        // Inicializar assincronamente\n        this.init();\n    }\n\n    /**\n     * InicializaÃ§Ã£o assÃ­ncrona\n     */\n    async init() {\n        // Carregar do cache primeiro\n        await firebaseCache.init();\n        const cached = await firebaseCache.get('estudos-store-state');\n        if (cached) {\n            this.state = {\n                ...this.state,\n                ...cached\n            };\n            this._notify();\n        }\n\n        // Carregar do Firestore\n        await this._loadFromFirestore();\n\n        // Migrar dados v2 se necessÃ¡rio\n        await this._migrateFromV2();\n\n        // Configurar listeners em tempo real\n        this._setupListeners();\n\n        this.initialized = true;\n        console.log('âœ… EstudosStore inicializado com Firebase');\n    }\n\n    /**\n     * Carrega dados do Firestore\n     */\n    async _loadFromFirestore() {\n        try {\n            if (!firebaseService.isAvailable()) {\n                return;\n            }\n\n            // Carregar estudos do Firestore\n            const estudos = await firebaseService.getDocument('estudos', this.userId);\n\n            if (estudos) {\n                // Estudos jÃ¡ incluem Ã¡reas e tÃ³picos no store principal\n                // Mas vamos manter estrutura prÃ³pria para compatibilidade\n                const areas = estudos.areasEstudo || [];\n                const topicos = estudos.topicosEstudo || [];\n\n                this.state.areas = areas;\n                this.state.topicos = topicos;\n                this.state.contadorAreas = areas.length;\n                this.state.contadorTopicos = topicos.length;\n\n                // Salvar no cache\n                await firebaseCache.set('estudos-store-state', this.state);\n                this._notify();\n            }\n        } catch (error) {\n            console.error('Erro ao carregar estudos do Firestore:', error);\n        }\n    }\n\n    /**\n     * Salva dados no Firestore com debounce\n     */\n    _saveToFirestore() {\n        if (this.saveDebounce) {\n            clearTimeout(this.saveDebounce);\n        }\n\n        this.saveDebounce = setTimeout(async () => {\n            try {\n                // Salvar no cache imediatamente\n                await firebaseCache.set('estudos-store-state', this.state);\n\n                // Salvar no Firestore\n                if (firebaseService.isAvailable()) {\n                    await firebaseService.setDocument('estudos', this.userId, {\n                        areasEstudo: this.state.areas,\n                        topicosEstudo: this.state.topicos,\n                        contadorEstudos: this.state.contadorTopicos,\n                        updatedAt: new Date().toISOString(),\n                    }, true);\n                }\n            } catch (error) {\n                console.error('Erro ao salvar estudos no Firestore:', error);\n            }\n        }, this.DEBOUNCE_DELAY);\n    }\n\n    /**\n     * Configura listeners em tempo real\n     */\n    _setupListeners() {\n        if (!firebaseService.isAvailable()) {\n            return;\n        }\n\n        const unsubscribe = firebaseService.subscribeToDocument('estudos', this.userId, (estudos) => {\n            if (estudos) {\n                const areas = estudos.areasEstudo || [];\n                const topicos = estudos.topicosEstudo || [];\n\n                this.state.areas = areas;\n                this.state.topicos = topicos;\n                this.state.contadorAreas = areas.length;\n                this.state.contadorTopicos = topicos.length;\n\n                // Atualizar cache\n                firebaseCache.set('estudos-store-state', this.state);\n                this._notify();\n            }\n        });\n\n        this.listeners.push(unsubscribe);\n    }\n\n    /**\n     * Migra dados da versÃ£o 2 (se existir)\n     */\n    async _migrateFromV2() {\n        try {\n            // Verificar se jÃ¡ migrou\n            const migrated = await firebaseCache.get('estudos-firestore-migrated');\n            if (migrated) {\n                return;\n            }\n\n            const v2Key = 'estudos_v2';\n            const v2Data = localStorage.getItem(v2Key);\n\n            if (v2Data && this.state.areas.length === 0 && this.state.topicos.length === 0) {\n                const v2 = JSON.parse(v2Data);\n\n                // Migrar Ã¡reas\n                if (v2.areas && Array.isArray(v2.areas)) {\n                    this.state.areas = v2.areas.map(area => ({\n                        id: area.id || `area_${Date.now()}_${Math.random()}`,\n                        nome: area.nome,\n                        descricao: area.descricao || '',\n                        cor: area.cor || '#3b82f6',\n                        icone: area.icone || 'ðŸ“š',\n                        status: area.status || 'ativo',\n                        criadoEm: area.criadoEm || new Date().toISOString()\n                    }));\n                }\n\n                // Migrar tÃ³picos\n                if (v2.topicos && Array.isArray(v2.topicos)) {\n                    this.state.topicos = v2.topicos.map(topico => ({\n                        id: topico.id || `topico_${Date.now()}_${Math.random()}`,\n                        titulo: topico.titulo,\n                        descricao: topico.descricao || '',\n                        areaId: topico.areaId,\n                        status: topico.status || 'NÃ£o iniciado',\n                        prioridade: topico.prioridade || 'MÃ©dia',\n                        tags: topico.tags || [],\n                        tempoEstimado: topico.tempoEstimado || null,\n                        sessoes: topico.sessoes || [],\n                        proximaRevisao: topico.proximaRevisao || null,\n                        ultimaRevisao: topico.ultimaRevisao || null,\n                        historicoRevisoes: topico.historicoRevisoes || [],\n                        concluidoEm: topico.concluidoEm || null,\n                        criadoEm: topico.criadoEm || new Date().toISOString()\n                    }));\n                }\n\n                this.state.contadorAreas = this.state.areas.length;\n                this.state.contadorTopicos = this.state.topicos.length;\n\n                // Salvar no Firestore\n                await this._saveToFirestore();\n                if (this.saveDebounce) {\n                    clearTimeout(this.saveDebounce);\n                }\n                await firebaseService.setDocument('estudos', this.userId, {\n                    areasEstudo: this.state.areas,\n                    topicosEstudo: this.state.topicos,\n                    contadorEstudos: this.state.contadorTopicos,\n                    updatedAt: new Date().toISOString(),\n                }, true);\n\n                // Marcar como migrado\n                await firebaseCache.set('estudos-firestore-migrated', true);\n                this._notify();\n\n                console.log('âœ… MigraÃ§Ã£o de dados v2 concluÃ­da');\n            }\n        } catch (e) {\n            console.warn('Erro na migraÃ§Ã£o v2', e);\n        }\n    }\n\n    /**\n     * Inscreve callback para mudanÃ§as de estado\n     */\n    subscribe(callback) {\n        this.subscribers.push(callback);\n        return () => {\n            this.subscribers = this.subscribers.filter(cb => cb !== callback);\n        };\n    }\n\n    /**\n     * Notifica todos os subscribers\n     */\n    _notify() {\n        this.subscribers.forEach(cb => {\n            try {\n                cb(this.state);\n            } catch (e) {\n                console.error('Erro ao notificar subscriber', e);\n            }\n        });\n    }\n\n    /**\n     * ObtÃ©m todas as Ã¡reas\n     */\n    getAreas() {\n        return [...this.state.areas];\n    }\n\n    /**\n     * ObtÃ©m Ã¡rea por ID\n     */\n    getAreaById(id) {\n        return this.state.areas.find(a => a.id === id);\n    }\n\n    /**\n     * Adiciona uma nova Ã¡rea\n     */\n    addArea(areaData) {\n        const area = {\n            id: `area_${Date.now()}_${Math.random().toString(36).substr(2, 9)}`,\n            nome: areaData.nome,\n            descricao: areaData.descricao || '',\n            cor: areaData.cor || '#3b82f6',\n            icone: areaData.icone || 'ðŸ“š',\n            status: 'ativo',\n            criadoEm: new Date().toISOString()\n        };\n\n        this.state.areas.push(area);\n        this.state.contadorAreas++;\n        this._saveToFirestore();\n        this._notify();\n\n        return area;\n    }\n\n    /**\n     * Atualiza uma Ã¡rea\n     */\n    updateArea(id, updates) {\n        const index = this.state.areas.findIndex(a => a.id === id);\n        if (index >= 0) {\n            this.state.areas[index] = {\n                ...this.state.areas[index],\n                ...updates\n            };\n            this._saveToFirestore();\n            this._notify();\n            return this.state.areas[index];\n        }\n        return null;\n    }\n\n    /**\n     * Remove uma Ã¡rea\n     */\n    removeArea(id) {\n        const index = this.state.areas.findIndex(a => a.id === id);\n        if (index >= 0) {\n            this.state.areas.splice(index, 1);\n            this.state.contadorAreas--;\n            // Atualizar tÃ³picos que referenciam esta Ã¡rea\n            this.state.topicos.forEach(topico => {\n                if (topico.areaId === id) {\n                    topico.areaId = null;\n                }\n            });\n            this._saveToFirestore();\n            this._notify();\n            return true;\n        }\n        return false;\n    }\n\n    /**\n     * ObtÃ©m todos os tÃ³picos\n     */\n    getTopicos() {\n        return [...this.state.topicos];\n    }\n\n    /**\n     * ObtÃ©m tÃ³pico por ID\n     */\n    getTopicoById(id) {\n        return this.state.topicos.find(t => t.id === id);\n    }\n\n    /**\n     * ObtÃ©m tÃ³picos por Ã¡rea\n     */\n    getTopicosByArea(areaId) {\n        return this.state.topicos.filter(t => t.areaId === areaId);\n    }\n\n    /**\n     * Adiciona um novo tÃ³pico\n     */\n    addTopico(topicoData) {\n        const topico = {\n            id: `topico_${Date.now()}_${Math.random().toString(36).substr(2, 9)}`,\n            titulo: topicoData.titulo,\n            descricao: topicoData.descricao || '',\n            areaId: topicoData.areaId || null,\n            status: topicoData.status || 'NÃ£o iniciado',\n            prioridade: topicoData.prioridade || 'MÃ©dia',\n            tags: topicoData.tags || [],\n            tempoEstimado: topicoData.tempoEstimado || null,\n            sessoes: [],\n            proximaRevisao: null,\n            ultimaRevisao: null,\n            historicoRevisoes: [],\n            concluidoEm: null,\n            criadoEm: new Date().toISOString()\n        };\n\n        this.state.topicos.push(topico);\n        this.state.contadorTopicos++;\n        this._saveToFirestore();\n        this._notify();\n\n        return topico;\n    }\n\n    /**\n     * Atualiza um tÃ³pico\n     */\n    updateTopico(id, updates) {\n        const index = this.state.topicos.findIndex(t => t.id === id);\n        if (index >= 0) {\n            const topico = this.state.topicos[index];\n            const updated = {\n                ...topico,\n                ...updates\n            };\n\n            // Se mudou para ConcluÃ­do, agendar revisÃ£o inicial\n            if (updates.status === 'ConcluÃ­do' && topico.status !== 'ConcluÃ­do' && this.revisaoEspacada) {\n                this.revisaoEspacada.agendarRevisaoInicial(updated);\n            }\n\n            this.state.topicos[index] = updated;\n            this._saveToFirestore();\n            this._notify();\n            return updated;\n        }\n        return null;\n    }\n\n    /**\n     * Remove um tÃ³pico\n     */\n    removeTopico(id) {\n        const index = this.state.topicos.findIndex(t => t.id === id);\n        if (index >= 0) {\n            this.state.topicos.splice(index, 1);\n            this.state.contadorTopicos--;\n            this._saveToFirestore();\n            this._notify();\n            return true;\n        }\n        return false;\n    }\n\n    /**\n     * Adiciona uma sessÃ£o de estudo a um tÃ³pico\n     */\n    addSessao(topicoId, sessaoData) {\n        const topico = this.getTopicoById(topicoId);\n        if (!topico) return null;\n\n        const sessao = {\n            id: `sessao_${Date.now()}_${Math.random().toString(36).substr(2, 9)}`,\n            data: sessaoData.data || new Date().toISOString(),\n            duracao: sessaoData.duracao || 0, // em minutos\n            notas: sessaoData.notas || '',\n            tags: sessaoData.tags || [],\n            dificuldade: sessaoData.dificuldade || 3,\n            recursos: sessaoData.recursos || []\n        };\n\n        if (!topico.sessoes) {\n            topico.sessoes = [];\n        }\n\n        topico.sessoes.push(sessao);\n\n        // Se concluiu o estudo, atualizar status\n        if (sessaoData.concluiu) {\n            topico.status = 'ConcluÃ­do';\n            topico.concluidoEm = sessao.data;\n\n            // Agendar revisÃ£o inicial se tiver revisaoEspacada\n            if (this.revisaoEspacada) {\n                this.revisaoEspacada.agendarRevisaoInicial(topico);\n            }\n        } else if (topico.status === 'NÃ£o iniciado') {\n            topico.status = 'Estudando';\n        }\n\n        this._saveToFirestore();\n        this._notify();\n\n        return sessao;\n    }\n\n    /**\n     * ObtÃ©m todas as tags Ãºnicas de todos os tÃ³picos\n     */\n    getAllTags() {\n        const tags = new Set();\n        this.state.topicos.forEach(topico => {\n            if (topico.tags && Array.isArray(topico.tags)) {\n                topico.tags.forEach(tag => tags.add(tag));\n            }\n        });\n        return Array.from(tags);\n    }\n\n    /**\n     * Define instÃ¢ncia de RevisaoEspacada\n     */\n    setRevisaoEspacada(revisaoEspacada) {\n        this.revisaoEspacada = revisaoEspacada;\n    }\n\n    /**\n     * ObtÃ©m estado completo\n     */\n    getState() {\n        return {\n            ...this.state\n        };\n    }\n\n    /**\n     * Limpa todos os listeners\n     */\n    destroy() {\n        this.listeners.forEach(unsubscribe => unsubscribe());\n        this.listeners = [];\n    }\n}\n\n// Export ES6\nexport {\n    EstudosStore\n};\nexport default EstudosStore;\n\n// Export para uso global (compatibilidade)\nif (typeof module !== 'undefined' && module.exports) {\n    module.exports = EstudosStore;\n}"],"names":["EstudosStore","firebaseCache","cached","firebaseService","estudos","areas","topicos","error","unsubscribe","v2Data","v2","area","topico","e","callback","cb","id","a","areaData","updates","index","t","areaId","topicoData","updated","topicoId","sessaoData","sessao","tags","tag","revisaoEspacada"],"mappings":"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"}